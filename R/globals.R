
# tmp$notes[2] %>%
#   stringr::str_split("\\n") %>%
#   unlist() %>%
#   .[stringr::str_detect(.,pattern = stringr::fixed("no visible"),negate = TRUE)] %>%
#   trimws() %>%
#   .[(which(.=="Undefined global functions or variables:")+1):
#       (which(.=="Consider adding")-1)] %>%
#   lapply(stringr::str_split, "\\s") %>%
#   unlist() %>% clipr::write_clip()


utils::globalVariables(c(
	":=",
	".",
	".active",
	".code",
	".error_type",
	".file",
	".fill",
	".hospital",
	".id",
	".new_data",
	".row_number",
	".study_year",
	".subgroup",
	".tmp_col",
	".value",
	".variable",
	".x",
	"admin.consent_for_blood",
	"admin.consent_for_respiratory_samples",
	"admin.consent_for_urine",
	"admin.consent_withheld",
	"admin.consented",
	"admin.consented_record_number",
	"admin.data_file",
	"admin.duplicate",
	"admin.ed_episodes_in_last_30_days",
	"admin.enrollment_date",
	"admin.first_record_number",
	"admin.gp_practice",
	"admin.gp_practice_old",
	"admin.hospital",
	"admin.np_swab_date_1",
	"admin.np_swab_date_2",
	"admin.np_swab_date_3",
	"admin.np_swab_day_since_admission",
	"admin.np_swab_site_1",
	"admin.np_swab_site_2",
	"admin.np_swab_site_3",
	"admin.np_swab_taken_1",
	"admin.np_swab_taken_2",
	"admin.np_swab_taken_3",
	"admin.opted_out",
	"admin.patient_identifier",
	"admin.pp_consented",
	"admin.record_number",
	"admin.saliva_sample_date",
	"admin.saliva_sample_day_since_admission",
	"admin.saliva_sample_taken",
	"admin.serum_sample_date",
	"admin.serum_sample_day_since_admission",
	"admin.serum_sample_taken",
	"admin.sputum_sample_date",
	"admin.sputum_sample_day_since_admission",
	"admin.sputum_sample_taken",
	"admin.study_year",
	"admin.urine_sample_date",
	"admin.urine_sample_day_since_admission",
	"admin.urine_sample_failure_reason",
	"admin.urine_sample_needed",
	"admin.urine_sample_site",
	"admin.urine_sample_taken",
	"admin.week_number",
	"admin.withdrawal",
	"admission_date",
	"admission.admission_route",
	"admission.BMI",
	"admission.charlson_comorbidity_index",
	"admission.crb_65_severity_score",
	"admission.crb65",
	"admission.curb_65_severity_score",
	"admission.curb65",
	"admission.cxr_covid_changes",
	"admission.cxr_heart_failure",
	"admission.cxr_normal",
	"admission.cxr_other",
	"admission.cxr_pleural_effusion",
	"admission.cxr_pneumonia",
	"admission.date",
	"admission.diastolic_bp",
	"admission.duration_symptoms",
	"admission.heart_rate",
	"admission.height",
	"admission.hospital_acquired_covid",
	"admission.infection_site",
	"admission.max_oxygen",
	"admission.news2_score",
	"admission.non_lrtd_hospital_acquired_covid",
	"admission.on_immunosuppression",
	"admission.on_inhaled_corticosteroids",
	"admission.oximetry",
	"admission.pneumonia_severity_index_class",
	"admission.pre_admission_antibiotic",
	"admission.pre_admission_antibiotics_given",
	"admission.presentation_3_class",
	"admission.presumed_CAP_clinically_confirmed",
	"admission.presumed_CAP_no_radiology",
	"admission.presumed_CAP_radiologically_confirmed",
	"admission.presumed_congestive_heart_failure",
	"admission.presumed_Empyema_or_abscess",
	"admission.presumed_exacerbation_COPD",
	"admission.presumed_exacerbation_non_COPD",
	"admission.presumed_LRTI",
	"admission.presumed_non_infectious_process",
	"admission.presumed_non_LRTI",
	"admission.previous_covid_infection",
	"admission.previous_covid_infection_date",
	"admission.respiratory_rate",
	"admission.rockwood_score",
	"admission.saturations_on_room_air",
	"admission.study_week",
	"admission.systolic_bp",
	"admission.temperature",
	"admission.time_since_covid_diagnosis",
	"admission.time_since_fifth_vaccine_dose",
	"admission.time_since_first_vaccine_dose",
	"admission.time_since_fourth_vaccine_dose",
	"admission.time_since_last_flu_vaccine_dose",
	"admission.time_since_last_pneumococcal_vaccine_dose",
	"admission.time_since_second_vaccine_dose",
	"admission.time_since_sixth_vaccine_dose",
	"admission.time_since_third_vaccine_dose",
	"admission.triage_score",
	"admission.weight",
	"admission.year",
	"age_at_admission",
	"ANALYSIS",
	"any_pres",
	"candidate",
	"canonical",
	"category",
	"colour",
	"comorbid.af",
	"comorbid.AIDS",
	"comorbid.asthma",
	"comorbid.bmi_status",
	"comorbid.bronchiectasis",
	"comorbid.ccf",
	"comorbid.chronic_pleural_dx",
	"comorbid.ckd",
	"comorbid.cognitive_impairment",
	"comorbid.congenital_heart_dx",
	"comorbid.connective_tissue_dx",
	"comorbid.copd",
	"comorbid.cva",
	"comorbid.cystic_fibrosis",
	"comorbid.dementia",
	"comorbid.diabetes",
	"comorbid.diabetes_medications",
	"comorbid.dysphagia",
	"comorbid.gastric_ulcers",
	"comorbid.hemiplegia",
	"comorbid.hepatitis_c",
	"comorbid.HIV",
	"comorbid.hypertension",
	"comorbid.ihd",
	"comorbid.immunodeficiency",
	"comorbid.influenza_infection",
	"comorbid.interstitial_lung_dx",
	"comorbid.leukaemia",
	"comorbid.liver_disease",
	"comorbid.lymphoma",
	"comorbid.neuro_other",
	"comorbid.no_dementia",
	"comorbid.no_haemotological_cancer",
	"comorbid.no_heart_dx",
	"comorbid.no_HIV",
	"comorbid.no_neuro_dx",
	"comorbid.no_resp_dx",
	"comorbid.other_arrythmia",
	"comorbid.other_chronic_resp_dx",
	"comorbid.other_heart_dx",
	"comorbid.other_other_heart_dx",
	"comorbid.other_pneumococcal_risks",
	"comorbid.pacemaker",
	"comorbid.paraplegia",
	"comorbid.periph_vasc_dx",
	"comorbid.pregnancy",
	"comorbid.previous_mi",
	"comorbid.pulmonary_fibrosis",
	"comorbid.pulmonary_hypertension",
	"comorbid.recent_chemotherapy",
	"comorbid.recent_radiotherapy",
	"comorbid.resp_other",
	"comorbid.solid_cancer",
	"comorbid.tia",
	"comorbid.transplant_recipient",
	"comorbid.valvular_heart_dx",
	"consented",
	"convert",
	"count",
	"covid19",
	"csv",
	"data",
	"day_7.ARF",
	"day_7.cardiac_failure",
	"day_7.death",
	"day_7.DVT",
	"day_7.icu_length_of_stay",
	"day_7.inpatient_fall",
	"day_7.ionotropes_needed",
	"day_7.length_of_stay",
	"day_7.max_care_level",
	"day_7.max_o2_level",
	"day_7.max_peep",
	"day_7.max_ventilation_level",
	"day_7.new_AF",
	"day_7.new_other_arrythmia",
	"day_7.no_complication",
	"day_7.NSTEMI",
	"day_7.other_complication",
	"day_7.PE",
	"day_7.STEMI",
	"day_7.still_on_icu",
	"day_7.WHO_clinical_progression",
	"demog.age",
	"demog.age_in_march_2021",
	"demog.alcohol_abuse",
	"demog.care_home_resident",
	"demog.ethnicity",
	"demog.gender",
	"demog.imd_decile",
	"demog.ivdu_abuse",
	"demog.marijuana_abuse",
	"demog.no_drug_abuse",
	"demog.other_inhaled_drug_abuse",
	"demog.smoker",
	"demog.units_of_alcohol",
	"demog.vaping",
	"diabetes",
	"diagnosis.admission_swab",
	"diagnosis.clinical_or_radiological_LRTI_or_pneumonia",
	"diagnosis.covid_19_diagnosis",
	"diagnosis.first_COVID_positive_swab_date",
	"diagnosis.meets_case_control_criteria",
	"diagnosis.qualifying_symptoms_signs",
	"diagnosis.SOC_CAP_clinically_confirmed",
	"diagnosis.SOC_CAP_no_radiology",
	"diagnosis.SOC_CAP_radiologically_confirmed",
	"diagnosis.SOC_congestive_heart_failure",
	"diagnosis.SOC_Empyema_or_abscess",
	"diagnosis.SOC_exacerbation_COPD",
	"diagnosis.SOC_exacerbation_non_COPD",
	"diagnosis.SOC_LRTI",
	"diagnosis.SOC_non_infectious_process",
	"diagnosis.SOC_non_LRTI",
	"diagnosis.standard_of_care_COVID_diagnosis",
	"diagnosis.test_type",
	"directory",
	"empty",
	"end",
	"enrollment_date",
	"entries",
	"ethn",
	"ethnicity",
	"ethnicity2",
	"fade",
	"filename",
	"filename_date",
	"filetype",
	"final_soc_lrtd_diagnosis___1",
	"final_soc_lrtd_diagnosis___2",
	"final_soc_lrtd_diagnosis___3",
	"final_soc_lrtd_diagnosis___4",
	"final_soc_lrtd_diagnosis___5",
	"form",
	"gender",
	"genomic.variant",
	"group",
	"haem.albumin",
	"haem.blood_gas_ph",
	"haem.blood_group",
	"haem.creatinine",
	"haem.crp",
	"haem.d_dimer",
	"haem.egfr",
	"haem.eosinophils",
	"haem.ferritin",
	"haem.glucose",
	"haem.haemoglobin",
	"haem.haemotocrit",
	"haem.lymphocytes",
	"haem.neutrophils",
	"haem.pro_bnp",
	"haem.sars_cov2_antigen",
	"haem.sodium",
	"haem.troponin",
	"haem.urea",
	"haem.white_cell_count",
	"hapcovid_screening",
	"hospital",
	"hospital_covid",
	"hospital_length_of_stay",
	"imd_decile",
	"include_patient",
	"intersection",
	"item",
	"item count",
	"key_dates",
	"key.sample",
	"label",
	"level_code",
	"level_df",
	"level_dp",
	"level_size",
	"limits",
	"lower",
	"lrtd_30d_outcome",
	"mean_townsend",
	"micro.ceftriaxone_susceptibility",
	"micro.doxycycline_susceptibility",
	"micro.is_final_report",
	"micro.levofloxacin_susceptibility",
	"micro.pathogen",
	"micro.pathogen_detected",
	"micro.penicillin_susceptibility",
	"micro.pneumo_binax_now",
	"micro.pneumo_legionella_uat",
	"micro.pneumo_serotype",
	"micro.pneumo_serotype_status",
	"micro.sent_to_central_lab",
	"micro.septrin_susceptibility",
	"micro.test_date",
	"micro.test_days_from_admission",
	"micro.test_performed",
	"micro.test_type",
	"mismatches",
	"n",
	"N",
	"n.censor",
	"n.event",
	"n.risk",
	"name",
	"next.time",
	"opts",
	"outcome.5_yr_survival_duration",
	"outcome.abnormal_lft",
	"outcome.acute_kidney_injury",
	"outcome.acute_renal_failure",
	"outcome.acute_respiratory_distress_syndrome",
	"outcome.admitted_icu",
	"outcome.admitted_within_30_days",
	"outcome.admitted_within_7_days",
	"outcome.antibiotic_duration",
	"outcome.antibiotic_route",
	"outcome.days_since_last_ed_episode",
	"outcome.death_within_1_year",
	"outcome.death_within_30_days",
	"outcome.death_within_5_years",
	"outcome.discharge_to",
	"outcome.DVT",
	"outcome.emergency_dept_length_of_stay",
	"outcome.empyema",
	"outcome.endotracheal_tube_duration",
	"outcome.fall_in_hospital",
	"outcome.functional_status",
	"outcome.heart_failure",
	"outcome.highest_level_ventilatory_support",
	"outcome.hospital_acquired_infection",
	"outcome.icu_duration",
	"outcome.increasing_care_requirement",
	"outcome.inpatient_death",
	"outcome.intubation",
	"outcome.length_of_stay",
	"outcome.liver_dysfunction",
	"outcome.new_AF",
	"outcome.new_other_arrhthmia",
	"outcome.no_complications",
	"outcome.non_invasive_ventilation",
	"outcome.NSTEMI",
	"outcome.one_year_survival",
	"outcome.one_year_survival_complete",
	"outcome.one_year_survival_duration",
	"outcome.PE",
	"outcome.pleural_effusion",
	"outcome.received_ecmo",
	"outcome.received_ionotropes",
	"outcome.recurrent_pneumonia",
	"outcome.reduced_mobility",
	"outcome.renal_support_duration",
	"outcome.respiratory_support_needed",
	"outcome.STEMI",
	"outcome.stroke",
	"outcome.survival_duration",
	"outcome.tracheostomy",
	"outcome.ventilator_duration",
	"parse_issues",
	"path",
	"patient",
	"patient subgroup",
	"pneumo.binax_result",
	"pneumo.group",
	"pneumo.pcv_group",
	"pneumo.phe_serotype",
	"pneumo.test_date",
	"pneumo.test_type",
	"pneumo.urine_antigen",
	"pneumo.urine_antigen_result",
	"pneumo.urine_antigen_sample_id",
	"pneumo.urine_antigen_test",
	"ppc",
	"prefix",
	"pregnancy",
	"primary",
	"qcovid2.log_comorbid_hazard",
	"qcovid2.log_hazard",
	"radio.alrtd_finding",
	"radio.consistent_with_pneumonia_1",
	"radio.consistent_with_pneumonia_2",
	"radio.cxr_infection",
	"radio.cxr_lobar_changes",
	"radio.non_alrtd_finding",
	"radio.test_date",
	"radio.test_days_from_admission",
	"radio.test_performed",
	"radio.test_type",
	"record_number",
	"required",
	"result",
	"sample_id",
	"se",
	"serotype",
	"serotype_pcv_map",
	"shade",
	"start",
	"strata",
	"study_year",
	"subgroup",
	"subtype",
	"suffix",
	"surv.estimate",
	"surv.lower",
	"surv.lower2",
	"surv.upper",
	"survival_1yr_days",
	"survival_days",
	"survival.30_day_death_event",
	"survival.30_day_death_time",
	"survival.length_of_stay",
	"survival.uncensored_time_to_death",
	"symptom.abnormal_temperature",
	"symptom.ageusia",
	"symptom.anosmia",
	"symptom.chills",
	"symptom.confusion",
	"symptom.cough",
	"symptom.dysguesia",
	"symptom.dyspnoea",
	"symptom.fever",
	"symptom.general_deterioration",
	"symptom.headache",
	"symptom.hypothermia",
	"symptom.malaise",
	"symptom.myalgia",
	"symptom.oxygen_required_on_admission",
	"symptom.pleuritic_chest_pain",
	"symptom.productive_sputum",
	"symptom.tachypnoea",
	"symptom.wheeze",
	"symptom.worsening_confusion",
	"test",
	"time",
	"tmp2",
	"total",
	"total_in_category",
	"treatment.dexamethasone",
	"treatment.in_drug_trial",
	"treatment.no_drug_treatment",
	"treatment.remdesevir",
	"treatment.sarilumab",
	"treatment.sotrovimab",
	"treatment.tocilizumab",
	"type",
	"uad_panel",
	"uad_pcv_map",
	"upper",
	"vaccination.covid_vaccination",
	"vaccination.covid_vaccine_contraindicated",
	"vaccination.fifth_dose_brand",
	"vaccination.fifth_dose_date",
	"vaccination.first_dose_brand",
	"vaccination.first_dose_date",
	"vaccination.flu",
	"vaccination.fourth_dose_brand",
	"vaccination.fourth_dose_date",
	"vaccination.influenza_vaccination",
	"vaccination.last_flu_dose_date",
	"vaccination.last_pneumococcal_dose_date",
	"vaccination.pneumovax",
	"vaccination.ppv23_vaccination",
	"vaccination.second_dose_brand",
	"vaccination.second_dose_date",
	"vaccination.sixth_dose_brand",
	"vaccination.sixth_dose_date",
	"vaccination.third_dose_brand",
	"vaccination.third_dose_date",
	"value",
	"variable",
	"virol.pathogen",
	"virol.pathogen_detected",
	"virol.test_date",
	"virol.test_days_from_admission",
	"virol.test_performed",
	"virol.test_provenance",
	"virol.test_type",
	"week_number",
	"withdrawal",
	"x",
	"X2",
	"X3",
	"y",
	"year",
	"pandemic_period", "pcv_vaccine_period", "pre_covid"

))
