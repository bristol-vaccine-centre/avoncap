[{"path":"/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 Bristol Vaccine Institute Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"/articles/web/avoncap.html","id":"input-data-location","dir":"Articles > Web","previous_headings":"","what":"Input data location","title":"Getting started","text":"first level directories. Filenames need indication database year (either 20-21,21-22,… y1,y2,…)","code":"# The data input directory on my development machine: options(\"avoncap.input\" = \"~/Data/avoncap/\")  # The directory structure: fs::dir_tree(path = avoncap::input(),glob=\"*/cache/*\",invert=TRUE) #> /home/vp22681/Data/avoncap #> ├── avoncap-data-quality #> │   ├── 2023-08-07 #> │   │   └── confirmed-missing-2023-08-07.csv #> │   └── README.md #> ├── avoncap-export #> │   ├── 2022-03-22 #> │   │   ├── central_y1.csv #> │   │   └── central_y2.csv #> │   ├── 2022-06-20 #> │   │   ├── central_y1.csv #> │   │   └── central_y2.csv #> │   ├── 2022-07-11 #> │   │   ├── central_y1.csv #> │   │   └── central_y2.csv #> │   ├── 2022-09-21 #> │   │   ├── central_y1.csv #> │   │   └── central_y2.csv #> │   ├── 2022-10-07 #> │   │   └── uad-controls.csv #> │   ├── 2022-11-09 #> │   │   ├── central_y1.csv #> │   │   ├── central_y2.csv #> │   │   └── uad-controls.csv #> │   ├── 2023-03-02 #> │   │   ├── central_y1.csv #> │   │   ├── central_y2.csv #> │   │   └── central_y3.csv #> │   ├── 2023-05-02 #> │   │   ├── central_y1.csv #> │   │   ├── central_y2.csv #> │   │   └── central_y3.csv #> │   ├── 2023-06-12 #> │   │   ├── central_y1.csv #> │   │   ├── central_y2.csv #> │   │   └── central_y3.csv #> │   ├── 2023-06-16 #> │   │   └── uad-controls.csv #> │   ├── 2023-06-28 #> │   │   ├── central_y1.csv #> │   │   ├── central_y2.csv #> │   │   ├── central_y3.csv #> │   │   └── gp.csv #> │   ├── 2023-07-24 #> │   │   ├── central_y1.csv #> │   │   ├── central_y2.csv #> │   │   └── central_y3.csv #> │   ├── 2023-09-13 #> │   │   ├── central_y1.csv #> │   │   ├── central_y2.csv #> │   │   └── central_y3.csv #> │   ├── 2023-11-20 #> │   │   └── ed_y3.csv #> │   ├── 2023-11-21 #> │   │   ├── central_y1.csv #> │   │   ├── central_y2.csv #> │   │   └── central_y3.csv #> │   ├── 2023-11-24 #> │   │   ├── central_y1.csv #> │   │   ├── central_y2.csv #> │   │   ├── central_y3.csv #> │   │   └── ed_y3.csv #> │   ├── 2024-04-08 #> │   │   ├── central_y1.csv #> │   │   ├── central_y2.csv #> │   │   ├── central_y3.csv #> │   │   ├── central_y4.csv #> │   │   └── ed_y3.csv #> │   ├── 2024-10-03 #> │   │   ├── central_y1.csv #> │   │   ├── central_y2.csv #> │   │   ├── central_y3.csv #> │   │   ├── central_y4.csv #> │   │   └── ed_y3.csv #> │   ├── 22-23 codebook NBT.pdf #> │   ├── 22-23 codebook UHBW.pdf #> │   ├── Avon CAP - LRTD Patients 21-22 _ REDCap codebook.pdf #> │   ├── Avon CAP - LRTD central database 20-21 _ REDCap.pdf #> │   ├── AvonCAP Pneumococcus Codebook.pdf #> │   ├── AvonCAP field validity.xlsx #> │   └── README.md #> ├── avoncap.yaml #> ├── cache #> ├── downloads #> │   └── README.md #> ├── ethnicity #> │   ├── 2022-07-12 #> │   │   ├── y1.csv #> │   │   └── y2.csv #> │   ├── 2022-10-27 #> │   │   ├── y1.csv #> │   │   └── y2.csv #> │   ├── 2023-06-07 #> │   │   ├── y1.csv #> │   │   ├── y2.csv #> │   │   └── y3.csv #> │   ├── 2023-11-22 #> │   │   ├── BRI_y2_extra.csv #> │   │   ├── BRI_y3_extra.csv #> │   │   ├── NBT_y2_extra.csv #> │   │   ├── NBT_y3_extra.csv #> │   │   ├── y1.csv #> │   │   ├── y2.csv #> │   │   └── y3.csv #> │   └── README.md #> ├── google-mobility #> │   └── Global_Mobility_Report.csv #> ├── ltla-incidence #> │   ├── ltla_2022-02-28.csv #> │   └── ltla_2022-03-18.csv #> ├── maybe_some_useful_files_data.zip #> ├── metadata #> │   ├── 2022-10-24 #> │   │   ├── central_y1.csv #> │   │   ├── central_y2.csv #> │   │   ├── central_y3.csv #> │   │   └── uad-controls.csv #> │   ├── 2022-11-29 #> │   │   └── pneumococcal.csv #> │   └── README.md #> ├── metadata-review #> │   ├── 2022-10-25 #> │   │   └── metadata-review.csv #> │   ├── AvonCAP 21-22 markred.xlsx #> │   └── AvonCAP data dictionary - fields.csv #> ├── nhs-extract #> │   ├── 2022-07-11 #> │   │   ├── deltave_BRI_y1.csv #> │   │   ├── deltave_BRI_y2.csv #> │   │   ├── deltave_NBT_y1.csv #> │   │   └── deltave_NBT_y2.csv #> │   ├── 2022-09-20 #> │   │   ├── deltave_BRI_y1.csv #> │   │   ├── deltave_BRI_y2.csv #> │   │   ├── deltave_BRI_y3.csv #> │   │   ├── deltave_NBT_y1.csv #> │   │   ├── deltave_NBT_y2.csv #> │   │   └── deltave_NBT_y3.csv #> │   ├── 2022-11-16 #> │   │   ├── deltave_BRI_y1.csv #> │   │   ├── deltave_BRI_y2.csv #> │   │   ├── deltave_BRI_y3.csv #> │   │   ├── deltave_NBT_y1.csv #> │   │   ├── deltave_NBT_y2.csv #> │   │   └── deltave_NBT_y3.csv #> │   ├── 2022-11-29 #> │   │   └── pneumococcal.csv #> │   ├── 2022-11-30 #> │   │   ├── deltave_BRI_y1.csv #> │   │   ├── deltave_BRI_y2.csv #> │   │   ├── deltave_BRI_y3.csv #> │   │   ├── deltave_NBT_y1.csv #> │   │   ├── deltave_NBT_y2.csv #> │   │   └── deltave_NBT_y3.csv #> │   ├── 2022-12-07 #> │   │   ├── deltave_BRI_y1.csv #> │   │   ├── deltave_BRI_y2.csv #> │   │   ├── deltave_BRI_y3.csv #> │   │   ├── deltave_NBT_y1.csv #> │   │   ├── deltave_NBT_y2.csv #> │   │   └── deltave_NBT_y3.csv #> │   ├── 2022-12-20 #> │   │   └── ipd_avoncap_linkage.csv #> │   ├── 2023-02-07 #> │   │   └── pneumococcal.csv #> │   ├── README.md #> │   └── old #> │       ├── AdmissionDateByStudyNumber_2022-07-12.csv #> │       └── DeltaVE_04042022.csv #> ├── spim-seroprevalence #> │   └── week15_2022_seroprev_modellers.csv #> └── urine-antigens #>     ├── 2022-09-15 #>     │   └── uad-cases.csv #>     ├── 2023-05-15 #>     │   ├── gp-cases.csv #>     │   └── uad-cases.csv #>     ├── B1851202_SAP V1.0-27Sep2021_Final.pdf #>     ├── README.md #>     └── Table Template Serotype Distribution Scientific Affairs Proposal_FINAL.docx # get the most recent files avoncap::most_recent_files(\"ethnicity\") #> # A tibble: 7 × 7 #>   filename     directory path            date       hospital study_year filetype #>   <chr>        <chr>     <fs::path>      <date>     <chr>         <int> <chr>    #> 1 BRI_y2_extra ethnicity …I_y2_extra.csv 2023-11-22 BRI               2 csv      #> 2 BRI_y3_extra ethnicity …I_y3_extra.csv 2023-11-22 BRI               3 csv      #> 3 NBT_y2_extra ethnicity …T_y2_extra.csv 2023-11-22 NBT               2 csv      #> 4 NBT_y3_extra ethnicity …T_y3_extra.csv 2023-11-22 NBT               3 csv      #> 5 y1           ethnicity …3-11-22/y1.csv 2023-11-22 NA               NA csv      #> 6 y2           ethnicity …3-11-22/y2.csv 2023-11-22 NA               NA csv      #> 7 y3           ethnicity …3-11-22/y3.csv 2023-11-22 NA               NA csv # devtools::load_all() try(avoncap::load_data(\"missing\")) #> No suitable files matching \"missing\", before date: 2024-10-03. Try one of:  #> as an input to 'type' #> Error in avoncap::load_data(\"missing\") : aborting."},{"path":"/articles/web/avoncap.html","id":"load-data-sources-and-recording-provenance","dir":"Articles > Web","previous_headings":"","what":"Load data sources and recording provenance","title":"Getting started","text":"","code":"ethn = avoncap::load_data(\"ethnicity\") #> using cached item: ~/.cache/avoncap/data-6c0a3f301ee14020e3907a7472c55225-767899bd2d292ad780aeb94b72046017.rda avoncap::most_recent_files(\"nhs-extract\",\"deltave\") #> # A tibble: 6 × 7 #>   filename       directory   path        date       hospital study_year filetype #>   <chr>          <chr>       <fs::path>  <date>     <chr>         <int> <chr>    #> 1 deltave_BRI_y1 nhs-extract …BRI_y1.csv 2022-12-07 BRI               1 csv      #> 2 deltave_BRI_y2 nhs-extract …BRI_y2.csv 2022-12-07 BRI               2 csv      #> 3 deltave_BRI_y3 nhs-extract …BRI_y3.csv 2022-12-07 BRI               3 csv      #> 4 deltave_NBT_y1 nhs-extract …NBT_y1.csv 2022-12-07 NBT               1 csv      #> 5 deltave_NBT_y2 nhs-extract …NBT_y2.csv 2022-12-07 NBT               2 csv      #> 6 deltave_NBT_y3 nhs-extract …NBT_y3.csv 2022-12-07 NBT               3 csv rawData = avoncap::load_data(\"nhs-extract\",\"deltave\") #> using cached item: ~/.cache/avoncap/data-6c0a3f301ee14020e3907a7472c55225-efc310106a2b36fab3e67f93fe2c9461.rda # rawData = avoncap::load_data(\"nhs-extract\",\"deltave\",merge = FALSE) avoncap::save_data_source_info(ethn, rawData, .file = tempfile(\"file-info\",fileext = \".txt\")) #> # A tibble: 13 × 2 #>    path                                                                 md5      #>    <chr>                                                                <chr>    #>  1 /home/vp22681/Data/avoncap/ethnicity/2023-11-22/BRI_y2_extra.csv     030679d… #>  2 /home/vp22681/Data/avoncap/ethnicity/2023-11-22/BRI_y3_extra.csv     e66fe88… #>  3 /home/vp22681/Data/avoncap/ethnicity/2023-11-22/NBT_y2_extra.csv     3726813… #>  4 /home/vp22681/Data/avoncap/ethnicity/2023-11-22/NBT_y3_extra.csv     afda520… #>  5 /home/vp22681/Data/avoncap/ethnicity/2023-11-22/y1.csv               270d33e… #>  6 /home/vp22681/Data/avoncap/ethnicity/2023-11-22/y2.csv               0a9ee3d… #>  7 /home/vp22681/Data/avoncap/ethnicity/2023-11-22/y3.csv               3a4a048… #>  8 /home/vp22681/Data/avoncap/nhs-extract/2022-12-07/deltave_BRI_y1.csv 66825a9… #>  9 /home/vp22681/Data/avoncap/nhs-extract/2022-12-07/deltave_BRI_y2.csv cbd04cf… #> 10 /home/vp22681/Data/avoncap/nhs-extract/2022-12-07/deltave_BRI_y3.csv b2fd072… #> 11 /home/vp22681/Data/avoncap/nhs-extract/2022-12-07/deltave_NBT_y1.csv f61195e… #> 12 /home/vp22681/Data/avoncap/nhs-extract/2022-12-07/deltave_NBT_y2.csv be0456b… #> 13 /home/vp22681/Data/avoncap/nhs-extract/2022-12-07/deltave_NBT_y3.csv 49d5d4e…"},{"path":"/articles/web/avoncap.html","id":"normalising-data","dir":"Articles > Web","previous_headings":"","what":"Normalising data","title":"Getting started","text":"","code":"# devtools::install_local(force=TRUE) normData = rawData %>%    avoncap::validate_data() %T>%   # note the magrittr `T` pipe above to drop the output of write issues   avoncap::write_issues(\"issues.csv\") %>%   avoncap::normalise_data() #> validate data using: validate.nhs_extract.deltave #> Normalising data using: normalise.nhs_extract.deltave #> Some columns expected in the mappings were not present: consent_urine, consent_blood, consent_resp_samples1, what_was_the_first_surveil, admission_type, gp_practice, gp_practice_drop_down, hapcovid_screening, hospital_covid, np_swab, adm_np_type, np_date, days_adm_npswab, np_swab_2, adm_np_type_2, np_date_2, np_swab_3, adm_np_type_3, np_date_3, saliva, saliva_date, days_adm_saliva, sputum, sputum_date, days_adm_sputum, pt_ad_ur, adm_ur_taken, nourine_reason, adm_np_type_2, adm_ur_date, days_adm_urine, adm_serum_tak, adm_seru_date, days_adm_serum, adm_diagnosis, survive_1yr, survival_1yr_days, yr_survival_complete, confusion, abx_14d_prior, antibiotic_used, antiplatelets, anticoagulants, statins, hypertensives, antiviral_14d_prior #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-007e47572d029d4d1474648ad7002896.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> the input data set does not have a consent_urine column (or column set) #> the input data set does not have a consent_blood column (or column set) #> the input data set does not have a consent_resp_samples1 column (or column set) #> mapping .record_number to admin.record_number #> the input data set does not have a what_was_the_first_surveil column (or column set) #> mapping .ac_study_number to admin.consented_record_number #> mapping .nhs_number to admin.patient_identifier #> mapping .duplicate to admin.duplicate #> mapping .enrollment_date to admin.enrollment_date #> the input data set does not have a admission_type column (or column set) #> mapping .study_year to admin.study_year #> mapping .file to admin.data_file #> mapping .week_number to admin.week_number #> mapping .c19_diagnosis to diagnosis.standard_of_care_COVID_diagnosis #> mapping .clinical_radio_diagnosis to diagnosis.clinical_or_radiological_LRTI_or_pneumonia #> mapping .c19_adm_swab to diagnosis.admission_swab #> mapping .c19_test_type to diagnosis.test_type #> mapping .qualifying_symptoms_signs to diagnosis.qualifying_symptoms_signs #> mapping .cc_critieria to diagnosis.meets_case_control_criteria #> mapping .cc_pos_date to diagnosis.first_COVID_positive_swab_date #> mapping .gender to demog.gender #> mapping .age_at_admission to demog.age #> mapping .age_march to demog.age_in_march_2021 #> mapping .imd to demog.imd_decile #> the input data set does not have a gp_practice column (or column set) #> the input data set does not have a gp_practice_drop_down column (or column set) #> mapping .smoking to demog.smoker #> mapping .ethnicity2 to demog.ethnicity #> mapping .care_home to demog.care_home_resident #> the input data set does not have a hapcovid_screening column (or column set) #> the input data set does not have a hospital_covid column (or column set) #> mapping .drugs___1 to demog.no_drug_abuse #> mapping .drugs___2 to demog.alcohol_abuse #> mapping .drugs___3 to demog.ivdu_abuse #> mapping .drugs___4 to demog.marijuana_abuse #> mapping .drugs___5 to demog.other_inhaled_drug_abuse #> mapping .vaping to demog.vaping #> mapping .alc_units to demog.units_of_alcohol #> the input data set does not have a np_swab column (or column set) #> the input data set does not have a adm_np_type column (or column set) #> the input data set does not have a np_date column (or column set) #> the input data set does not have a days_adm_npswab column (or column set) #> the input data set does not have a np_swab_2 column (or column set) #> the input data set does not have a adm_np_type_2 column (or column set) #> the input data set does not have a np_date_2 column (or column set) #> the input data set does not have a np_swab_3 column (or column set) #> the input data set does not have a adm_np_type_3 column (or column set) #> the input data set does not have a np_date_3 column (or column set) #> the input data set does not have a saliva column (or column set) #> the input data set does not have a saliva_date column (or column set) #> the input data set does not have a days_adm_saliva column (or column set) #> the input data set does not have a sputum column (or column set) #> the input data set does not have a sputum_date column (or column set) #> the input data set does not have a days_adm_sputum column (or column set) #> the input data set does not have a pt_ad_ur column (or column set) #> the input data set does not have a adm_ur_taken column (or column set) #> the input data set does not have a nourine_reason column (or column set) #> the input data set does not have a adm_np_type_2 column (or column set) #> the input data set does not have a adm_ur_date column (or column set) #> the input data set does not have a days_adm_urine column (or column set) #> the input data set does not have a adm_serum_tak column (or column set) #> the input data set does not have a adm_seru_date column (or column set) #> the input data set does not have a days_adm_serum column (or column set) #> mapping .contraindication to vaccination.covid_vaccine_contraindicated #> mapping .covid19_vax to vaccination.covid_vaccination #> mapping .covidvax_date to vaccination.first_dose_date #> mapping .covidvax_dose_2 to vaccination.second_dose_date #> mapping .covidvax_dose_3 to vaccination.third_dose_date #> mapping .covidvax_dose_4 to vaccination.fourth_dose_date #> mapping .covidvax_dose_5 to vaccination.fifth_dose_date #> mapping .covidvax_dose_6 to vaccination.sixth_dose_date #> mapping .brand_of_covid19_vaccinati to vaccination.first_dose_brand #> mapping .covid19vax_brand_2 to vaccination.second_dose_brand #> mapping .covid19vax_brand_3 to vaccination.third_dose_brand #> mapping .covid19vax_brand_4 to vaccination.fourth_dose_brand #> mapping .covid19vax_brand_5 to vaccination.fifth_dose_brand #> mapping .covid19vax_brand_6 to vaccination.sixth_dose_brand #> mapping .c19vaxd1_adm to admission.time_since_first_vaccine_dose #> mapping .c19vaxd2_adm to admission.time_since_second_vaccine_dose #> mapping .c19vaxd3_adm to admission.time_since_third_vaccine_dose #> mapping .c19vaxd4_adm to admission.time_since_fourth_vaccine_dose #> mapping .c19vax5_adm to admission.time_since_fifth_vaccine_dose #> mapping .c19vax6_adm to admission.time_since_sixth_vaccine_dose #> mapping .flu_date to vaccination.last_flu_dose_date #> mapping .fluvax_adm_d1 to admission.time_since_last_flu_vaccine_dose #> mapping .ppv23_date to vaccination.last_pneumococcal_dose_date #> mapping .ppv23vax_adm_d to admission.time_since_last_pneumococcal_vaccine_dose #> mapping .c19_variant to genomic.variant #> mapping .year to admission.year #> mapping .study_week to admission.study_week #> mapping .admission_date to admission.date #> mapping .hospital to admin.hospital #> the input data set does not have a adm_diagnosis column (or column set) #> mapping .ics to admission.on_inhaled_corticosteroids #> mapping .immsup to admission.on_immunosuppression #> mapping .psi_class to admission.pneumonia_severity_index_class #> mapping .crb_test_mai to admission.curb_65_severity_score #> mapping .news_2_total to admission.news2_score #> mapping .pulse_ox to admission.oximetry #> mapping .rr to admission.respiratory_rate #> mapping .fio2 to admission.max_oxygen #> mapping .systolic_bp to admission.systolic_bp #> mapping .diastolic_bp to admission.diastolic_bp #> mapping .hr to admission.heart_rate #> mapping .temperature to admission.temperature #> mapping .symptom_days_preadmit to admission.duration_symptoms #> mapping .previous_infection to admission.previous_covid_infection #> mapping .previousinfection_date to admission.previous_covid_infection_date #> mapping .c19d_preadm to admission.time_since_covid_diagnosis #> mapping .rockwood to admission.rockwood_score #> mapping .cci_total_score to admission.charlson_comorbidity_index #> mapping .height to admission.height #> mapping .weight to admission.weight #> mapping .bmi to admission.BMI #> mapping .first_radio___1 to admission.cxr_normal #> mapping .first_radio___2 to admission.cxr_pneumonia #> mapping .first_radio___3 to admission.cxr_heart_failure #> mapping .first_radio___4 to admission.cxr_pleural_effusion #> mapping .first_radio___5 to admission.cxr_covid_changes #> mapping .first_radio___6 to admission.cxr_other #> mapping .c19_peep to day_7.max_peep #> mapping .c19_hospadm to day_7.length_of_stay #> mapping .c17_high to day_7.max_care_level #> mapping .c19icuon to day_7.still_on_icu #> mapping .c19_icudays to day_7.icu_length_of_stay #> mapping .c19_vent to day_7.max_ventilation_level #> mapping .c19_ox to day_7.max_o2_level #> mapping .c19_ionotropes to day_7.ionotropes_needed #> mapping .c19_complication___1 to day_7.PE #> mapping .c19_complication___2 to day_7.DVT #> mapping .c19_complication___3 to day_7.ARF #> mapping .c19_complication___4 to day_7.NSTEMI #> mapping .c19_complication___5 to day_7.STEMI #> mapping .c19_complication___6 to day_7.cardiac_failure #> mapping .c19_complication___7 to day_7.new_AF #> mapping .c19_complication___8 to day_7.new_other_arrythmia #> mapping .c19_complication___9 to day_7.inpatient_fall #> mapping .c19_complication___10 to day_7.other_complication #> mapping .c19_complication___11 to day_7.no_complication #> mapping .c19_death7d to day_7.death #> mapping .c19_meds___1 to treatment.dexamethasone #> mapping .c19_meds___2 to treatment.remdesevir #> mapping .c19_meds___3 to treatment.tocilizumab #> mapping .c19_meds___4 to treatment.sarilumab #> mapping .c19_meds___5 to treatment.in_drug_trial #> mapping .c19_meds___6 to treatment.no_drug_treatment #> mapping .c19_meds___7 to treatment.sotrovimab #> mapping .hospital_length_of_stay to outcome.length_of_stay #> mapping .survival_days to outcome.survival_duration #> mapping .ip_death to outcome.inpatient_death #> mapping .days_in_icu to outcome.icu_duration #> mapping .did_the_patient_have_respi to outcome.respiratory_support_needed #> mapping .number_of_days_of_ventilat to outcome.ventilator_duration #> mapping .ett_days to outcome.endotracheal_tube_duration #> mapping .renal_replacement_therapy to outcome.renal_support_duration #> mapping .complications___1 to outcome.acute_renal_failure #> mapping .complications___2 to outcome.liver_dysfunction #> mapping .complications___3 to outcome.hospital_acquired_infection #> mapping .complications___4 to outcome.acute_respiratory_distress_syndrome #> mapping .complications___5 to outcome.NSTEMI #> mapping .complications___6 to outcome.STEMI #> mapping .complications___7 to outcome.new_AF #> mapping .complications___8 to outcome.new_other_arrhthmia #> mapping .complications___9 to outcome.stroke #> mapping .complications___10 to outcome.DVT #> mapping .complications___11 to outcome.PE #> mapping .complications___12 to outcome.heart_failure #> mapping .complications___13 to outcome.fall_in_hospital #> mapping .complications___14 to outcome.reduced_mobility #> mapping .complications___15 to outcome.increasing_care_requirement #> mapping .complications___16 to outcome.no_complications #> mapping .ventilatory_support to outcome.highest_level_ventilatory_support #> mapping .did_the_patient_receive_ec to outcome.received_ecmo #> mapping .inotropic_support_required to outcome.received_ionotropes #> mapping .lrtd_30d_outcome to outcome.functional_status #> the input data set does not have a survive_1yr column (or column set) #> the input data set does not have a survival_1yr_days column (or column set) #> the input data set does not have a yr_survival_complete column (or column set) #> mapping .fever2 to symptom.abnormal_temperature #> mapping .pleurtic_cp to symptom.pleuritic_chest_pain #> mapping .cough2 to symptom.cough #> mapping .sput_prod to symptom.productive_sputum #> mapping .dyspnoea to symptom.dyspnoea #> mapping .tachypnoea2 to symptom.tachypnoea #> the input data set does not have a confusion column (or column set) #> mapping .anosmia to symptom.anosmia #> mapping .ageusia to symptom.ageusia #> mapping .dysgeusia to symptom.dysguesia #> mapping .fever to symptom.fever #> mapping .hypothermia to symptom.hypothermia #> mapping .chills to symptom.chills #> mapping .headache to symptom.headache #> mapping .malaise to symptom.malaise #> mapping .wheeze to symptom.wheeze #> mapping .myalgia to symptom.myalgia #> mapping .worse_confusion to symptom.worsening_confusion #> mapping .general_det to symptom.general_deterioration #> mapping .ox_on_admission to symptom.oxygen_required_on_admission #> mapping .resp_disease___1 to comorbid.no_resp_dx #> mapping .resp_disease___2 to comorbid.copd #> mapping .resp_disease___3 to comorbid.asthma #> mapping .resp_disease___4 to comorbid.resp_other #> mapping .other_respiratory_disease___1 to comorbid.bronchiectasis #> mapping .other_respiratory_disease___2 to comorbid.interstitial_lung_dx #> mapping .other_respiratory_disease___3 to comorbid.cystic_fibrosis #> mapping .other_respiratory_disease___4 to comorbid.pulmonary_hypertension #> mapping .other_respiratory_disease___5 to comorbid.chronic_pleural_dx #> mapping .other_respiratory_disease___6 to comorbid.other_chronic_resp_dx #> mapping .chd___1 to comorbid.no_heart_dx #> mapping .chd___2 to comorbid.ccf #> mapping .chd___3 to comorbid.ihd #> mapping .chd___4 to comorbid.hypertension #> mapping .chd___5 to comorbid.other_heart_dx #> mapping .mi to comorbid.previous_mi #> mapping .other_chd___1 to comorbid.congenital_heart_dx #> mapping .other_chd___2 to comorbid.af #> mapping .other_chd___3 to comorbid.other_arrythmia #> mapping .other_chd___4 to comorbid.pacemaker #> mapping .other_chd___5 to comorbid.valvular_heart_dx #> mapping .other_chd___6 to comorbid.other_other_heart_dx #> mapping .diabetes to comorbid.diabetes #> mapping .dm_meds to comorbid.diabetes_medications #> mapping .neurological_disease___1 to comorbid.neuro_other #> mapping .neurological_disease___2 to comorbid.cva #> mapping .neurological_disease___3 to comorbid.tia #> mapping .neurological_disease___4 to comorbid.hemiplegia #> mapping .neurological_disease___5 to comorbid.paraplegia #> mapping .neurological_disease___6 to comorbid.no_neuro_dx #> mapping .dementia___1 to comorbid.no_dementia #> mapping .dementia___2 to comorbid.dementia #> mapping .dementia___3 to comorbid.cognitive_impairment #> mapping .cancer to comorbid.solid_cancer #> mapping .haem_malig___1 to comorbid.no_haemotological_cancer #> mapping .haem_malig___2 to comorbid.leukaemia #> mapping .haem_malig___3 to comorbid.lymphoma #> mapping .ckd to comorbid.ckd #> mapping .liver_disease to comorbid.liver_disease #> mapping .gastric_ulcers to comorbid.gastric_ulcers #> mapping .pvd to comorbid.periph_vasc_dx #> mapping .ctd to comorbid.connective_tissue_dx #> mapping .immunodeficiency to comorbid.immunodeficiency #> mapping .other_pn_disease to comorbid.other_pneumococcal_risks #> mapping .transplant to comorbid.transplant_recipient #> mapping .pregnancy to comorbid.pregnancy #> mapping .hiv___1 to comorbid.no_HIV #> mapping .hiv___2 to comorbid.HIV #> mapping .hiv___3 to comorbid.AIDS #> mapping .final_soc_lrtd_diagnosis___1 to diagnosis.SOC_CAP_radiologically_confirmed #> mapping .final_soc_lrtd_diagnosis___2 to diagnosis.SOC_CAP_clinically_confirmed #> mapping .final_soc_lrtd_diagnosis___3 to diagnosis.SOC_CAP_no_radiology #> mapping .final_soc_lrtd_diagnosis___4 to diagnosis.SOC_LRTI #> mapping .final_soc_lrtd_diagnosis___5 to diagnosis.SOC_Empyema_or_abscess #> mapping .final_soc_lrtd_diagnosis___6 to diagnosis.SOC_exacerbation_COPD #> mapping .final_soc_lrtd_diagnosis___7 to diagnosis.SOC_exacerbation_non_COPD #> mapping .final_soc_lrtd_diagnosis___8 to diagnosis.SOC_congestive_heart_failure #> mapping .final_soc_lrtd_diagnosis___9 to diagnosis.SOC_non_infectious_process #> mapping .final_soc_lrtd_diagnosis___10 to diagnosis.SOC_non_LRTI #> mapping .covid_19_diagnosis to diagnosis.covid_19_diagnosis #> mapping .ppv23 to vaccination.pneumovax #> mapping .flu_vaccine to vaccination.influenza_vaccination #> the input data set does not have a abx_14d_prior column (or column set) #> the input data set does not have a antibiotic_used column (or column set) #> the input data set does not have a antiplatelets column (or column set) #> the input data set does not have a anticoagulants column (or column set) #> the input data set does not have a statins column (or column set) #> the input data set does not have a hypertensives column (or column set) #> the input data set does not have a antiviral_14d_prior column (or column set) #> Mapped 238 columns #> Did not map 8 columns"},{"path":"/articles/web/avoncap.html","id":"mapping-columns","dir":"Articles > Web","previous_headings":"","what":"Mapping columns","title":"Getting started","text":"","code":"# Successfully mapped columns # attr(normData,\"mapped\")  # Columns that are present in the normData but not mapped attr(normData,\"unmapped\") #> [1] \".spec_other_resp\"    \".spec_other_cardiac\" \".batch_code1\"        #> [4] \".batch_code2\"        \".c19_compother\"      \".batch_code3\"        #> [7] \".batch_code4\"        \".batch_code5\"  # Columns not present in the normData for which mapping rules were supplied attr(normData,\"missing\") #>  [1] \"consent_urine\"              \"consent_blood\"              #>  [3] \"consent_resp_samples1\"      \"what_was_the_first_surveil\" #>  [5] \"admission_type\"             \"gp_practice\"                #>  [7] \"gp_practice_drop_down\"      \"hapcovid_screening\"         #>  [9] \"hospital_covid\"             \"np_swab\"                    #> [11] \"adm_np_type\"                \"np_date\"                    #> [13] \"days_adm_npswab\"            \"np_swab_2\"                  #> [15] \"adm_np_type_2\"              \"np_date_2\"                  #> [17] \"np_swab_3\"                  \"adm_np_type_3\"              #> [19] \"np_date_3\"                  \"saliva\"                     #> [21] \"saliva_date\"                \"days_adm_saliva\"            #> [23] \"sputum\"                     \"sputum_date\"                #> [25] \"days_adm_sputum\"            \"pt_ad_ur\"                   #> [27] \"adm_ur_taken\"               \"nourine_reason\"             #> [29] \"adm_np_type_2\"              \"adm_ur_date\"                #> [31] \"days_adm_urine\"             \"adm_serum_tak\"              #> [33] \"adm_seru_date\"              \"days_adm_serum\"             #> [35] \"adm_diagnosis\"              \"survive_1yr\"                #> [37] \"survival_1yr_days\"          \"yr_survival_complete\"       #> [39] \"confusion\"                  \"abx_14d_prior\"              #> [41] \"antibiotic_used\"            \"antiplatelets\"              #> [43] \"anticoagulants\"             \"statins\"                    #> [45] \"hypertensives\"              \"antiviral_14d_prior\""},{"path":"/articles/web/avoncap.html","id":"original-field-names-and-labels-","dir":"Articles > Web","previous_headings":"","what":"Original field names, and labels.","title":"Getting started","text":"","code":"# devtools::load_all()  # generate a set of readable label mappings from column to printable name for the whole normData set # overriding a particular label # readable_label_mapping(normData, demog.age=\"TEST\")  # Map a single column name as a string to a readable label readable_label(\"comorbid.previous_MI\") #> [1] \"Previous MI\"  # get mapping from original field names pre-normalisation to # post normalisation fields original_field_names(normData) #>                                              consented  #>                                      \"admin.consented\"  #>                                                    ppc  #>                                   \"admin.pp_consented\"  #>                                             withdrawal  #>                                     \"admin.withdrawal\"  #>                                          record_number  #>                                  \"admin.record_number\"  #>                                        ac_study_number  #>                        \"admin.consented_record_number\"  #>                                             nhs_number  #>                             \"admin.patient_identifier\"  #>                                              duplicate  #>                                      \"admin.duplicate\"  #>                                        enrollment_date  #>                                \"admin.enrollment_date\"  #>                                             study_year  #>                                     \"admin.study_year\"  #>                                                   file  #>                                      \"admin.data_file\"  #>                                            week_number  #>                                    \"admin.week_number\"  #>                                          c19_diagnosis  #>           \"diagnosis.standard_of_care_COVID_diagnosis\"  #>                               clinical_radio_diagnosis  #> \"diagnosis.clinical_or_radiological_LRTI_or_pneumonia\"  #>                                           c19_adm_swab  #>                             \"diagnosis.admission_swab\"  #>                                          c19_test_type  #>                                  \"diagnosis.test_type\"  #>                              qualifying_symptoms_signs  #>                  \"diagnosis.qualifying_symptoms_signs\"  #>                                           cc_critieria  #>                \"diagnosis.meets_case_control_criteria\"  #>                                            cc_pos_date  #>             \"diagnosis.first_COVID_positive_swab_date\"  #>                                                 gender  #>                                         \"demog.gender\"  #>                                       age_at_admission  #>                                            \"demog.age\"  #>                                              age_march  #>                              \"demog.age_in_march_2021\"  #>                                                    imd  #>                                     \"demog.imd_decile\"  #>                                                smoking  #>                                         \"demog.smoker\"  #>                                             ethnicity2  #>                                      \"demog.ethnicity\"  #>                                              care_home  #>                             \"demog.care_home_resident\"  #>                                              drugs___1  #>                                  \"demog.no_drug_abuse\"  #>                                              drugs___2  #>                                  \"demog.alcohol_abuse\"  #>                                              drugs___3  #>                                     \"demog.ivdu_abuse\"  #>                                              drugs___4  #>                                \"demog.marijuana_abuse\"  #>                                              drugs___5  #>                       \"demog.other_inhaled_drug_abuse\"  #>                                                 vaping  #>                                         \"demog.vaping\"  #>                                              alc_units  #>                               \"demog.units_of_alcohol\"  #>                                       contraindication  #>            \"vaccination.covid_vaccine_contraindicated\"  #>                                            covid19_vax  #>                        \"vaccination.covid_vaccination\"  #>                                          covidvax_date  #>                          \"vaccination.first_dose_date\"  #>                                        covidvax_dose_2  #>                         \"vaccination.second_dose_date\"  #>                                        covidvax_dose_3  #>                          \"vaccination.third_dose_date\"  #>                                        covidvax_dose_4  #>                         \"vaccination.fourth_dose_date\"  #>                                        covidvax_dose_5  #>                          \"vaccination.fifth_dose_date\"  #>                                        covidvax_dose_6  #>                          \"vaccination.sixth_dose_date\"  #>                             brand_of_covid19_vaccinati  #>                         \"vaccination.first_dose_brand\"  #>                                     covid19vax_brand_2  #>                        \"vaccination.second_dose_brand\"  #>                                     covid19vax_brand_3  #>                         \"vaccination.third_dose_brand\"  #>                                     covid19vax_brand_4  #>                        \"vaccination.fourth_dose_brand\"  #>                                     covid19vax_brand_5  #>                         \"vaccination.fifth_dose_brand\"  #>                                     covid19vax_brand_6  #>                         \"vaccination.sixth_dose_brand\"  #>                                           c19vaxd1_adm  #>              \"admission.time_since_first_vaccine_dose\"  #>                                           c19vaxd2_adm  #>             \"admission.time_since_second_vaccine_dose\"  #>                                           c19vaxd3_adm  #>              \"admission.time_since_third_vaccine_dose\"  #>                                           c19vaxd4_adm  #>             \"admission.time_since_fourth_vaccine_dose\"  #>                                            c19vax5_adm  #>              \"admission.time_since_fifth_vaccine_dose\"  #>                                            c19vax6_adm  #>              \"admission.time_since_sixth_vaccine_dose\"  #>                                               flu_date  #>                       \"vaccination.last_flu_dose_date\"  #>                                          fluvax_adm_d1  #>           \"admission.time_since_last_flu_vaccine_dose\"  #>                                             ppv23_date  #>              \"vaccination.last_pneumococcal_dose_date\"  #>                                         ppv23vax_adm_d  #>  \"admission.time_since_last_pneumococcal_vaccine_dose\"  #>                                            c19_variant  #>                                      \"genomic.variant\"  #>                                                   year  #>                                       \"admission.year\"  #>                                             study_week  #>                                 \"admission.study_week\"  #>                                         admission_date  #>                                       \"admission.date\"  #>                                               hospital  #>                                       \"admin.hospital\"  #>                                                    ics  #>                 \"admission.on_inhaled_corticosteroids\"  #>                                                 immsup  #>                       \"admission.on_immunosuppression\"  #>                                              psi_class  #>             \"admission.pneumonia_severity_index_class\"  #>                                           crb_test_mai  #>                     \"admission.curb_65_severity_score\"  #>                                           news_2_total  #>                                \"admission.news2_score\"  #>                                               pulse_ox  #>                                   \"admission.oximetry\"  #>                                                     rr  #>                           \"admission.respiratory_rate\"  #>                                                   fio2  #>                                 \"admission.max_oxygen\"  #>                                            systolic_bp  #>                                \"admission.systolic_bp\"  #>                                           diastolic_bp  #>                               \"admission.diastolic_bp\"  #>                                                     hr  #>                                 \"admission.heart_rate\"  #>                                            temperature  #>                                \"admission.temperature\"  #>                                  symptom_days_preadmit  #>                          \"admission.duration_symptoms\"  #>                                     previous_infection  #>                   \"admission.previous_covid_infection\"  #>                                 previousinfection_date  #>              \"admission.previous_covid_infection_date\"  #>                                            c19d_preadm  #>                 \"admission.time_since_covid_diagnosis\"  #>                                               rockwood  #>                             \"admission.rockwood_score\"  #>                                        cci_total_score  #>                 \"admission.charlson_comorbidity_index\"  #>                                                 height  #>                                     \"admission.height\"  #>                                                 weight  #>                                     \"admission.weight\"  #>                                                    bmi  #>                                        \"admission.BMI\"  #>                                        first_radio___1  #>                                 \"admission.cxr_normal\"  #>                                        first_radio___2  #>                              \"admission.cxr_pneumonia\"  #>                                        first_radio___3  #>                          \"admission.cxr_heart_failure\"  #>                                        first_radio___4  #>                       \"admission.cxr_pleural_effusion\"  #>                                        first_radio___5  #>                          \"admission.cxr_covid_changes\"  #>                                        first_radio___6  #>                                  \"admission.cxr_other\"  #>                                               c19_peep  #>                                       \"day_7.max_peep\"  #>                                            c19_hospadm  #>                                 \"day_7.length_of_stay\"  #>                                               c17_high  #>                                 \"day_7.max_care_level\"  #>                                               c19icuon  #>                                   \"day_7.still_on_icu\"  #>                                            c19_icudays  #>                             \"day_7.icu_length_of_stay\"  #>                                               c19_vent  #>                          \"day_7.max_ventilation_level\"  #>                                                 c19_ox  #>                                   \"day_7.max_o2_level\"  #>                                         c19_ionotropes  #>                              \"day_7.ionotropes_needed\"  #>                                   c19_complication___1  #>                                             \"day_7.PE\"  #>                                   c19_complication___2  #>                                            \"day_7.DVT\"  #>                                   c19_complication___3  #>                                            \"day_7.ARF\"  #>                                   c19_complication___4  #>                                         \"day_7.NSTEMI\"  #>                                   c19_complication___5  #>                                          \"day_7.STEMI\"  #>                                   c19_complication___6  #>                                \"day_7.cardiac_failure\"  #>                                   c19_complication___7  #>                                         \"day_7.new_AF\"  #>                                   c19_complication___8  #>                            \"day_7.new_other_arrythmia\"  #>                                   c19_complication___9  #>                                 \"day_7.inpatient_fall\"  #>                                  c19_complication___10  #>                             \"day_7.other_complication\"  #>                                  c19_complication___11  #>                                \"day_7.no_complication\"  #>                                            c19_death7d  #>                                          \"day_7.death\"  #>                                           c19_meds___1  #>                              \"treatment.dexamethasone\"  #>                                           c19_meds___2  #>                                 \"treatment.remdesevir\"  #>                                           c19_meds___3  #>                                \"treatment.tocilizumab\"  #>                                           c19_meds___4  #>                                  \"treatment.sarilumab\"  #>                                           c19_meds___5  #>                              \"treatment.in_drug_trial\"  #>                                           c19_meds___6  #>                          \"treatment.no_drug_treatment\"  #>                                           c19_meds___7  #>                                 \"treatment.sotrovimab\"  #>                                hospital_length_of_stay  #>                               \"outcome.length_of_stay\"  #>                                          survival_days  #>                            \"outcome.survival_duration\"  #>                                               ip_death  #>                              \"outcome.inpatient_death\"  #>                                            days_in_icu  #>                                 \"outcome.icu_duration\"  #>                             did_the_patient_have_respi  #>                   \"outcome.respiratory_support_needed\"  #>                             number_of_days_of_ventilat  #>                          \"outcome.ventilator_duration\"  #>                                               ett_days  #>                   \"outcome.endotracheal_tube_duration\"  #>                              renal_replacement_therapy  #>                       \"outcome.renal_support_duration\"  #>                                      complications___1  #>                          \"outcome.acute_renal_failure\"  #>                                      complications___2  #>                            \"outcome.liver_dysfunction\"  #>                                      complications___3  #>                  \"outcome.hospital_acquired_infection\"  #>                                      complications___4  #>          \"outcome.acute_respiratory_distress_syndrome\"  #>                                      complications___5  #>                                       \"outcome.NSTEMI\"  #>                                      complications___6  #>                                        \"outcome.STEMI\"  #>                                      complications___7  #>                                       \"outcome.new_AF\"  #>                                      complications___8  #>                          \"outcome.new_other_arrhthmia\"  #>                                      complications___9  #>                                       \"outcome.stroke\"  #>                                     complications___10  #>                                          \"outcome.DVT\"  #>                                     complications___11  #>                                           \"outcome.PE\"  #>                                     complications___12  #>                                \"outcome.heart_failure\"  #>                                     complications___13  #>                             \"outcome.fall_in_hospital\"  #>                                     complications___14  #>                             \"outcome.reduced_mobility\"  #>                                     complications___15  #>                  \"outcome.increasing_care_requirement\"  #>                                     complications___16  #>                             \"outcome.no_complications\"  #>                                    ventilatory_support  #>            \"outcome.highest_level_ventilatory_support\"  #>                             did_the_patient_receive_ec  #>                                \"outcome.received_ecmo\"  #>                             inotropic_support_required  #>                          \"outcome.received_ionotropes\"  #>                                       lrtd_30d_outcome  #>                            \"outcome.functional_status\"  #>                                                 fever2  #>                         \"symptom.abnormal_temperature\"  #>                                            pleurtic_cp  #>                         \"symptom.pleuritic_chest_pain\"  #>                                                 cough2  #>                                        \"symptom.cough\"  #>                                              sput_prod  #>                            \"symptom.productive_sputum\"  #>                                               dyspnoea  #>                                     \"symptom.dyspnoea\"  #>                                            tachypnoea2  #>                                   \"symptom.tachypnoea\"  #>                                                anosmia  #>                                      \"symptom.anosmia\"  #>                                                ageusia  #>                                      \"symptom.ageusia\"  #>                                              dysgeusia  #>                                    \"symptom.dysguesia\"  #>                                                  fever  #>                                        \"symptom.fever\"  #>                                            hypothermia  #>                                  \"symptom.hypothermia\"  #>                                                 chills  #>                                       \"symptom.chills\"  #>                                               headache  #>                                     \"symptom.headache\"  #>                                                malaise  #>                                      \"symptom.malaise\"  #>                                                 wheeze  #>                                       \"symptom.wheeze\"  #>                                                myalgia  #>                                      \"symptom.myalgia\"  #>                                        worse_confusion  #>                          \"symptom.worsening_confusion\"  #>                                            general_det  #>                        \"symptom.general_deterioration\"  #>                                        ox_on_admission  #>                 \"symptom.oxygen_required_on_admission\"  #>                                       resp_disease___1  #>                                  \"comorbid.no_resp_dx\"  #>                                       resp_disease___2  #>                                        \"comorbid.copd\"  #>                                       resp_disease___3  #>                                      \"comorbid.asthma\"  #>                                       resp_disease___4  #>                                  \"comorbid.resp_other\"  #>                          other_respiratory_disease___1  #>                              \"comorbid.bronchiectasis\"  #>                          other_respiratory_disease___2  #>                        \"comorbid.interstitial_lung_dx\"  #>                          other_respiratory_disease___3  #>                             \"comorbid.cystic_fibrosis\"  #>                          other_respiratory_disease___4  #>                      \"comorbid.pulmonary_hypertension\"  #>                          other_respiratory_disease___5  #>                          \"comorbid.chronic_pleural_dx\"  #>                          other_respiratory_disease___6  #>                       \"comorbid.other_chronic_resp_dx\"  #>                                                chd___1  #>                                 \"comorbid.no_heart_dx\"  #>                                                chd___2  #>                                         \"comorbid.ccf\"  #>                                                chd___3  #>                                         \"comorbid.ihd\"  #>                                                chd___4  #>                                \"comorbid.hypertension\"  #>                                                chd___5  #>                              \"comorbid.other_heart_dx\"  #>                                                     mi  #>                                 \"comorbid.previous_mi\"  #>                                          other_chd___1  #>                         \"comorbid.congenital_heart_dx\"  #>                                          other_chd___2  #>                                          \"comorbid.af\"  #>                                          other_chd___3  #>                             \"comorbid.other_arrythmia\"  #>                                          other_chd___4  #>                                   \"comorbid.pacemaker\"  #>                                          other_chd___5  #>                           \"comorbid.valvular_heart_dx\"  #>                                          other_chd___6  #>                        \"comorbid.other_other_heart_dx\"  #>                                               diabetes  #>                                    \"comorbid.diabetes\"  #>                                                dm_meds  #>                        \"comorbid.diabetes_medications\"  #>                               neurological_disease___1  #>                                 \"comorbid.neuro_other\"  #>                               neurological_disease___2  #>                                         \"comorbid.cva\"  #>                               neurological_disease___3  #>                                         \"comorbid.tia\"  #>                               neurological_disease___4  #>                                  \"comorbid.hemiplegia\"  #>                               neurological_disease___5  #>                                  \"comorbid.paraplegia\"  #>                               neurological_disease___6  #>                                 \"comorbid.no_neuro_dx\"  #>                                           dementia___1  #>                                 \"comorbid.no_dementia\"  #>                                           dementia___2  #>                                    \"comorbid.dementia\"  #>                                           dementia___3  #>                        \"comorbid.cognitive_impairment\"  #>                                                 cancer  #>                                \"comorbid.solid_cancer\"  #>                                         haem_malig___1  #>                    \"comorbid.no_haemotological_cancer\"  #>                                         haem_malig___2  #>                                   \"comorbid.leukaemia\"  #>                                         haem_malig___3  #>                                    \"comorbid.lymphoma\"  #>                                                    ckd  #>                                         \"comorbid.ckd\"  #>                                          liver_disease  #>                               \"comorbid.liver_disease\"  #>                                         gastric_ulcers  #>                              \"comorbid.gastric_ulcers\"  #>                                                    pvd  #>                              \"comorbid.periph_vasc_dx\"  #>                                                    ctd  #>                        \"comorbid.connective_tissue_dx\"  #>                                       immunodeficiency  #>                            \"comorbid.immunodeficiency\"  #>                                       other_pn_disease  #>                    \"comorbid.other_pneumococcal_risks\"  #>                                             transplant  #>                        \"comorbid.transplant_recipient\"  #>                                              pregnancy  #>                                   \"comorbid.pregnancy\"  #>                                                hiv___1  #>                                      \"comorbid.no_HIV\"  #>                                                hiv___2  #>                                         \"comorbid.HIV\"  #>                                                hiv___3  #>                                        \"comorbid.AIDS\"  #>                           final_soc_lrtd_diagnosis___1  #>           \"diagnosis.SOC_CAP_radiologically_confirmed\"  #>                           final_soc_lrtd_diagnosis___2  #>               \"diagnosis.SOC_CAP_clinically_confirmed\"  #>                           final_soc_lrtd_diagnosis___3  #>                       \"diagnosis.SOC_CAP_no_radiology\"  #>                           final_soc_lrtd_diagnosis___4  #>                                   \"diagnosis.SOC_LRTI\"  #>                           final_soc_lrtd_diagnosis___5  #>                     \"diagnosis.SOC_Empyema_or_abscess\"  #>                           final_soc_lrtd_diagnosis___6  #>                      \"diagnosis.SOC_exacerbation_COPD\"  #>                           final_soc_lrtd_diagnosis___7  #>                  \"diagnosis.SOC_exacerbation_non_COPD\"  #>                           final_soc_lrtd_diagnosis___8  #>               \"diagnosis.SOC_congestive_heart_failure\"  #>                           final_soc_lrtd_diagnosis___9  #>                 \"diagnosis.SOC_non_infectious_process\"  #>                          final_soc_lrtd_diagnosis___10  #>                               \"diagnosis.SOC_non_LRTI\"  #>                                     covid_19_diagnosis  #>                         \"diagnosis.covid_19_diagnosis\"  #>                                                  ppv23  #>                                \"vaccination.pneumovax\"  #>                                            flu_vaccine  #>                    \"vaccination.influenza_vaccination\" # unname(readable_label_mapping(normData))"},{"path":"/articles/web/avoncap.html","id":"augmenting-the-ve-extract-data","dir":"Articles > Web","previous_headings":"","what":"Augmenting the VE extract data","title":"Getting started","text":"","code":"# devtools::load_all() augData = normData %>% avoncap::augment_data() #> Augmenting data using: augment.nhs_extract.deltave #> caching item: ~/.cache/avoncap/augment-4c0c0c577381837fb7b8ee36b440288a-d981ec047773880ae6d2795d43fa2887.rda #> Created demog.age_category, demog.age_eligible, admission.cci_category, admission.cci_category_alternate, admission.rockwood_category, admission.curb_65_category using: demog.age, admission.charlson_comorbidity_index, admission.rockwood_score, admission.curb_65_severity_score #> Created admission.episode, admission.interval using: admin.patient_identifier, admission.date #> Created comorbid.diabetes_type, comorbid.solid_cancer_present, comorbid.haemotological_cancer_present, comorbid.any_cancer_present, comorbid.any_chronic_lung_disease, comorbid.any_chronic_heart_disease, comorbid.cva_or_tia, comorbid.any_immune_compromise using: comorbid.diabetes, comorbid.solid_cancer, comorbid.leukaemia, comorbid.lymphoma, comorbid.no_haemotological_cancer, comorbid.asthma, comorbid.bronchiectasis, comorbid.chronic_pleural_dx, comorbid.copd, comorbid.interstitial_lung_dx, comorbid.cystic_fibrosis, comorbid.other_chronic_resp_dx, comorbid.pulmonary_hypertension, comorbid.ccf, comorbid.ihd, comorbid.previous_mi, comorbid.congenital_heart_dx, comorbid.hypertension, comorbid.af, comorbid.other_arrythmia, comorbid.other_heart_dx, comorbid.other_other_heart_dx, comorbid.cva, comorbid.tia, comorbid.immunodeficiency, admission.on_immunosuppression #> Created admission.covid_pcr_result, admission.is_covid using: diagnosis.covid_19_diagnosis, diagnosis.admission_swab, diagnosis.test_type #> Created diagnosis.pneumonia, diagnosis.LRTI, diagnosis.exacerbation_of_chronic_respiratory_disease, diagnosis.heart_failure using: diagnosis.SOC_CAP_clinically_confirmed, diagnosis.SOC_CAP_radiologically_confirmed, diagnosis.SOC_CAP_no_radiology, diagnosis.SOC_Empyema_or_abscess, admission.cxr_pneumonia, diagnosis.SOC_LRTI, diagnosis.SOC_exacerbation_COPD, diagnosis.SOC_exacerbation_non_COPD, diagnosis.SOC_congestive_heart_failure #> Created admission.infective_cause using: diagnosis.SOC_non_infectious_process, diagnosis.SOC_non_LRTI #> Created admission.category, admission.presentation_3_class using: #> Created diagnosis.infection_context using: diagnosis.first_COVID_positive_swab_date, admission.date #> Created genomic.variant_inferred using: genomic.variant, admission.date #> Created symptom_onset.date_of_symptoms, symptom_onset.time_of_symptoms_since_first_vaccine_dose, symptom_onset.time_of_symptoms_since_second_vaccine_dose, symptom_onset.time_of_symptoms_since_third_vaccine_dose, symptom_onset.time_of_symptoms_since_fourth_vaccine_dose, vaccination.dose_interval, vaccination.booster_interval, vaccination.second_booster_interval using: admission.date, admission.duration_symptoms, admission.time_since_first_vaccine_dose, admission.time_since_second_vaccine_dose, admission.time_since_third_vaccine_dose, admission.time_since_fourth_vaccine_dose #> Created vaccination.protection using: vaccination.covid_vaccination, admission.time_since_fourth_vaccine_dose, admission.duration_symptoms, admission.time_since_third_vaccine_dose, admission.time_since_second_vaccine_dose, admission.time_since_first_vaccine_dose, admission.previous_covid_infection #> Created vaccination.vaccination using: vaccination.covid_vaccination, admission.time_since_sixth_vaccine_dose, admission.duration_symptoms, admission.time_since_fifth_vaccine_dose, admission.time_since_fourth_vaccine_dose, admission.time_since_third_vaccine_dose, admission.time_since_second_vaccine_dose, admission.time_since_first_vaccine_dose #> Created vaccination.brand_combination using: vaccination.first_dose_brand, vaccination.second_dose_brand, vaccination.third_dose_brand #> Created admission.pneumococcal_high_risk using: demog.age, comorbid.other_pneumococcal_risks, comorbid.copd, comorbid.interstitial_lung_dx, comorbid.cystic_fibrosis, comorbid.hypertension, comorbid.ccf, comorbid.ihd, comorbid.ckd, comorbid.liver_disease, comorbid.diabetes, comorbid.immunodeficiency, comorbid.asthma, admission.on_immunosuppression #> Created admission.pneumococcal_risk_classification using: comorbid.cva, comorbid.immunodeficiency, comorbid.leukaemia, comorbid.lymphoma, comorbid.no_haemotological_cancer, admission.on_immunosuppression, comorbid.transplant_recipient, comorbid.ckd, comorbid.HIV, comorbid.solid_cancer, demog.care_home_resident, demog.smoker, demog.age, demog.alcohol_abuse, comorbid.diabetes, comorbid.diabetes_medications, comorbid.paraplegia, comorbid.copd, comorbid.interstitial_lung_dx, comorbid.cystic_fibrosis, comorbid.asthma, comorbid.liver_disease, comorbid.ccf, comorbid.ihd, comorbid.other_pneumococcal_risks #> Created day_7.WHO_clinical_progression, outcome.WHO_clinical_progression using: day_7.death, day_7.max_ventilation_level, day_7.ionotropes_needed, day_7.max_o2_level, outcome.survival_duration, outcome.functional_status, outcome.highest_level_ventilatory_support, outcome.received_ionotropes, outcome.respiratory_support_needed #> Skipping function due to error: In argument: `outcome.death_within_1_year = `%>%`(...)`. #> Created day_7.max_o2_gt_28, day_7.max_o2_gt_35, day_7.max_o2_gt_50, day_7.WHO_score_gt_6, day_7.WHO_score_gt_5, day_7.los_gt_3, day_7.los_gt_5, day_7.los_gt_7 using: day_7.max_o2_level, day_7.length_of_stay, outcome.survival_duration"},{"path":"/articles/web/avoncap.html","id":"loading-and-normalising-the-central-database","dir":"Articles > Web","previous_headings":"","what":"loading and normalising the central database","title":"Getting started","text":"","code":"rawData2 = avoncap::load_data(\"avoncap-export\",\"central\", merge=TRUE) #> using cached item: ~/.cache/avoncap/data-6c0a3f301ee14020e3907a7472c55225-d3d605f1b753e8667f640743669191d4.rda # without merge: currently: INCONSISTENT COLUMN(S) IN FILES: sars_cov2_antigen # due to the fact it is mostly a numeric but some values \">250\"  # devtools::load_all()  failures = rawData2 %>% avoncap::validate_data()  %>% avoncap::write_issues(\"~/avoncap-issues\") #> validate data using: validate.avoncap_export.central #> non-finite value in consented in 7 rows #> non-finite value in ppc in 7 rows #> non-finite value in include_patient in 9 rows #> non-finite value in hosp in 14 rows #> non-finite value in withdrawal in 51 rows #> missing value in systolic_bp in 1 rows #> missing value in diastolic_bp in 1 rows #> missing value in imd in 456 rows #> missing value in hypertensives in 8 rows #> missing value in statins in 8 rows #> missing value in anticoagulants in 8 rows #> missing value in antiplatelets in 8 rows #> missing columns: ethnicity in 1 rows #> non-finite value in news_2_total in 29 rows #> non-finite value in care_home in 1 rows #> non-finite value in ckd in 2 rows #> non-finite value in liver_disease in 3 rows #> non-finite value in diabetes in 2 rows #> non-finite value in gastric_ulcers in 3 rows #> non-finite value in pvd in 2 rows #> non-finite value in ctd in 2 rows #> non-finite value in immunodeficiency in 2 rows #> non-finite value in other_pn_disease in 4 rows #> non-finite value in cancer in 1 rows #> non-finite value in transplant in 3 rows #> non-finite value in hospital_length_of_stay in 2 rows #> non-finite value in covid_19_diagnosis in 1 rows #> non-finite value in lrtd_30d_outcome in 2 rows #> non-finite value in week_number in 911 rows #> non-finite value in highest_level_care_require in 1 rows #> non-finite value in ventilatory_support in 2 rows #> non-finite value in psi_class in 1 rows #> non-finite value in fever2 in 2 rows #> non-finite value in gp_practice_drop_down in 128 rows #> missing value in final_soc_lrtd_diagnosis in 1 rows #> both pneumonia and NP-LRTI in final SOC dx in 6 rows #> 30 day and 1 yr survival duration different in 1 rows #> length of stay > 30 day survival duration in 7 rows #> length of stay > 1 yr survival duration in 31 rows #> marked as died lrtd_30d_outcome but survival_days > 30 days in 3 rows #> non-finite value in dm_meds in 68 rows #> non-finite value in current in 4 rows #> non-finite value in pregnancy in 5 rows #> using cached item: ~/.cache/avoncap/data-6c0a3f301ee14020e3907a7472c55225-7498859e4eaf9f364dc024b6ee4039c2.rda  normData2 = rawData2 %>% avoncap::normalise_data() #> Normalising data using: normalise.avoncap_export.central #> using cached item: ~/.cache/avoncap/data-6c0a3f301ee14020e3907a7472c55225-767899bd2d292ad780aeb94b72046017.rda #> Admission date is derived from study week and hence approximate. #> Some columns expected in the mappings were not present: nhs_number, np_swab_3, adm_np_type_3, covidvax_date, covidvax_dose_2, covidvax_dose_3, covidvax_dose_4, covidvax_dose_5, covidvax_dose_6, flu_date, ppv23_date, previousinfection_date #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-4f99cf58ecb2f420c40b2a44fb58478d.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .what_was_the_first_surveil to admin.first_record_number #> mapping .ac_study_number to admin.consented_record_number #> the input data set does not have a nhs_number column (or column set) #> mapping .duplicate to admin.duplicate #> mapping .enrollment_date to admin.enrollment_date #> mapping .admission_type to admission.admission_route #> mapping .study_year to admin.study_year #> mapping .file to admin.data_file #> mapping .week_number to admin.week_number #> mapping .c19_diagnosis to diagnosis.standard_of_care_COVID_diagnosis #> mapping .clinical_radio_diagnosis to diagnosis.clinical_or_radiological_LRTI_or_pneumonia #> mapping .c19_adm_swab to diagnosis.admission_swab #> mapping .c19_test_type to diagnosis.test_type #> mapping .qualifying_symptoms_signs to diagnosis.qualifying_symptoms_signs #> mapping .cc_critieria to diagnosis.meets_case_control_criteria #> mapping .cc_pos_date to diagnosis.first_COVID_positive_swab_date #> mapping .gender to demog.gender #> mapping .age_at_admission to demog.age #> mapping .age_march to demog.age_in_march_2021 #> mapping .imd to demog.imd_decile #> mapping .gp_practice to admin.gp_practice_old #> mapping .gp_practice_drop_down to admin.gp_practice #> mapping .smoking to demog.smoker #> mapping .ethnicity2 to demog.ethnicity #> mapping .care_home to demog.care_home_resident #> mapping .hapcovid_screening to admission.non_lrtd_hospital_acquired_covid #> mapping .hospital_covid to admission.hospital_acquired_covid #> mapping .drugs___1 to demog.no_drug_abuse #> mapping .drugs___2 to demog.alcohol_abuse #> mapping .drugs___3 to demog.ivdu_abuse #> mapping .drugs___4 to demog.marijuana_abuse #> mapping .drugs___5 to demog.other_inhaled_drug_abuse #> mapping .vaping to demog.vaping #> mapping .alc_units to demog.units_of_alcohol #> mapping .np_swab to admin.np_swab_taken_1 #> mapping .adm_np_type to admin.np_swab_site_1 #> mapping .np_date to admin.np_swab_date_1 #> mapping .days_adm_npswab to admin.np_swab_day_since_admission #> mapping .np_swab_2 to admin.np_swab_taken_2 #> mapping .adm_np_type_2 to admin.np_swab_site_2 #> mapping .np_date_2 to admin.np_swab_date_2 #> the input data set does not have a np_swab_3 column (or column set) #> the input data set does not have a adm_np_type_3 column (or column set) #> mapping .np_date_3 to admin.np_swab_date_3 #> mapping .saliva to admin.saliva_sample_taken #> mapping .saliva_date to admin.saliva_sample_date #> mapping .days_adm_saliva to admin.saliva_sample_day_since_admission #> mapping .sputum to admin.sputum_sample_taken #> mapping .sputum_date to admin.sputum_sample_date #> mapping .days_adm_sputum to admin.sputum_sample_day_since_admission #> mapping .pt_ad_ur to admin.urine_sample_needed #> mapping .adm_ur_taken to admin.urine_sample_taken #> mapping .nourine_reason to admin.urine_sample_failure_reason #> the input data set does not have a adm_np_type_2 column (or column set) #> mapping .adm_ur_date to admin.urine_sample_date #> mapping .days_adm_urine to admin.urine_sample_day_since_admission #> mapping .adm_serum_tak to admin.serum_sample_taken #> mapping .adm_seru_date to admin.serum_sample_date #> mapping .days_adm_serum to admin.serum_sample_day_since_admission #> mapping .contraindication to vaccination.covid_vaccine_contraindicated #> mapping .covid19_vax to vaccination.covid_vaccination #> the input data set does not have a covidvax_date column (or column set) #> the input data set does not have a covidvax_dose_2 column (or column set) #> the input data set does not have a covidvax_dose_3 column (or column set) #> the input data set does not have a covidvax_dose_4 column (or column set) #> the input data set does not have a covidvax_dose_5 column (or column set) #> the input data set does not have a covidvax_dose_6 column (or column set) #> mapping .brand_of_covid19_vaccinati to vaccination.first_dose_brand #> mapping .covid19vax_brand_2 to vaccination.second_dose_brand #> mapping .covid19vax_brand_3 to vaccination.third_dose_brand #> mapping .covid19vax_brand_4 to vaccination.fourth_dose_brand #> mapping .covid19vax_brand_5 to vaccination.fifth_dose_brand #> mapping .covid19vax_brand_6 to vaccination.sixth_dose_brand #> mapping .c19vaxd1_adm to admission.time_since_first_vaccine_dose #> mapping .c19vaxd2_adm to admission.time_since_second_vaccine_dose #> mapping .c19vaxd3_adm to admission.time_since_third_vaccine_dose #> mapping .c19vaxd4_adm to admission.time_since_fourth_vaccine_dose #> mapping .c19vax5_adm to admission.time_since_fifth_vaccine_dose #> mapping .c19vax6_adm to admission.time_since_sixth_vaccine_dose #> the input data set does not have a flu_date column (or column set) #> mapping .fluvax_adm_d1 to admission.time_since_last_flu_vaccine_dose #> the input data set does not have a ppv23_date column (or column set) #> mapping .ppv23vax_adm_d to admission.time_since_last_pneumococcal_vaccine_dose #> mapping .c19_variant to genomic.variant #> mapping .year to admission.year #> mapping .study_week to admission.study_week #> mapping .admission_date to admission.date #> mapping .hospital to admin.hospital #> mapping .adm_diagnosis___1 to admission.presumed_CAP_radiologically_confirmed #> mapping .adm_diagnosis___2 to admission.presumed_CAP_clinically_confirmed #> mapping .adm_diagnosis___3 to admission.presumed_CAP_no_radiology #> mapping .adm_diagnosis___4 to admission.presumed_LRTI #> mapping .adm_diagnosis___5 to admission.presumed_Empyema_or_abscess #> mapping .adm_diagnosis___6 to admission.presumed_exacerbation_COPD #> mapping .adm_diagnosis___7 to admission.presumed_exacerbation_non_COPD #> mapping .adm_diagnosis___8 to admission.presumed_congestive_heart_failure #> mapping .adm_diagnosis___9 to admission.presumed_non_infectious_process #> mapping .adm_diagnosis___10 to admission.presumed_non_LRTI #> mapping .ics to admission.on_inhaled_corticosteroids #> mapping .immsup to admission.on_immunosuppression #> mapping .psi_class to admission.pneumonia_severity_index_class #> mapping .crb_test_mai to admission.curb_65_severity_score #> mapping .news_2_total to admission.news2_score #> mapping .pulse_ox to admission.oximetry #> mapping .rr to admission.respiratory_rate #> mapping .fio2 to admission.max_oxygen #> mapping .systolic_bp to admission.systolic_bp #> mapping .diastolic_bp to admission.diastolic_bp #> mapping .hr to admission.heart_rate #> mapping .temperature to admission.temperature #> mapping .symptom_days_preadmit to admission.duration_symptoms #> mapping .previous_infection to admission.previous_covid_infection #> the input data set does not have a previousinfection_date column (or column set) #> mapping .c19d_preadm to admission.time_since_covid_diagnosis #> mapping .rockwood to admission.rockwood_score #> mapping .cci_total_score to admission.charlson_comorbidity_index #> mapping .height to admission.height #> mapping .weight to admission.weight #> mapping .bmi to admission.BMI #> mapping .first_radio___1 to admission.cxr_normal #> mapping .first_radio___2 to admission.cxr_pneumonia #> mapping .first_radio___3 to admission.cxr_heart_failure #> mapping .first_radio___4 to admission.cxr_pleural_effusion #> mapping .first_radio___5 to admission.cxr_covid_changes #> mapping .first_radio___6 to admission.cxr_other #> mapping .c19_peep to day_7.max_peep #> mapping .c19_hospadm to day_7.length_of_stay #> mapping .c17_high to day_7.max_care_level #> mapping .c19icuon to day_7.still_on_icu #> mapping .c19_icudays to day_7.icu_length_of_stay #> mapping .c19_vent to day_7.max_ventilation_level #> mapping .c19_ox to day_7.max_o2_level #> mapping .c19_ionotropes to day_7.ionotropes_needed #> mapping .c19_complication___1 to day_7.PE #> mapping .c19_complication___2 to day_7.DVT #> mapping .c19_complication___3 to day_7.ARF #> mapping .c19_complication___4 to day_7.NSTEMI #> mapping .c19_complication___5 to day_7.STEMI #> mapping .c19_complication___6 to day_7.cardiac_failure #> mapping .c19_complication___7 to day_7.new_AF #> mapping .c19_complication___8 to day_7.new_other_arrythmia #> mapping .c19_complication___9 to day_7.inpatient_fall #> mapping .c19_complication___10 to day_7.other_complication #> mapping .c19_complication___11 to day_7.no_complication #> mapping .c19_death7d to day_7.death #> mapping .c19_meds___1 to treatment.dexamethasone #> mapping .c19_meds___2 to treatment.remdesevir #> mapping .c19_meds___3 to treatment.tocilizumab #> mapping .c19_meds___4 to treatment.sarilumab #> mapping .c19_meds___5 to treatment.in_drug_trial #> mapping .c19_meds___6 to treatment.no_drug_treatment #> mapping .c19_meds___7 to treatment.sotrovimab #> mapping .hospital_length_of_stay to outcome.length_of_stay #> mapping .survival_days to outcome.survival_duration #> mapping .ip_death to outcome.inpatient_death #> mapping .days_in_icu to outcome.icu_duration #> mapping .did_the_patient_have_respi to outcome.respiratory_support_needed #> mapping .number_of_days_of_ventilat to outcome.ventilator_duration #> mapping .ett_days to outcome.endotracheal_tube_duration #> mapping .renal_replacement_therapy to outcome.renal_support_duration #> mapping .complications___1 to outcome.acute_renal_failure #> mapping .complications___2 to outcome.liver_dysfunction #> mapping .complications___3 to outcome.hospital_acquired_infection #> mapping .complications___4 to outcome.acute_respiratory_distress_syndrome #> mapping .complications___5 to outcome.NSTEMI #> mapping .complications___6 to outcome.STEMI #> mapping .complications___7 to outcome.new_AF #> mapping .complications___8 to outcome.new_other_arrhthmia #> mapping .complications___9 to outcome.stroke #> mapping .complications___10 to outcome.DVT #> mapping .complications___11 to outcome.PE #> mapping .complications___12 to outcome.heart_failure #> mapping .complications___13 to outcome.fall_in_hospital #> mapping .complications___14 to outcome.reduced_mobility #> mapping .complications___15 to outcome.increasing_care_requirement #> mapping .complications___16 to outcome.no_complications #> mapping .ventilatory_support to outcome.highest_level_ventilatory_support #> mapping .did_the_patient_receive_ec to outcome.received_ecmo #> mapping .inotropic_support_required to outcome.received_ionotropes #> mapping .lrtd_30d_outcome to outcome.functional_status #> mapping .survive_1yr to outcome.one_year_survival #> mapping .survival_1yr_days to outcome.one_year_survival_duration #> mapping .yr_survival_complete to outcome.one_year_survival_complete #> mapping .fever2 to symptom.abnormal_temperature #> mapping .pleurtic_cp to symptom.pleuritic_chest_pain #> mapping .cough2 to symptom.cough #> mapping .sput_prod to symptom.productive_sputum #> mapping .dyspnoea to symptom.dyspnoea #> mapping .tachypnoea2 to symptom.tachypnoea #> mapping .confusion to symptom.confusion #> mapping .anosmia to symptom.anosmia #> mapping .ageusia to symptom.ageusia #> mapping .dysgeusia to symptom.dysguesia #> mapping .fever to symptom.fever #> mapping .hypothermia to symptom.hypothermia #> mapping .chills to symptom.chills #> mapping .headache to symptom.headache #> mapping .malaise to symptom.malaise #> mapping .wheeze to symptom.wheeze #> mapping .myalgia to symptom.myalgia #> mapping .worse_confusion to symptom.worsening_confusion #> mapping .general_det to symptom.general_deterioration #> mapping .ox_on_admission to symptom.oxygen_required_on_admission #> mapping .resp_disease___1 to comorbid.no_resp_dx #> mapping .resp_disease___2 to comorbid.copd #> mapping .resp_disease___3 to comorbid.asthma #> mapping .resp_disease___4 to comorbid.resp_other #> mapping .other_respiratory_disease___1 to comorbid.bronchiectasis #> mapping .other_respiratory_disease___2 to comorbid.interstitial_lung_dx #> mapping .other_respiratory_disease___3 to comorbid.cystic_fibrosis #> mapping .other_respiratory_disease___4 to comorbid.pulmonary_hypertension #> mapping .other_respiratory_disease___5 to comorbid.chronic_pleural_dx #> mapping .other_respiratory_disease___6 to comorbid.other_chronic_resp_dx #> mapping .chd___1 to comorbid.no_heart_dx #> mapping .chd___2 to comorbid.ccf #> mapping .chd___3 to comorbid.ihd #> mapping .chd___4 to comorbid.hypertension #> mapping .chd___5 to comorbid.other_heart_dx #> mapping .mi to comorbid.previous_mi #> mapping .other_chd___1 to comorbid.congenital_heart_dx #> mapping .other_chd___2 to comorbid.af #> mapping .other_chd___3 to comorbid.other_arrythmia #> mapping .other_chd___4 to comorbid.pacemaker #> mapping .other_chd___5 to comorbid.valvular_heart_dx #> mapping .other_chd___6 to comorbid.other_other_heart_dx #> mapping .diabetes to comorbid.diabetes #> mapping .dm_meds to comorbid.diabetes_medications #> mapping .neurological_disease___1 to comorbid.neuro_other #> mapping .neurological_disease___2 to comorbid.cva #> mapping .neurological_disease___3 to comorbid.tia #> mapping .neurological_disease___4 to comorbid.hemiplegia #> mapping .neurological_disease___5 to comorbid.paraplegia #> mapping .neurological_disease___6 to comorbid.no_neuro_dx #> mapping .dementia___1 to comorbid.no_dementia #> mapping .dementia___2 to comorbid.dementia #> mapping .dementia___3 to comorbid.cognitive_impairment #> mapping .cancer to comorbid.solid_cancer #> mapping .haem_malig___1 to comorbid.no_haemotological_cancer #> mapping .haem_malig___2 to comorbid.leukaemia #> mapping .haem_malig___3 to comorbid.lymphoma #> mapping .ckd to comorbid.ckd #> mapping .liver_disease to comorbid.liver_disease #> mapping .gastric_ulcers to comorbid.gastric_ulcers #> mapping .pvd to comorbid.periph_vasc_dx #> mapping .ctd to comorbid.connective_tissue_dx #> mapping .immunodeficiency to comorbid.immunodeficiency #> mapping .other_pn_disease to comorbid.other_pneumococcal_risks #> mapping .transplant to comorbid.transplant_recipient #> mapping .pregnancy to comorbid.pregnancy #> mapping .hiv___1 to comorbid.no_HIV #> mapping .hiv___2 to comorbid.HIV #> mapping .hiv___3 to comorbid.AIDS #> mapping .final_soc_lrtd_diagnosis___1 to diagnosis.SOC_CAP_radiologically_confirmed #> mapping .final_soc_lrtd_diagnosis___2 to diagnosis.SOC_CAP_clinically_confirmed #> mapping .final_soc_lrtd_diagnosis___3 to diagnosis.SOC_CAP_no_radiology #> mapping .final_soc_lrtd_diagnosis___4 to diagnosis.SOC_LRTI #> mapping .final_soc_lrtd_diagnosis___5 to diagnosis.SOC_Empyema_or_abscess #> mapping .final_soc_lrtd_diagnosis___6 to diagnosis.SOC_exacerbation_COPD #> mapping .final_soc_lrtd_diagnosis___7 to diagnosis.SOC_exacerbation_non_COPD #> mapping .final_soc_lrtd_diagnosis___8 to diagnosis.SOC_congestive_heart_failure #> mapping .final_soc_lrtd_diagnosis___9 to diagnosis.SOC_non_infectious_process #> mapping .final_soc_lrtd_diagnosis___10 to diagnosis.SOC_non_LRTI #> mapping .covid_19_diagnosis to diagnosis.covid_19_diagnosis #> mapping .ppv23 to vaccination.pneumovax #> mapping .flu_vaccine to vaccination.influenza_vaccination #> mapping .abx_14d_prior to admission.pre_admission_antibiotics_given #> mapping .antiplatelets to admission.antiplatelet_therapy #> mapping .anticoagulants to admission.anticoagulant_therapy #> mapping .statins to admission.cholesterol_lowering_therapy #> mapping .hypertensives to admission.antihypertensive_therapy #> Mapped 299 columns #> Did not map 3461 columns  tmp = failures %>%      filter(.error_type %in% c(\"none checked in checkbox\",\"missing value\")) %>%     filter(!.variable %in% c(\"consented\",\"ppc\",\"include_patient\",\"hosp\")) %>%      inner_join(rawData2, by=\"record_number\", suffix=c(\"\",\".raw\")) %>%   group_by(.variable) %>%   filter(n()>20)    if (nrow(tmp) != 0) {     ggplot(tmp, aes(x=enrollment_date, fill=as.factor(hosp)))+     geom_histogram(binwidth = 7)+     scale_x_date(date_breaks = \"1 month\", date_labels = \"%m-%Y\")+     theme(axis.text.x.bottom = element_text(angle = 90, vjust=0.5, hjust=1))+     facet_wrap(~.variable,scales = \"free_y\") } else {   message(\"No quality checked variables with more than 20 missing items (excluding consent flags)\") } normMicro = rawData2 %>% normalise_data(instrument = \"micro\") #> Normalising data using: normalise.avoncap_export.central.micro #> caching item: ~/.cache/avoncap/norm-b1452b07c5b368fef65b90881bbe0087-b6ac10b16cc535a89abacf663f0fdb41.rda #> Some columns expected in the mappings were not present: microtest_date_1 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-4f67208c76c4372dc56a198f7bc3e203.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_1 to micro.test_performed #> the input data set does not have a microtest_date_1 column (or column set) #> mapping .microday_1 to micro.test_days_from_admission #> mapping .micro_test_1 to micro.test_type #> mapping .micro_isolates_1 to micro.pathogen_detected #> mapping .pn_result_1 to micro.pneumo_serotype_status #> mapping .pn_st_1 to micro.pneumo_serotype #> mapping .micro_lab_1 to micro.sent_to_central_lab #> mapping .pen_susceptibility_1___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_1___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_1___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_1___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_1___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_1___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_1___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_1___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_1___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_1___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_1___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_1___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_1___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_1___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_1___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_1___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_1___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_1___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_1___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_1___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_1 to micro.pneumo_binax_now #> mapping .lg_uat_result_1 to micro.pneumo_legionella_uat #> mapping .micro_final_report_1 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_2 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-8f98402aca6e6de2f673f0def5a2be3b.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_2 to micro.test_performed #> the input data set does not have a microtest_date_2 column (or column set) #> mapping .microday_2 to micro.test_days_from_admission #> mapping .micro_test_2 to micro.test_type #> mapping .micro_isolates_2 to micro.pathogen_detected #> mapping .pn_result_2 to micro.pneumo_serotype_status #> mapping .pn_st_2 to micro.pneumo_serotype #> mapping .micro_lab_2 to micro.sent_to_central_lab #> mapping .pen_susceptibility_2___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_2___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_2___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_2___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_2___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_2___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_2___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_2___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_2___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_2___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_2___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_2___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_2___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_2___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_2___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_2___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_2___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_2___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_2___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_2___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_2 to micro.pneumo_binax_now #> mapping .lg_uat_result_2 to micro.pneumo_legionella_uat #> mapping .micro_final_report_2 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_3 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-b25c43cd31f54711e65844576e3bae11.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_3 to micro.test_performed #> the input data set does not have a microtest_date_3 column (or column set) #> mapping .microday_3 to micro.test_days_from_admission #> mapping .micro_test_3 to micro.test_type #> mapping .micro_isolates_3 to micro.pathogen_detected #> mapping .pn_result_3 to micro.pneumo_serotype_status #> mapping .pn_st_3 to micro.pneumo_serotype #> mapping .micro_lab_3 to micro.sent_to_central_lab #> mapping .pen_susceptibility_3___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_3___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_3___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_3___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_3___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_3___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_3___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_3___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_3___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_3___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_3___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_3___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_3___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_3___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_3___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_3___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_3___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_3___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_3___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_3___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_3 to micro.pneumo_binax_now #> mapping .lg_uat_result_3 to micro.pneumo_legionella_uat #> mapping .micro_final_report_3 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_4 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-1f12f1426c7af21b2c3c357dd9fe30da.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_4 to micro.test_performed #> the input data set does not have a microtest_date_4 column (or column set) #> mapping .microday_4 to micro.test_days_from_admission #> mapping .micro_test_4 to micro.test_type #> mapping .micro_isolates_4 to micro.pathogen_detected #> mapping .pn_result_4 to micro.pneumo_serotype_status #> mapping .pn_st_4 to micro.pneumo_serotype #> mapping .micro_lab_4 to micro.sent_to_central_lab #> mapping .pen_susceptibility_4___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_4___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_4___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_4___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_4___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_4___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_4___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_4___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_4___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_4___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_4___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_4___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_4___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_4___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_4___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_4___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_4___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_4___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_4___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_4___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_4 to micro.pneumo_binax_now #> mapping .lg_uat_result_4 to micro.pneumo_legionella_uat #> mapping .micro_final_report_4 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_5 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-e363839f0110714927fae74b4a132304.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_5 to micro.test_performed #> the input data set does not have a microtest_date_5 column (or column set) #> mapping .microday_5 to micro.test_days_from_admission #> mapping .micro_test_5 to micro.test_type #> mapping .micro_isolates_5 to micro.pathogen_detected #> mapping .pn_result_5 to micro.pneumo_serotype_status #> mapping .pn_st_5 to micro.pneumo_serotype #> mapping .micro_lab_5 to micro.sent_to_central_lab #> mapping .pen_susceptibility_5___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_5___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_5___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_5___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_5___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_5___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_5___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_5___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_5___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_5___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_5___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_5___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_5___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_5___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_5___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_5___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_5___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_5___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_5___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_5___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_5 to micro.pneumo_binax_now #> mapping .lg_uat_result_5 to micro.pneumo_legionella_uat #> mapping .micro_final_report_5 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_6 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-5d3b341ce391cc370e550c861df9ae7f.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_6 to micro.test_performed #> the input data set does not have a microtest_date_6 column (or column set) #> mapping .microday_6 to micro.test_days_from_admission #> mapping .micro_test_6 to micro.test_type #> mapping .micro_isolates_6 to micro.pathogen_detected #> mapping .pn_result_6 to micro.pneumo_serotype_status #> mapping .pn_st_6 to micro.pneumo_serotype #> mapping .micro_lab_6 to micro.sent_to_central_lab #> mapping .pen_susceptibility_6___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_6___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_6___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_6___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_6___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_6___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_6___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_6___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_6___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_6___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_6___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_6___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_6___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_6___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_6___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_6___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_6___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_6___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_6___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_6___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_6 to micro.pneumo_binax_now #> mapping .lg_uat_result_6 to micro.pneumo_legionella_uat #> mapping .micro_final_report_6 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_7 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-15b8bd26d228356ca007d579317e8e68.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_7 to micro.test_performed #> the input data set does not have a microtest_date_7 column (or column set) #> mapping .microday_7 to micro.test_days_from_admission #> mapping .micro_test_7 to micro.test_type #> mapping .micro_isolates_7 to micro.pathogen_detected #> mapping .pn_result_7 to micro.pneumo_serotype_status #> mapping .pn_st_7 to micro.pneumo_serotype #> mapping .micro_lab_7 to micro.sent_to_central_lab #> mapping .pen_susceptibility_7___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_7___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_7___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_7___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_7___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_7___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_7___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_7___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_7___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_7___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_7___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_7___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_7___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_7___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_7___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_7___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_7___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_7___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_7___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_7___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_7 to micro.pneumo_binax_now #> mapping .lg_uat_result_7 to micro.pneumo_legionella_uat #> mapping .micro_final_report_7 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_8 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-df3b47666a2364e74e88ed3380f23b1e.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_8 to micro.test_performed #> the input data set does not have a microtest_date_8 column (or column set) #> mapping .microday_8 to micro.test_days_from_admission #> mapping .micro_test_8 to micro.test_type #> mapping .micro_isolates_8 to micro.pathogen_detected #> mapping .pn_result_8 to micro.pneumo_serotype_status #> mapping .pn_st_8 to micro.pneumo_serotype #> mapping .micro_lab_8 to micro.sent_to_central_lab #> mapping .pen_susceptibility_8___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_8___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_8___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_8___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_8___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_8___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_8___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_8___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_8___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_8___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_8___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_8___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_8___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_8___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_8___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_8___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_8___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_8___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_8___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_8___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_8 to micro.pneumo_binax_now #> mapping .lg_uat_result_8 to micro.pneumo_legionella_uat #> mapping .micro_final_report_8 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_9 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-4029e6432d51c6e554ad64a9b02280c2.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_9 to micro.test_performed #> the input data set does not have a microtest_date_9 column (or column set) #> mapping .microday_9 to micro.test_days_from_admission #> mapping .micro_test_9 to micro.test_type #> mapping .micro_isolates_9 to micro.pathogen_detected #> mapping .pn_result_9 to micro.pneumo_serotype_status #> mapping .pn_st_9 to micro.pneumo_serotype #> mapping .micro_lab_9 to micro.sent_to_central_lab #> mapping .pen_susceptibility_9___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_9___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_9___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_9___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_9___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_9___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_9___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_9___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_9___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_9___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_9___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_9___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_9___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_9___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_9___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_9___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_9___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_9___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_9___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_9___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_9 to micro.pneumo_binax_now #> mapping .lg_uat_result_9 to micro.pneumo_legionella_uat #> mapping .micro_final_report_9 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_10 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-8aa6b24697bea0757aa9d2e3d11afcaf.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_10 to micro.test_performed #> the input data set does not have a microtest_date_10 column (or column set) #> mapping .microday_10 to micro.test_days_from_admission #> mapping .micro_test_10 to micro.test_type #> mapping .micro_isolates_10 to micro.pathogen_detected #> mapping .pn_result_10 to micro.pneumo_serotype_status #> mapping .pn_st_10 to micro.pneumo_serotype #> mapping .micro_lab_10 to micro.sent_to_central_lab #> mapping .pen_susceptibility_10___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_10___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_10___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_10___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_10___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_10___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_10___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_10___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_10___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_10___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_10___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_10___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_10___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_10___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_10___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_10___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_10___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_10___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_10___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_10___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_10 to micro.pneumo_binax_now #> mapping .lg_uat_result_10 to micro.pneumo_legionella_uat #> mapping .micro_final_report_10 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_11 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-f9ae6d18b6c162c9848afda619a8580d.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_11 to micro.test_performed #> the input data set does not have a microtest_date_11 column (or column set) #> mapping .microday_11 to micro.test_days_from_admission #> mapping .micro_test_11 to micro.test_type #> mapping .micro_isolates_11 to micro.pathogen_detected #> mapping .pn_result_11 to micro.pneumo_serotype_status #> mapping .pn_st_11 to micro.pneumo_serotype #> mapping .micro_lab_11 to micro.sent_to_central_lab #> mapping .pen_susceptibility_11___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_11___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_11___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_11___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_11___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_11___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_11___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_11___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_11___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_11___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_11___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_11___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_11___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_11___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_11___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_11___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_11___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_11___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_11___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_11___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_11 to micro.pneumo_binax_now #> mapping .lg_uat_result_11 to micro.pneumo_legionella_uat #> mapping .micro_final_report_11 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_12 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-ba288f577d3756572acc4cb1b1524869.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_12 to micro.test_performed #> the input data set does not have a microtest_date_12 column (or column set) #> mapping .microday_12 to micro.test_days_from_admission #> mapping .micro_test_12 to micro.test_type #> mapping .micro_isolates_12 to micro.pathogen_detected #> mapping .pn_result_12 to micro.pneumo_serotype_status #> mapping .pn_st_12 to micro.pneumo_serotype #> mapping .micro_lab_12 to micro.sent_to_central_lab #> mapping .pen_susceptibility_12___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_12___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_12___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_12___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_12___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_12___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_12___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_12___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_12___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_12___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_12___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_12___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_12___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_12___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_12___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_12___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_12___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_12___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_12___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_12___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_12 to micro.pneumo_binax_now #> mapping .lg_uat_result_12 to micro.pneumo_legionella_uat #> mapping .micro_final_report_12 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_13 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-e4bfb99811e80dacf70d66ef7c451288.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_13 to micro.test_performed #> the input data set does not have a microtest_date_13 column (or column set) #> mapping .microday_13 to micro.test_days_from_admission #> mapping .micro_test_13 to micro.test_type #> mapping .micro_isolates_13 to micro.pathogen_detected #> mapping .pn_result_13 to micro.pneumo_serotype_status #> mapping .pn_st_13 to micro.pneumo_serotype #> mapping .micro_lab_13 to micro.sent_to_central_lab #> mapping .pen_susceptibility_13___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_13___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_13___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_13___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_13___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_13___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_13___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_13___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_13___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_13___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_13___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_13___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_13___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_13___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_13___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_13___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_13___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_13___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_13___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_13___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_13 to micro.pneumo_binax_now #> mapping .lg_uat_result_13 to micro.pneumo_legionella_uat #> mapping .micro_final_report_13 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_14 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-673842154c89d160cfb0f32b56fb5222.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_14 to micro.test_performed #> the input data set does not have a microtest_date_14 column (or column set) #> mapping .microday_14 to micro.test_days_from_admission #> mapping .micro_test_14 to micro.test_type #> mapping .micro_isolates_14 to micro.pathogen_detected #> mapping .pn_result_14 to micro.pneumo_serotype_status #> mapping .pn_st_14 to micro.pneumo_serotype #> mapping .micro_lab_14 to micro.sent_to_central_lab #> mapping .pen_susceptibility_14___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_14___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_14___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_14___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_14___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_14___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_14___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_14___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_14___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_14___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_14___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_14___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_14___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_14___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_14___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_14___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_14___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_14___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_14___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_14___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_14 to micro.pneumo_binax_now #> mapping .lg_uat_result_14 to micro.pneumo_legionella_uat #> mapping .micro_final_report_14 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_15 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-a85174ca8fa969da4bdc02112aec17db.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_15 to micro.test_performed #> the input data set does not have a microtest_date_15 column (or column set) #> mapping .microday_15 to micro.test_days_from_admission #> mapping .micro_test_15 to micro.test_type #> mapping .micro_isolates_15 to micro.pathogen_detected #> mapping .pn_result_15 to micro.pneumo_serotype_status #> mapping .pn_st_15 to micro.pneumo_serotype #> mapping .micro_lab_15 to micro.sent_to_central_lab #> mapping .pen_susceptibility_15___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_15___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_15___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_15___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_15___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_15___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_15___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_15___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_15___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_15___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_15___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_15___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_15___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_15___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_15___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_15___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_15___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_15___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_15___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_15___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_15 to micro.pneumo_binax_now #> mapping .lg_uat_result_15 to micro.pneumo_legionella_uat #> mapping .micro_final_report_15 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_16 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-f215aebe149205f80f48bf48b8e697e7.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_16 to micro.test_performed #> the input data set does not have a microtest_date_16 column (or column set) #> mapping .microday_16 to micro.test_days_from_admission #> mapping .micro_test_16 to micro.test_type #> mapping .micro_isolates_16 to micro.pathogen_detected #> mapping .pn_result_16 to micro.pneumo_serotype_status #> mapping .pn_st_16 to micro.pneumo_serotype #> mapping .micro_lab_16 to micro.sent_to_central_lab #> mapping .pen_susceptibility_16___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_16___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_16___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_16___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_16___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_16___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_16___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_16___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_16___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_16___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_16___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_16___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_16___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_16___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_16___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_16___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_16___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_16___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_16___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_16___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_16 to micro.pneumo_binax_now #> mapping .lg_uat_result_16 to micro.pneumo_legionella_uat #> mapping .micro_final_report_16 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_17 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-3ea807aa1e37b62c16d7aea0fcb74d34.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_17 to micro.test_performed #> the input data set does not have a microtest_date_17 column (or column set) #> mapping .microday_17 to micro.test_days_from_admission #> mapping .micro_test_17 to micro.test_type #> mapping .micro_isolates_17 to micro.pathogen_detected #> mapping .pn_result_17 to micro.pneumo_serotype_status #> mapping .pn_st_17 to micro.pneumo_serotype #> mapping .micro_lab_17 to micro.sent_to_central_lab #> mapping .pen_susceptibility_17___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_17___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_17___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_17___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_17___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_17___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_17___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_17___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_17___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_17___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_17___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_17___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_17___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_17___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_17___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_17___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_17___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_17___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_17___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_17___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_17 to micro.pneumo_binax_now #> mapping .lg_uat_result_17 to micro.pneumo_legionella_uat #> mapping .micro_final_report_17 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_18 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-1a53cb8b44102b54680b39e67592f321.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_18 to micro.test_performed #> the input data set does not have a microtest_date_18 column (or column set) #> mapping .microday_18 to micro.test_days_from_admission #> mapping .micro_test_18 to micro.test_type #> mapping .micro_isolates_18 to micro.pathogen_detected #> mapping .pn_result_18 to micro.pneumo_serotype_status #> mapping .pn_st_18 to micro.pneumo_serotype #> mapping .micro_lab_18 to micro.sent_to_central_lab #> mapping .pen_susceptibility_18___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_18___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_18___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_18___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_18___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_18___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_18___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_18___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_18___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_18___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_18___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_18___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_18___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_18___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_18___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_18___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_18___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_18___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_18___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_18___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_18 to micro.pneumo_binax_now #> mapping .lg_uat_result_18 to micro.pneumo_legionella_uat #> mapping .micro_final_report_18 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_19 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-f1d00930638af842aab9c1563471492b.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_19 to micro.test_performed #> the input data set does not have a microtest_date_19 column (or column set) #> mapping .microday_19 to micro.test_days_from_admission #> mapping .micro_test_19 to micro.test_type #> mapping .micro_isolates_19 to micro.pathogen_detected #> mapping .pn_result_19 to micro.pneumo_serotype_status #> mapping .pn_st_19 to micro.pneumo_serotype #> mapping .micro_lab_19 to micro.sent_to_central_lab #> mapping .pen_susceptibility_19___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_19___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_19___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_19___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_19___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_19___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_19___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_19___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_19___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_19___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_19___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_19___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_19___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_19___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_19___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_19___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_19___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_19___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_19___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_19___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_19 to micro.pneumo_binax_now #> mapping .lg_uat_result_19 to micro.pneumo_legionella_uat #> mapping .micro_final_report_19 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns #> Some columns expected in the mappings were not present: microtest_date_25 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-f2fbc190cf9fa8e82ec6669ce15c62fc.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .microtest_done_25 to micro.test_performed #> the input data set does not have a microtest_date_25 column (or column set) #> mapping .microday_25 to micro.test_days_from_admission #> mapping .micro_test_25 to micro.test_type #> mapping .micro_isolates_25 to micro.pathogen_detected #> mapping .pn_result_25 to micro.pneumo_serotype_status #> mapping .pn_st_25 to micro.pneumo_serotype #> mapping .micro_lab_25 to micro.sent_to_central_lab #> mapping .pen_susceptibility_25___1 to micro.penicillin_susceptibility, value Unknown #> mapping .pen_susceptibility_25___2 to micro.penicillin_susceptibility, value Sensitive #> mapping .pen_susceptibility_25___3 to micro.penicillin_susceptibility, value Intermediate #> mapping .pen_susceptibility_25___4 to micro.penicillin_susceptibility, value Resistant #> mapping .septrin_susceptibility_25___1 to micro.septrin_susceptibility, value Unknown #> mapping .septrin_susceptibility_25___2 to micro.septrin_susceptibility, value Sensitive #> mapping .septrin_susceptibility_25___3 to micro.septrin_susceptibility, value Intermediate #> mapping .septrin_susceptibility_25___4 to micro.septrin_susceptibility, value Resistant #> mapping .doxy_susceptibility_25___1 to micro.doxycycline_susceptibility, value Unknown #> mapping .doxy_susceptibility_25___2 to micro.doxycycline_susceptibility, value Sensitive #> mapping .doxy_susceptibility_25___3 to micro.doxycycline_susceptibility, value Intermediate #> mapping .doxy_susceptibility_25___4 to micro.doxycycline_susceptibility, value Resistant #> mapping .levoflox_suscept_25___1 to micro.levofloxacin_susceptibility, value Unknown #> mapping .levoflox_suscept_25___2 to micro.levofloxacin_susceptibility, value Sensitive #> mapping .levoflox_suscept_25___3 to micro.levofloxacin_susceptibility, value Intermediate #> mapping .levoflox_suscept_25___4 to micro.levofloxacin_susceptibility, value Resistant #> mapping .cef_susceptibility_25___1 to micro.ceftriaxone_susceptibility, value Unknown #> mapping .cef_susceptibility_25___2 to micro.ceftriaxone_susceptibility, value Sensitive #> mapping .cef_susceptibility_25___3 to micro.ceftriaxone_susceptibility, value Intermediate #> mapping .cef_susceptibility_25___4 to micro.ceftriaxone_susceptibility, value Resistant #> mapping .pn_uat_result_25 to micro.pneumo_binax_now #> mapping .lg_uat_result_25 to micro.pneumo_legionella_uat #> mapping .micro_final_report_25 to micro.is_final_report #> Mapped 105 columns #> Did not map 3652 columns  normMicro %>% filter(micro.test_performed==\"yes\") %>% select(micro.pathogen) %>% unnest(micro.pathogen) %>% with(table(pathogen,detected,  useNA = \"always\")) #>                                   detected #> pathogen                              no   yes  <NA> #>   Aspergillus                      39846    25     0 #>   Streptococcus Agalactiae         39858    13     0 #>   Candida                          38930   941     0 #>   Achromobacter Xylosoxidans       39855    16     0 #>   Bacteroides                      39867     4     0 #>   Bacteroides fragilis             39862     9     0 #>   Bacteroides ovatus               39871     0     0 #>   Bacteroides uniformis            39871     0     0 #>   Burholderia cepacia              39867     4     0 #>   Citrobacter freundii complex     39842    29     0 #>   Citrobacter koseri               39827    44     0 #>   Clostridium perfringens          39859    12     0 #>   Eggerthella lenta                39871     0     0 #>   Enterobacter aerogenes           39862     9     0 #>   Enterobacter cloacae             39745   126     0 #>   Enterococcus faecalis            39802    69     0 #>   Enterococcus faecium             39827    44     0 #>   Escherichia coli                 39246   625     0 #>   Haemophilus influenzae           39250   621     0 #>   Haemophilus parainfluenzae       39868     3     0 #>   Klebsiella oxytoca               39794    77     0 #>   Klebsiella pneumoniae            39649   222     0 #>   Morganella morganii              39861    10     0 #>   Peptostreptococcus anaerobius    39870     1     0 #>   Proteus mirabilis                39794    77     0 #>   Pseudomonas aeruginosa           39361   510     0 #>   Serratia marcescens              39807    64     0 #>   Staphylcoccus aureus             39348   523     0 #>   Streptococcus anginosus          39859    12     0 #>   Streptococcus pneumoniae         39593   278     0 #>   Streptococcus salivarius group   39865     6     0 #>   Stenotrophomonas maltophilia     39802    69     0 #>   Acinetobacter                    39849    22     0 #>   Aspergillus niger                39871     0     0 #>   Bacillus                         39853    18     0 #>   Candida albicans                 39840    31     0 #>   Candida glabrata                 39864     7     0 #>   Candida tropicalis               39865     6     0 #>   Coagulase negative staphylcoccus 39850    21     0 #>   Corynebacterium                  39844    27     0 #>   Enterococcus                     39866     5     0 #>   Gram positive coccus             39827    44     0 #>   Klebsiella                       39841    30     0 #>   Legionella pneumoniae            39869     2     0 #>   MRSA                             39848    23     0 #>   MSSA                             39870     1     0 #>   Moraxella catarrhalis            39735   136     0 #>   Mycobacterium tuberculosis       39863     8     0 #>   Pneumocytis jirovecii            39869     2     0 #>   Pseudomonas                      39752   119     0 #>   Pseudomonas fluorescens          39870     1     0 #>   Staphylcoccus                    39844    27     0 #>   Staphylococcus capitis           39797    74     0 #>   Staphylococcus epidermidis       39480   391     0 #>   Staphylococcus hominis           39648   223     0 #>   Streptococcus                    39846    25     0 #>   Streptococcus beta-hemolytic     39770   101     0 #>   Streptococcus pyogenes           39854    17     0 #>   Streptococcus viridans           39871     0     0 #>   Yeast                            39830    41     0 #>   Other                            39057   814     0 #>   <NA>                                 0     0     0 normMicro %>% filter(micro.test_performed==\"yes\") %>% select(micro.test_type, micro.pathogen) %>% unnest(micro.pathogen) %>% filter(detected==\"yes\") %>% group_by(pathogen, micro.test_type) %>%   count() %>% arrange(desc(n)) #> # A tibble: 206 × 3 #> # Groups:   pathogen, micro.test_type [206] #>    pathogen                   micro.test_type     n #>    <fct>                      <fct>           <int> #>  1 Candida                    Sputum            655 #>  2 Haemophilus influenzae     Sputum            522 #>  3 Other                      Blood culture     441 #>  4 Escherichia coli           Blood culture     425 #>  5 Staphylococcus epidermidis Blood culture     380 #>  6 Pseudomonas aeruginosa     Sputum            343 #>  7 Other                      Sputum            263 #>  8 Staphylcoccus aureus       Blood culture     223 #>  9 Staphylococcus hominis     Blood culture     220 #> 10 Staphylcoccus aureus       Sputum            169 #> # ℹ 196 more rows normVirol = rawData2 %>% normalise_data(instrument = \"virol\") #> Normalising data using: normalise.avoncap_export.central.virol #> caching item: ~/.cache/avoncap/norm-b6f8ed1851f16d8282d50544e149e955-b6ac10b16cc535a89abacf663f0fdb41.rda #> Some columns expected in the mappings were not present: virology_date_of_asst_1 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-e8f6f812740b14fa6420cb325eac1333.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_1 to virol.test_performed #> the input data set does not have a virology_date_of_asst_1 column (or column set) #> mapping .viroldays_1 to virol.test_days_from_admission #> mapping .specimen_type_1 to virol.test_type #> mapping .virus_isolated_1 to virol.pathogen_detected #> mapping .test_type_1 to virol.test_type #> mapping .virol_patient_lab_1 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_2 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-1c9f3e31f8dff2d8e5395eae64dcfff2.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_2 to virol.test_performed #> the input data set does not have a virology_date_of_asst_2 column (or column set) #> mapping .viroldays_2 to virol.test_days_from_admission #> mapping .specimen_type_2 to virol.test_type #> mapping .virus_isolated_2 to virol.pathogen_detected #> mapping .test_type_2 to virol.test_type #> mapping .virol_patient_lab_2 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_3 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-a309338d55efda36e63ee6c4418280ff.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_3 to virol.test_performed #> the input data set does not have a virology_date_of_asst_3 column (or column set) #> mapping .viroldays_3 to virol.test_days_from_admission #> mapping .specimen_type_3 to virol.test_type #> mapping .virus_isolated_3 to virol.pathogen_detected #> mapping .test_type_3 to virol.test_type #> mapping .virol_patient_lab_3 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_4 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-38977a0f84371e30d6f783b812aae326.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_4 to virol.test_performed #> the input data set does not have a virology_date_of_asst_4 column (or column set) #> mapping .viroldays_4 to virol.test_days_from_admission #> mapping .specimen_type_4 to virol.test_type #> mapping .virus_isolated_4 to virol.pathogen_detected #> mapping .test_type_4 to virol.test_type #> mapping .virol_patient_lab_4 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_5 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-ba2bd41a103e9262801a2bf10d438c93.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_5 to virol.test_performed #> the input data set does not have a virology_date_of_asst_5 column (or column set) #> mapping .viroldays_5 to virol.test_days_from_admission #> mapping .specimen_type_5 to virol.test_type #> mapping .virus_isolated_5 to virol.pathogen_detected #> mapping .test_type_5 to virol.test_type #> mapping .virol_patient_lab_5 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_6 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-16aad3948c4195549f233862b093f9d6.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_6 to virol.test_performed #> the input data set does not have a virology_date_of_asst_6 column (or column set) #> mapping .viroldays_6 to virol.test_days_from_admission #> mapping .specimen_type_6 to virol.test_type #> mapping .virus_isolated_6 to virol.pathogen_detected #> mapping .test_type_6 to virol.test_type #> mapping .virol_patient_lab_6 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_7 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-3547181a8d7e7edd85105b7350e4a0c5.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_7 to virol.test_performed #> the input data set does not have a virology_date_of_asst_7 column (or column set) #> mapping .viroldays_7 to virol.test_days_from_admission #> mapping .specimen_type_7 to virol.test_type #> mapping .virus_isolated_7 to virol.pathogen_detected #> mapping .test_type_7 to virol.test_type #> mapping .virol_patient_lab_7 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_8 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-4d59f3306ee2bffbb4d75a0484731a8c.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_8 to virol.test_performed #> the input data set does not have a virology_date_of_asst_8 column (or column set) #> mapping .viroldays_8 to virol.test_days_from_admission #> mapping .specimen_type_8 to virol.test_type #> mapping .virus_isolated_8 to virol.pathogen_detected #> mapping .test_type_8 to virol.test_type #> mapping .virol_patient_lab_8 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_9 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-4cf00d71c0a22d8e5bb97d8326f92b6d.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_9 to virol.test_performed #> the input data set does not have a virology_date_of_asst_9 column (or column set) #> mapping .viroldays_9 to virol.test_days_from_admission #> mapping .specimen_type_9 to virol.test_type #> mapping .virus_isolated_9 to virol.pathogen_detected #> mapping .test_type_9 to virol.test_type #> mapping .virol_patient_lab_9 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_10 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-9350f8eaf434e274b5cf47e6df5af2cd.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_10 to virol.test_performed #> the input data set does not have a virology_date_of_asst_10 column (or column set) #> mapping .viroldays_10 to virol.test_days_from_admission #> mapping .specimen_type_10 to virol.test_type #> mapping .virus_isolated_10 to virol.pathogen_detected #> mapping .test_type_10 to virol.test_type #> mapping .virol_patient_lab_10 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_11 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-c5033961b37441310cb77b2dea282da7.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_11 to virol.test_performed #> the input data set does not have a virology_date_of_asst_11 column (or column set) #> mapping .viroldays_11 to virol.test_days_from_admission #> mapping .specimen_type_11 to virol.test_type #> mapping .virus_isolated_11 to virol.pathogen_detected #> mapping .test_type_11 to virol.test_type #> mapping .virol_patient_lab_11 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_12 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-1b608aa291221390e2c288db763f3c13.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_12 to virol.test_performed #> the input data set does not have a virology_date_of_asst_12 column (or column set) #> mapping .viroldays_12 to virol.test_days_from_admission #> mapping .specimen_type_12 to virol.test_type #> mapping .virus_isolated_12 to virol.pathogen_detected #> mapping .test_type_12 to virol.test_type #> mapping .virol_patient_lab_12 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_13 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-4c7691d568270e4d85f3277ae68ceebd.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_13 to virol.test_performed #> the input data set does not have a virology_date_of_asst_13 column (or column set) #> mapping .viroldays_13 to virol.test_days_from_admission #> mapping .specimen_type_13 to virol.test_type #> mapping .virus_isolated_13 to virol.pathogen_detected #> mapping .test_type_13 to virol.test_type #> mapping .virol_patient_lab_13 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_14 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-f5139e14ed4faecebcfb7156d4d5c72e.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_14 to virol.test_performed #> the input data set does not have a virology_date_of_asst_14 column (or column set) #> mapping .viroldays_14 to virol.test_days_from_admission #> mapping .specimen_type_14 to virol.test_type #> mapping .virus_isolated_14 to virol.pathogen_detected #> mapping .test_type_14 to virol.test_type #> mapping .virol_patient_lab_14 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_15 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-3ab9d8b8da3367dc837db672b57bc9f1.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_15 to virol.test_performed #> the input data set does not have a virology_date_of_asst_15 column (or column set) #> mapping .viroldays_15 to virol.test_days_from_admission #> mapping .specimen_type_15 to virol.test_type #> mapping .virus_isolated_15 to virol.pathogen_detected #> mapping .test_type_15 to virol.test_type #> mapping .virol_patient_lab_15 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_16 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-1e1223ec513417d2c00f333c0e10f718.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_16 to virol.test_performed #> the input data set does not have a virology_date_of_asst_16 column (or column set) #> mapping .viroldays_16 to virol.test_days_from_admission #> mapping .specimen_type_16 to virol.test_type #> mapping .virus_isolated_16 to virol.pathogen_detected #> mapping .test_type_16 to virol.test_type #> mapping .virol_patient_lab_16 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_17 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-9cea588d43658ee46f38fd7295f6b428.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_17 to virol.test_performed #> the input data set does not have a virology_date_of_asst_17 column (or column set) #> mapping .viroldays_17 to virol.test_days_from_admission #> mapping .specimen_type_17 to virol.test_type #> mapping .virus_isolated_17 to virol.pathogen_detected #> mapping .test_type_17 to virol.test_type #> mapping .virol_patient_lab_17 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_18 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-45096aeb79e2abacbe651615d4dbd4e0.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_18 to virol.test_performed #> the input data set does not have a virology_date_of_asst_18 column (or column set) #> mapping .viroldays_18 to virol.test_days_from_admission #> mapping .specimen_type_18 to virol.test_type #> mapping .virus_isolated_18 to virol.pathogen_detected #> mapping .test_type_18 to virol.test_type #> mapping .virol_patient_lab_18 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_19 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-e111a814ad9e5a8744fc36a774ce289b.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_19 to virol.test_performed #> the input data set does not have a virology_date_of_asst_19 column (or column set) #> mapping .viroldays_19 to virol.test_days_from_admission #> mapping .specimen_type_19 to virol.test_type #> mapping .virus_isolated_19 to virol.pathogen_detected #> mapping .test_type_19 to virol.test_type #> mapping .virol_patient_lab_19 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns #> Some columns expected in the mappings were not present: virology_date_of_asst_20 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-2f1e9457027881fb96c6c1169dcc3d5e.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .viral_testing_performed_20 to virol.test_performed #> the input data set does not have a virology_date_of_asst_20 column (or column set) #> mapping .viroldays_20 to virol.test_days_from_admission #> mapping .specimen_type_20 to virol.test_type #> mapping .virus_isolated_20 to virol.pathogen_detected #> mapping .test_type_20 to virol.test_type #> mapping .virol_patient_lab_20 to virol.test_provenance #> Mapped 36 columns #> Did not map 3721 columns  normVirol  %>% filter(virol.test_performed==\"yes\") %>% select(virol.pathogen) %>% unnest(virol.pathogen) %>% with(table(pathogen,detected,  useNA = \"always\")) #>                                          detected #> pathogen                                     no   yes  <NA> #>   Influenza A                             85076  1173     0 #>   Influenza B                             86191    58     0 #>   RSV                                     85789   460     0 #>   Adenovirus                              86213    36     0 #>   Human Metapneumovirus                   85858   391     0 #>   Human Rhinovirus/Enterovirus            85435   814     0 #>   Parainfluenza Type 1                    86225    24     0 #>   Parainfluenza Type 2                    86235    14     0 #>   Parainfluenza Type 3                    86008   241     0 #>   Parainfluenza Type 4                    86178    71     0 #>   Covid-19                                69104 17145     0 #>   Other                                   86197    52     0 #>   Coronavirus 229E                        86243     6     0 #>   Coronavirus HKU1                        86241     8     0 #>   Coronavirus NL63                        86243     6     0 #>   Coronavirus OC43                        86231    18     0 #>   Middle East Respiratory Syndrome (MERS) 86249     0     0 #>   Bordetella parapertussis (IS1001)       86248     1     0 #>   Bordetella pertussis (ptxP)             86247     2     0 #>   Chlamydia pneumoniae                    86246     3     0 #>   Mycoplasma pneumoniae                   86226    23     0 #>   <NA>                                        0     0     0 normVirol %>% filter(virol.test_performed==\"yes\") %>% select(virol.test_type, virol.pathogen) %>% unnest(virol.pathogen) %>% filter(detected==\"yes\") %>%    # with(table(pathogen, virol.test_type,  useNA = \"always\")) %>%    group_by(pathogen, virol.test_type) %>%   count() %>% arrange(desc(n)) #> # A tibble: 61 × 3 #> # Groups:   pathogen, virol.test_type [61] #>    pathogen                     virol.test_type               n #>    <fct>                        <fct>                     <int> #>  1 Covid-19                     PCR - COVID only           9024 #>  2 Covid-19                     POCT Test (Abbott)         5341 #>  3 Covid-19                     PCR Respiratory (Biofire)  1708 #>  4 Covid-19                     PCR Quad Panel              785 #>  5 Human Rhinovirus/Enterovirus PCR Respiratory (Biofire)   549 #>  6 Influenza A                  PCR Respiratory (Biofire)   446 #>  7 Influenza A                  PCR Quad Panel              323 #>  8 Influenza A                  PCR - Respiratory panel     251 #>  9 Human Rhinovirus/Enterovirus PCR - Respiratory panel     246 #> 10 Human Metapneumovirus        PCR Respiratory (Biofire)   245 #> # ℹ 51 more rows normRadio = rawData2 %>% normalise_data(instrument = \"radio\") #> Normalising data using: normalise.avoncap_export.central.radio #> caching item: ~/.cache/avoncap/norm-ebbd016b214d0a4b408623ae4e2c8e3c-b6ac10b16cc535a89abacf663f0fdb41.rda #> Some columns expected in the mappings were not present: radiology_date_1 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-f34418891f67065b710a55026d35661b.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_1 to radio.test_performed #> the input data set does not have a radiology_date_1 column (or column set) #> mapping .radiodays_1 to radio.test_days_from_admission #> mapping .radio_test_1 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_2 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-6c0b86e290db6829f366fc2234d7040a.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_2 to radio.test_performed #> the input data set does not have a radiology_date_2 column (or column set) #> mapping .radiodays_2 to radio.test_days_from_admission #> mapping .radio_test_2 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_3 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-72101ecad7d6ab3eb422bef175104012.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_3 to radio.test_performed #> the input data set does not have a radiology_date_3 column (or column set) #> mapping .radiodays_3 to radio.test_days_from_admission #> mapping .radio_test_3 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_4 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-39159afe869b9b50e2d33da46fc12e9e.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_4 to radio.test_performed #> the input data set does not have a radiology_date_4 column (or column set) #> mapping .radiodays_4 to radio.test_days_from_admission #> mapping .radio_test_4 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_5 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-5726b70c4383f0e20bd028fd83f675ed.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_5 to radio.test_performed #> the input data set does not have a radiology_date_5 column (or column set) #> mapping .radiodays_5 to radio.test_days_from_admission #> mapping .radio_test_5 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_6 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-37058aae4b3be19745aee240526e335f.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_6 to radio.test_performed #> the input data set does not have a radiology_date_6 column (or column set) #> mapping .radiodays_6 to radio.test_days_from_admission #> mapping .radio_test_6 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_7 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-9c4c40037d9c637aa01e9c91d3d7f56f.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_7 to radio.test_performed #> the input data set does not have a radiology_date_7 column (or column set) #> mapping .radiodays_7 to radio.test_days_from_admission #> mapping .radio_test_7 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_8 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-81326faf41c5a9ea47605e27f6b36ead.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_8 to radio.test_performed #> the input data set does not have a radiology_date_8 column (or column set) #> mapping .radiodays_8 to radio.test_days_from_admission #> mapping .radio_test_8 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_9 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-af9af27b23306d8ab9657a3951bfcc8a.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_9 to radio.test_performed #> the input data set does not have a radiology_date_9 column (or column set) #> mapping .radiodays_9 to radio.test_days_from_admission #> mapping .radio_test_9 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_10 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-13fa1b2dcc27c516a7cdd1735383aa52.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_10 to radio.test_performed #> the input data set does not have a radiology_date_10 column (or column set) #> mapping .radiodays_10 to radio.test_days_from_admission #> mapping .radio_test_10 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_11 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-052398b315704f2e689d556e3d9c679c.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_11 to radio.test_performed #> the input data set does not have a radiology_date_11 column (or column set) #> mapping .radiodays_11 to radio.test_days_from_admission #> mapping .radio_test_11 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_12 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-d0a622f7c34ee922701cd8c3d3e72df0.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_12 to radio.test_performed #> the input data set does not have a radiology_date_12 column (or column set) #> mapping .radiodays_12 to radio.test_days_from_admission #> mapping .radio_test_12 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_13 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-3872899ee39dfe7b8eb21f91aa676946.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_13 to radio.test_performed #> the input data set does not have a radiology_date_13 column (or column set) #> mapping .radiodays_13 to radio.test_days_from_admission #> mapping .radio_test_13 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_14 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-2672f119d7918924683d2de309b86278.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_14 to radio.test_performed #> the input data set does not have a radiology_date_14 column (or column set) #> mapping .radiodays_14 to radio.test_days_from_admission #> mapping .radio_test_14 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_15 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-eb0aca94e11cca646ddd240452138b7b.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_15 to radio.test_performed #> the input data set does not have a radiology_date_15 column (or column set) #> mapping .radiodays_15 to radio.test_days_from_admission #> mapping .radio_test_15 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_16 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-5d51384bac256bec4bf9f1c75b4d1201.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_16 to radio.test_performed #> the input data set does not have a radiology_date_16 column (or column set) #> mapping .radiodays_16 to radio.test_days_from_admission #> mapping .radio_test_16 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_17 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-0b903e99a88863e9298a7bf4edc7b1a7.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_17 to radio.test_performed #> the input data set does not have a radiology_date_17 column (or column set) #> mapping .radiodays_17 to radio.test_days_from_admission #> mapping .radio_test_17 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_18 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-18b2189f3beff72cbc33141516f907c1.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_18 to radio.test_performed #> the input data set does not have a radiology_date_18 column (or column set) #> mapping .radiodays_18 to radio.test_days_from_admission #> mapping .radio_test_18 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_19 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-0573ce6284454fd6b7d3922a46965cc6.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_19 to radio.test_performed #> the input data set does not have a radiology_date_19 column (or column set) #> mapping .radiodays_19 to radio.test_days_from_admission #> mapping .radio_test_19 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns #> Some columns expected in the mappings were not present: radiology_date_20 #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-2489b89f0ba988a23df353f9977fa86a.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .radio_exam_20 to radio.test_performed #> the input data set does not have a radiology_date_20 column (or column set) #> mapping .radiodays_20 to radio.test_days_from_admission #> mapping .radio_test_20 to radio.test_type #> Mapped 27 columns #> Did not map 3730 columns  # old format tmp3  %>% filter(radio.test_performed==\"yes\") %>% with(table(radio.test_type, radio.lung_malignancy)) normRadio %>% filter(radio.test_performed==\"yes\") %>% select(radio.alrtd_finding) %>% unnest(radio.alrtd_finding) %>% with(table(finding,present,  useNA = \"always\")) #>                                   present #> finding                               no   yes  <NA> #>   Normal                           42065 31593    28 #>   Consistent with pneumonia        48771 24887    28 #>   Consistent with heart failure    67483  6175    28 #>   Consistent with pleural effusion 58606 15052    28 #>   Consistent with COVID-19         67329  6329    28 #>   Other abnormal finding           68289  5369    28 #>   <NA>                                 0     0     0 normRadio %>% filter(radio.test_performed==\"yes\") %>% select(radio.test_type, radio.non_alrtd_finding) %>% unnest(radio.non_alrtd_finding) %>% filter(present==\"yes\") %>% with(table(finding, radio.test_type,  useNA = \"always\")) #>                                        radio.test_type #> finding                                  CXR CT scan (CT thorax, CTPA, HRCT) #>   Pulmonary embolus                      249                             999 #>   Pneumothorax and/or pneumomediastinum 1362                             263 #>   Cavity including abscesses              63                              48 #>   Aspergillioma                            5                               4 #>   Lung malignancy                        557                             465 #>   Lung nodules                           595                             772 #>   Tuberculosis (old or new)               18                               6 #>   Empyema                                190                             206 #>   <NA>                                     0                               0 #>                                        radio.test_type #> finding                                 US thorax  MRI Other <NA> #>   Pulmonary embolus                             0    0    21    0 #>   Pneumothorax and/or pneumomediastinum         0    0     0    0 #>   Cavity including abscesses                    0    0     0    0 #>   Aspergillioma                                 0    0     0    0 #>   Lung malignancy                               0    0     2    0 #>   Lung nodules                                  0    0     1    0 #>   Tuberculosis (old or new)                     0    0     0    0 #>   Empyema                                       0    0     4    0 #>   <NA>                                          0    0     0    0 normHaem = rawData2 %>% normalise_data(instrument = \"haem\")  #> Normalising data using: normalise.avoncap_export.central.haem #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-21d15cd212a32c17f9825910553b13aa.rda #> mapping .consented to admin.consented #> mapping .ppc to admin.pp_consented #> mapping .withdrawal to admin.withdrawal #> mapping .consent_urine to admin.consent_for_urine #> mapping .consent_blood to admin.consent_for_blood #> mapping .consent_resp_samples1 to admin.consent_for_respiratory_samples #> mapping .record_number to admin.record_number #> mapping .ac_study_number to admin.consented_record_number #> mapping .ph_7_35 to haem.blood_gas_ph #> mapping .glucose to haem.glucose #> mapping .albumin to haem.albumin #> mapping .wcc to haem.white_cell_count #> mapping .eos to haem.eosinophils #> mapping .hb to haem.haemoglobin #> mapping .haematocrit to haem.haemotocrit #> mapping .pmn to haem.neutrophils #> mapping .lymphocytes to haem.lymphocytes #> mapping .crp to haem.crp #> mapping .na_result to haem.sodium #> mapping .ur_result to haem.urea #> mapping .egfr to haem.egfr #> mapping .sars_cov2_antigen to haem.sars_cov2_antigen #> could not process column or column set sars_cov2_antigen due to In argument: `haem.sars_cov2_antigen = dplyr::if_else(...)`. #> mapping .ferritin to haem.ferritin #> mapping .troponin to haem.troponin #> mapping .nt_probnp to haem.pro_bnp #> mapping .d_dimer to haem.d_dimer #> mapping .patient_blood_group to haem.blood_group #> Mapped 26 columns #> Did not map 3731 columns augHaem = normHaem %>% augment_data() #> Augmenting data using: augment.avoncap_export.central.haem #> caching item: ~/.cache/avoncap/augment-4c0c0c577381837fb7b8ee36b440288a-ccba24d52b63e86cece394b7a8426a76.rda #> Created haem.troponin_level, haem.crp_level, haem.white_cell_count_level, haem.d_dimer_level, haem.pro_bnp_level using: haem.troponin, haem.crp, haem.white_cell_count, haem.d_dimer, haem.pro_bnp  augHaem %>% xglimpse(haem.troponin_level, haem.d_dimer_level) #>                   haem.troponin_level #> haem.d_dimer_level   ≤18   >18 Unknown #>            ≤0.5      351    64     319 #>            >0.5      943   596    1054 #>            Unknown  7018  7906   25068 augHaem %>% xglimpse(haem.crp_level, haem.white_cell_count_level) #>                            haem.crp_level #> haem.white_cell_count_level   <10 10-50   >50 Unknown #>                     ≤10      6948  8248  6805     419 #>                     >10      3550  5758 10997     182 #>                     Unknown    22    22    24     344  # x = augHaem %>% summary() # t(x)"},{"path":"/articles/web/avoncap.html","id":"augmenting-the-central-database","dir":"Articles > Web","previous_headings":"","what":"Augmenting the central database","title":"Getting started","text":"","code":"# devtools::load_all() augData2 = normData2 %>% avoncap::augment_data() #> Augmenting data using: augment.avoncap_export.central #> caching item: ~/.cache/avoncap/augment-4c0c0c577381837fb7b8ee36b440288a-65399790dc5ad3083d2a26ea2f3e391f.rda #> Created outcome.admitted_to_hospital using: #> Created demog.age_category, demog.age_eligible, admission.cci_category, admission.cci_category_alternate, admission.rockwood_category, admission.curb_65_category using: demog.age, admission.charlson_comorbidity_index, admission.rockwood_score, admission.curb_65_severity_score #> Created admin.patient_identifier using: admin.first_record_number, admin.record_number #> Created admission.episode, admission.interval using: admission.date #> Skipping function due to error: In argument: `admin.linked_gp_practice = ~...`. #> Created admin.catchment_status using: admin.gp_practice #> Created comorbid.diabetes_type, comorbid.solid_cancer_present, comorbid.haemotological_cancer_present, comorbid.any_cancer_present, comorbid.any_chronic_lung_disease, comorbid.any_chronic_heart_disease, comorbid.cva_or_tia, comorbid.any_immune_compromise using: comorbid.diabetes, comorbid.solid_cancer, comorbid.leukaemia, comorbid.lymphoma, comorbid.no_haemotological_cancer, comorbid.asthma, comorbid.bronchiectasis, comorbid.chronic_pleural_dx, comorbid.copd, comorbid.interstitial_lung_dx, comorbid.cystic_fibrosis, comorbid.other_chronic_resp_dx, comorbid.pulmonary_hypertension, comorbid.ccf, comorbid.ihd, comorbid.previous_mi, comorbid.congenital_heart_dx, comorbid.hypertension, comorbid.af, comorbid.other_arrythmia, comorbid.other_heart_dx, comorbid.other_other_heart_dx, comorbid.cva, comorbid.tia, comorbid.immunodeficiency, admission.on_immunosuppression #> Created admission.initial_presentation_3_class using: admission.presumed_CAP_clinically_confirmed, admission.presumed_CAP_radiologically_confirmed, admission.presumed_CAP_no_radiology, admission.presumed_Empyema_or_abscess, admission.presumed_LRTI, admission.presumed_exacerbation_COPD, admission.presumed_exacerbation_non_COPD, admission.presumed_congestive_heart_failure #> Created admission.hospital_acquired, admission.days_before_enrollment using: admission.hospital_acquired_covid, admission.non_lrtd_hospital_acquired_covid, admission.date, admin.enrollment_date #> Created admission.covid_pcr_result, admission.is_covid using: diagnosis.covid_19_diagnosis, diagnosis.admission_swab, diagnosis.test_type #> Created diagnosis.pneumonia, diagnosis.LRTI, diagnosis.exacerbation_of_chronic_respiratory_disease, diagnosis.heart_failure using: diagnosis.SOC_CAP_clinically_confirmed, diagnosis.SOC_CAP_radiologically_confirmed, diagnosis.SOC_CAP_no_radiology, diagnosis.SOC_Empyema_or_abscess, admission.cxr_pneumonia, diagnosis.SOC_LRTI, diagnosis.SOC_exacerbation_COPD, diagnosis.SOC_exacerbation_non_COPD, diagnosis.SOC_congestive_heart_failure #> Created admission.infective_cause using: diagnosis.SOC_non_infectious_process, diagnosis.SOC_non_LRTI #> Created admission.category, admission.presentation_3_class using: #> Created diagnosis.infection_context using: admission.hospital_acquired_covid, admission.non_lrtd_hospital_acquired_covid, diagnosis.first_COVID_positive_swab_date, admission.date #> Created genomic.variant_inferred using: genomic.variant, admission.date #> Created symptom_onset.date_of_symptoms, symptom_onset.time_of_symptoms_since_first_vaccine_dose, symptom_onset.time_of_symptoms_since_second_vaccine_dose, symptom_onset.time_of_symptoms_since_third_vaccine_dose, symptom_onset.time_of_symptoms_since_fourth_vaccine_dose, vaccination.dose_interval, vaccination.booster_interval, vaccination.second_booster_interval using: admission.date, admission.duration_symptoms, admission.time_since_first_vaccine_dose, admission.time_since_second_vaccine_dose, admission.time_since_third_vaccine_dose, admission.time_since_fourth_vaccine_dose #> Created vaccination.protection using: vaccination.covid_vaccination, admission.time_since_fourth_vaccine_dose, admission.duration_symptoms, admission.time_since_third_vaccine_dose, admission.time_since_second_vaccine_dose, admission.time_since_first_vaccine_dose, admission.previous_covid_infection #> Created vaccination.vaccination using: vaccination.covid_vaccination, admission.time_since_sixth_vaccine_dose, admission.duration_symptoms, admission.time_since_fifth_vaccine_dose, admission.time_since_fourth_vaccine_dose, admission.time_since_third_vaccine_dose, admission.time_since_second_vaccine_dose, admission.time_since_first_vaccine_dose #> Created vaccination.brand_combination using: vaccination.first_dose_brand, vaccination.second_dose_brand, vaccination.third_dose_brand #> Created pneumo.presentation_CAP, pneumo.presentation_RAD, pneumo.presentation_class using: diagnosis.SOC_CAP_radiologically_confirmed #> Created admission.pneumococcal_high_risk using: demog.age, comorbid.other_pneumococcal_risks, comorbid.copd, comorbid.interstitial_lung_dx, comorbid.cystic_fibrosis, comorbid.hypertension, comorbid.ccf, comorbid.ihd, comorbid.ckd, comorbid.liver_disease, comorbid.diabetes, comorbid.immunodeficiency, comorbid.asthma, admission.on_immunosuppression #> Created admission.pneumococcal_risk_classification using: comorbid.cva, comorbid.immunodeficiency, comorbid.leukaemia, comorbid.lymphoma, comorbid.no_haemotological_cancer, admission.on_immunosuppression, comorbid.transplant_recipient, comorbid.ckd, comorbid.HIV, comorbid.solid_cancer, demog.care_home_resident, demog.smoker, demog.age, demog.alcohol_abuse, comorbid.diabetes, comorbid.diabetes_medications, comorbid.paraplegia, comorbid.copd, comorbid.interstitial_lung_dx, comorbid.cystic_fibrosis, comorbid.asthma, comorbid.liver_disease, comorbid.ccf, comorbid.ihd, comorbid.other_pneumococcal_risks #> Created day_7.WHO_clinical_progression, outcome.WHO_clinical_progression using: day_7.death, day_7.max_ventilation_level, day_7.ionotropes_needed, day_7.max_o2_level, outcome.survival_duration, outcome.functional_status, outcome.highest_level_ventilatory_support, outcome.received_ionotropes, outcome.respiratory_support_needed #> Created outcome.icu_admission, outcome.death_within_30_days, outcome.death_within_1_year, outcome.death_during_follow_up using: outcome.icu_duration, day_7.death, outcome.survival_duration, outcome.one_year_survival_duration, outcome.one_year_survival_complete, outcome.inpatient_death, outcome.functional_status #> Created survival.length_of_stay, survival.uncensored_time_to_death, survival.last_observed_event using: admin.enrollment_date, outcome.length_of_stay, outcome.survival_duration, outcome.one_year_survival_duration, admission.date #> Created survival.length_of_stay_category, survival.30_day_death_time, survival.30_day_death_event, survival.1_yr_death_time, survival.1_yr_death_event, survival.30_day_discharge_time, survival.30_day_discharge_event using: #> Created survival.length_of_stay_quintile using: #> Created day_7.max_o2_gt_28, day_7.max_o2_gt_35, day_7.max_o2_gt_50, day_7.WHO_score_gt_6, day_7.WHO_score_gt_5, day_7.los_gt_3, day_7.los_gt_5, day_7.los_gt_7 using: day_7.max_o2_level, day_7.length_of_stay, outcome.survival_duration #> Created  using: #> Created admission.pre_admission_antivirals_given using: admission.pre_admission_antiviral  augData2 %>% xglimpse(admission.category,  admission.presentation_3_class) #>                               admission.category #> admission.presentation_3_class Confirmed SARS-CoV-2 No evidence SARS-CoV-2 #>               Pneumonia                        6038                  14882 #>               NP-LRTI                          5820                   9406 #>               No evidence LRTI                   75                      0 #>               <NA>                                0                      0 #>                               admission.category #> admission.presentation_3_class Non-infective  <NA> #>               Pneumonia                    0     0 #>               NP-LRTI                      0     0 #>               No evidence LRTI          7098     0 #>               <NA>                         0  2158 augData2 %>% xglimpse(admission.covid_pcr_result,  admission.presentation_3_class) #>                               admission.covid_pcr_result #> admission.presentation_3_class SARS-CoV-2 PCR negative SARS-CoV-2 PCR positive #>               Pneumonia                          13482                    5981 #>               NP-LRTI                             8291                    5741 #>               No evidence LRTI                    5690                      62 #>               <NA>                                   0                       0 #>                               admission.covid_pcr_result #> admission.presentation_3_class  <NA> #>               Pneumonia         1457 #>               NP-LRTI           1194 #>               No evidence LRTI  1421 #>               <NA>              2158 augData2 %>% xglimpse(admission.infective_cause,  admission.presentation_3_class) #>                               admission.infective_cause #> admission.presentation_3_class Non-infective Infective  <NA> #>               Pneumonia                    0     20920     0 #>               NP-LRTI                      0     15226     0 #>               No evidence LRTI          7098        75     0 #>               <NA>                         0         0  2158 augData2 %>% xglimpse(admission.infective_cause,  admission.is_covid) #>                         admission.infective_cause #> admission.is_covid       Non-infective Infective  <NA> #>   Confirmed SARS-CoV-2               0     11933     0 #>   No evidence SARS-CoV-2          7098     24288     0 #>   <NA>                               0         0  2158  augData2 %>% xglimpse(admin.consent_withheld, admission.presentation_3_class) #>                               admin.consent_withheld #> admission.presentation_3_class    no   yes #>               Pneumonia        20920     0 #>               NP-LRTI          15226     0 #>               No evidence LRTI  7173     0 #>               <NA>                 0  2158 augData2 %>% xglimpse(admin.consent_withheld, admin.catchment_status) #>                       admin.consent_withheld #> admin.catchment_status    no   yes #>   Bristol area         39216     0 #>   Outside Bristol area  3975     0 #>   No GP details          128  2158  augData2 %>% xglimpse(admin.consented, admin.catchment_status) #>                       admin.consented #> admin.catchment_status Not approached   Yes Declined consent  <NA> #>   Bristol area                  19516 19700                0     0 #>   Outside Bristol area           1933  2042                0     0 #>   No GP details                   201   130             1948     7   augData2 %>% filter(admission.pre_admission_antivirals_given == \"yes\") %>% unnest(admission.pre_admission_antiviral) %>% filter(given==\"yes\") %>%    # with(table(pathogen, virol.test_type,  useNA = \"always\")) %>%    group_by(antiviral) %>%   count() %>% arrange(desc(n)) #> # A tibble: 5 × 2 #> # Groups:   antiviral [5] #>   antiviral                    n #>   <fct>                    <int> #> 1 Other                    30169 #> 2 Oseltamivir or Zanamivir    31 #> 3 Paxlovid                     9 #> 4 Sotrovimab                   6 #> 5 Molnupiravir                 3"},{"path":"/articles/web/denominator-check.html","id":"background","dir":"Articles > Web","previous_headings":"","what":"Background","title":"AvonCAP study population denominator","text":"AvonCAP study based 2 acute hospitals Bristol. Bristol Royal Infirmary (BRI) Southmead hospital. BRI part University Hospitals Bristol Weston NHS Foundation Trust (UHBWFT), Southmead part North Bristol NHS trust (NBT). University Hospitals Bristol Weston NHS Foundation Trust also includes Weston General Hospital part study. trusts part Bristol, North Somerset South Gloucestershire Integrated Care Board (BNSSG ICB) (previously Clinical Commissioning Group). purpose supplementary paper compare different methods estimating study catchment area, population denominator, assess effect ageing population study period, create time varying estimates population denominator take account population trends study period.","code":""},{"path":[]},{"path":"/articles/web/denominator-check.html","id":"proportional-flow---alrtd-admissions-general-practice-populations","dir":"Articles > Web","previous_headings":"Methods","what":"Proportional flow - aLRTD admissions / General practice populations","title":"AvonCAP study population denominator","text":"catchment area AvonCAP study previously estimated [1] using proportional flow model linking GP surgeries within BNSSG ICB study hospitals based proportion patients presenting acute lower respiratory tract disease (aLRTD) surgery attended study hospital 2017 2019, stratified age. also collected information patients BNSSG aLRTD go non-study hospitals Weston General. brief, hospital admission data linked aggregated GP practice patient registration data within BNSSG Clinical Commissioning Group 2017–2019. proportion GP practices’ aLRTD hospitalisations occurred specific study hospital multiplied patient registration count six age groups obtain practices’ contribution hospital’s denominator (e.g., 50% GP practice admissions specific study hospital among individuals aged 50−64y, practice contributed half patients aged 50–64y denominator). registered population general practices available NHS England [2] population October 2019 used baseline population. Due patients admitted study hospitals within 2017-2019 time period minor amount double counting method pragmatically addressed truncating combined proportion 2 study hospitals 1. Hospital admissions aLRTD 2017 2019 stratified age group patients registered GP surgeries BNSSG ICB area.","code":""},{"path":"/articles/web/denominator-check.html","id":"proportional-flow---nhs-trust-emergency-admissions-middle-super-output-areas","dir":"Articles > Web","previous_headings":"Methods","what":"Proportional flow - NHS Trust Emergency admissions / Middle super output areas","title":"AvonCAP study population denominator","text":"2022 Office Health Inequalities Disparity (OHID) produced another proportional flow model linking Middle Super Output Area (MSOA) small scale geographical areas NHS trusts. included NHS Trusts run study hospitals, used hospital episode statistics describing general emergency hospital admissions stratified age sex [3]. Adapting OHID model get estimate AvonCAP study population made difficult fact 1:1 relationship NHS trusts study hospitals. used admissions data collected development aLRTD model generate scaling factors relate proportion admissions NHS trust admissions study hospitals stratified age. can used attribute estimated catchment area NHS trusts OHID model AvonCAP study hospitals, scaling University Hospital Bristol NHS trust estimate account patients go Weston General rather Bristol Royal Infirmary. OHID data published 5 year age group. interpolated aggregated age bands AvonCAP study. aLRTD admissions typically emergencies focus OHID catchment area based emergency admissions; OHID model includes forms emergency admission specific aLRTD. Scaling factors NHS Trust based catchment areas adjust admissions non study hospitals.","code":""},{"path":"/articles/web/denominator-check.html","id":"label-propagation","dir":"Articles > Web","previous_headings":"Methods","what":"Label propagation","title":"AvonCAP study population denominator","text":"Challen et . (2022) [4] developed method estimating catchment areas using label propagation takes input number beds hospitals population sizes small geographical regions estimate catchment area level individual hospitals, optimising supply (beds) demand (population). able generate catchment area two study hospitals without including Weston General Hospital, uses ONS population data 2019 hospital bed capacity data COVID pandemic. label propagation method specific age group condition, catchment population simply people within geographic area.","code":""},{"path":"/articles/web/denominator-check.html","id":"projecting-forwards","dir":"Articles > Web","previous_headings":"Methods","what":"Projecting forwards","title":"AvonCAP study population denominator","text":"ONS publishes population projections UK different levels granularity. Regionally population South West projected grow 0.9% 2021 2022 [5]. Age stratified populations also influenced ageing “baby boomer” generation, particular growth expected 75-84 age group. Projections based 2019 population data, take account COVID-19 pandemic. GP registration data available [2] describes demographics practice monthly interval. can also used describe population trends retrospectively. Although aLTRD proportional flow method described [1] represents population individual GP surgeries, theory used track demographic changes individual surgeries aver time, simple study several GP practices merged become single entity. easy way track proportional flow patients merged practices, hence correctly distribute proportions old new. simplifying assumption made age stratified population trends aggregate GP surgeries within BNSSG ICB, representative population trends study hospitals. therefore use relative trends GP registration details practices BNSSG ICB scale baseline 2019 estimated catchment population study hospitals using 3 estimation methods . Real time GP registrations (solid line) ONS population projections based 2018 data (points) AvonCAP study period percentage change 2019 baseline. ONS estimates take account effects COVID-19 pandemic age stratified relative population increases shown statistical noise younger age groups seasonality visible despite resolution data 3 monthly. ONS data plotted comparison suggests -estimation older age groups compared younger. result pandemic. data, initial 2019 populations estimated using 3 methods, age stratified daily denominator spans whole study period generated using locally fitted polynomial span 0.75 degree 2 [6].","code":""},{"path":"/articles/web/denominator-check.html","id":"results","dir":"Articles > Web","previous_headings":"","what":"Results","title":"AvonCAP study population denominator","text":"3 models aLRTD proportional flow model (Campling 2019) label propagation models (Challen 2019) generate catchment populations similar sizes, moderately different population composition. OHID emergency admissions proportional flow model produces catchment population overall 15% larger (4.2% 24.4% depending age group) aLRTD proportional flow model, used referent. catchment area used denominator calculations adjust population size, example incidence calculations use OHID estimates smaller using aLRTD proportional flow estimates. Comparison 3 different catchment population estimates, valid 2019: aLRTD proportional flow (Campling 2019); OHID emergency admissions proportional flow (OHID) label propagation methods (Challen 2019). Numbers represent estimated catchment population study hospitals brackets percentage change aLRTD proportional flow model baseline. principal cause difference can seen map OHID proportional flow versus boundaries BNSSG ICB. Emergency admissions NHS trusts containing study hospitals arise wide area across South West England due role tertiary referral centres. aLRTD proportional flow model excludes GP surgeries outside BNSSG ICB region; reported contain less 5% aLTRD admissions study hospitals. difference 2 models may explained partly less specific range emergency conditions OHID model including tertiary referrals cardio-thoracic surgery trauma, tend increase OHID model estimates, partly aLRTD model limited BNSSG ICB, tend reduce estimates aLRTD model. Comparison geographical extents OHID proportional flow model (blue shading) BNSSG ICB boundaries (red), also mark maximum extent aLRTD proportional flow model.","code":""},{"path":"/articles/web/denominator-check.html","id":"changes-over-time","dir":"Articles > Web","previous_headings":"Results","what":"Changes over time","title":"AvonCAP study population denominator","text":"Using aLRTD proportional flow model, projecting population trends GP registration data onto 2019 estimates, shows 5.7% population increase study period implies quite marked shifts age groupings, particularly 15.5% increase 75-84 group due ageing population. Forward projection 2019 aLTRD proportional flow catchment populations age group using GP registration data cover AvonCAP study period. Interpolation shifts allows us estimate daily denominators, stratified age group, 3 different methods whole study period. denominators can used calculating population standardised incidence rates. incidence disease AvonCAP study can calculated daily count new cases divided per day denominator, give daily rate per capita. can summed year, example, multiplied 1000 give incidence per 1000 person years (100,000 estimates per 100,000 per year). Using number daily cases per day numerator, daily estimated population size denominator, binomial regression model can fitted time varying rate produce normalised daily incidence rate per capita. can multiplied number days year 1000 produce instantaneous incidence per 1000 person years. similar calculation can done weekly case counts; reasonable assume per day denominator start week. Age group stratified smoothed catchment population estimates duration AvonCAP study.","code":""},{"path":"/articles/web/denominator-check.html","id":"conclusion","dir":"Articles > Web","previous_headings":"","what":"Conclusion","title":"AvonCAP study population denominator","text":"previously reported aLRTD specific denominator AvonCAP year 2019 [1]. benefit specific condition central AvonCAP study, therefore account specialist services offered study hospitals. age group including adults, estimate agrees well produced label propagation algorithm [4], differences arising distribution ages population. label propagation algorithm attempt account differential burden disease different age groups condition specific. third estimate using proportion flow emergency admissions [3], produces estimates somewhat larger aLRTD specific denominator. include admissions wide geographic area, represent hospital hospital transfers tertiary care facilities based Bristol, trauma patients retrieved helicopter. estimates based 2019 changed AvonCAP study period due ageing population UK. supplementary present time varying age stratified population size estimates can used denominator produce generalisable estimates incidence. single population estimate can proven correct, although think aLRTD specific estimate likely accurate AvonCAP, particularly can exclude patients live outside BNSSG ICB. therefore assume daily varying, age stratified aLRTD specific population estimates AvonCAP denominator.","code":""},{"path":[]},{"path":"/articles/web/ed-data.html","id":"input-data-location","dir":"Articles > Web","previous_headings":"","what":"Input data location","title":"The emergency department data set","text":"first level directories. Filenames need indication database year (either 20-21,21-22,… y1,y2,…)","code":"# The data input directory on my development machine: options(\"avoncap.input\" = \"~/Data/avoncap/\") avoncap::most_recent_files(\"avoncap-export\",\"ed\") #> # A tibble: 1 × 7 #>   filename directory      path           date       hospital study_year filetype #>   <chr>    <chr>          <fs::path>     <date>     <chr>         <int> <chr>    #> 1 ed_y3    avoncap-export …-03/ed_y3.csv 2024-10-03 NA                3 csv rawData = avoncap::load_data(\"avoncap-export\",\"ed\") #> caching item: ~/.cache/avoncap/data-6c0a3f301ee14020e3907a7472c55225-dd5ed475c3e320951a881834a7e14565.rda #> Loaded 2443 rows from 1 files, (2443=2443) norm = avoncap::normalise_data(rawData,.nocache=TRUE) #> Normalising data using: normalise.avoncap_export.ed #> Admission date is derived from study week and hence approximate. #> Some columns expected in the mappings were not present: ac_study_number, nhs_number, admission_type, c19_diagnosis, c19_adm_swab, c19_test_type, cc_critieria, cc_pos_date, age_march, ethnicity2, hapcovid_screening, hospital_covid, np_swab, adm_np_type, np_date, days_adm_npswab, np_swab_2, adm_np_type_2, np_date_2, np_swab_3, adm_np_type_3, np_date_3, saliva, saliva_date, days_adm_saliva, sputum, sputum_date, days_adm_sputum, pt_ad_ur, adm_ur_taken, nourine_reason, adm_np_type_2, adm_ur_date, days_adm_urine, adm_serum_tak, adm_seru_date, days_adm_serum, covidvax_date, covidvax_dose_2, covidvax_dose_3, covidvax_dose_4, covidvax_dose_5, covidvax_dose_6, flu_date, ppv23_date, c19_variant, adm_diagnosis, previousinfection_date, height, weight, bmi, first_radio, c19_peep, c19_hospadm, c17_high, c19icuon, c19_icudays, c19_vent, c19_ox, c19_ionotropes, c19_complication, c19_death7d, c19_meds, ip_death, days_in_icu, did_the_patient_have_respi, number_of_days_of_ventilat, ett_days, renal_replacement_therapy, complications, ventilatory_support, did_the_patient_receive_ec, inotropic_support_required, anosmia, ageusia, dysgeusia, malaise, myalgia, worse_confusion, general_det, antiplatelets, anticoagulants, statins, hypertensives #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-74eba42fb17d78e88e3e9ed4a0a389f1.rda #> mapping .optout to admin.opted_out #> mapping .record_number to admin.record_number #> mapping .what_was_the_first_surveil to admin.first_record_number #> the input data set does not have a ac_study_number column (or column set) #> the input data set does not have a nhs_number column (or column set) #> mapping .duplicate to admin.duplicate #> mapping .enrollment_date to admin.enrollment_date #> the input data set does not have a admission_type column (or column set) #> mapping .study_year to admin.study_year #> mapping .file to admin.data_file #> mapping .week_number to admin.week_number #> the input data set does not have a c19_diagnosis column (or column set) #> mapping .clinical_radio_diagnosis to diagnosis.clinical_or_radiological_LRTI_or_pneumonia #> the input data set does not have a c19_adm_swab column (or column set) #> the input data set does not have a c19_test_type column (or column set) #> mapping .qualifying_symptoms_signs to diagnosis.qualifying_symptoms_signs #> the input data set does not have a cc_critieria column (or column set) #> the input data set does not have a cc_pos_date column (or column set) #> mapping .gender to demog.gender #> mapping .age_at_admission to demog.age #> the input data set does not have a age_march column (or column set) #> mapping .imd to demog.imd_decile #> mapping .gp_practice to admin.gp_practice_old #> mapping .gp_practice_drop_down to admin.gp_practice #> mapping .smoking to demog.smoker #> the input data set does not have a ethnicity2 column (or column set) #> mapping .care_home to demog.care_home_resident #> the input data set does not have a hapcovid_screening column (or column set) #> the input data set does not have a hospital_covid column (or column set) #> mapping .drugs___1 to demog.no_drug_abuse #> mapping .drugs___2 to demog.alcohol_abuse #> mapping .drugs___3 to demog.ivdu_abuse #> mapping .drugs___4 to demog.marijuana_abuse #> mapping .drugs___5 to demog.other_inhaled_drug_abuse #> mapping .vaping to demog.vaping #> mapping .alc_units to demog.units_of_alcohol #> the input data set does not have a np_swab column (or column set) #> the input data set does not have a adm_np_type column (or column set) #> the input data set does not have a np_date column (or column set) #> the input data set does not have a days_adm_npswab column (or column set) #> the input data set does not have a np_swab_2 column (or column set) #> the input data set does not have a adm_np_type_2 column (or column set) #> the input data set does not have a np_date_2 column (or column set) #> the input data set does not have a np_swab_3 column (or column set) #> the input data set does not have a adm_np_type_3 column (or column set) #> the input data set does not have a np_date_3 column (or column set) #> the input data set does not have a saliva column (or column set) #> the input data set does not have a saliva_date column (or column set) #> the input data set does not have a days_adm_saliva column (or column set) #> the input data set does not have a sputum column (or column set) #> the input data set does not have a sputum_date column (or column set) #> the input data set does not have a days_adm_sputum column (or column set) #> the input data set does not have a pt_ad_ur column (or column set) #> the input data set does not have a adm_ur_taken column (or column set) #> the input data set does not have a nourine_reason column (or column set) #> the input data set does not have a adm_np_type_2 column (or column set) #> the input data set does not have a adm_ur_date column (or column set) #> the input data set does not have a days_adm_urine column (or column set) #> the input data set does not have a adm_serum_tak column (or column set) #> the input data set does not have a adm_seru_date column (or column set) #> the input data set does not have a days_adm_serum column (or column set) #> mapping .contraindication to vaccination.covid_vaccine_contraindicated #> mapping .covid19_vax to vaccination.covid_vaccination #> the input data set does not have a covidvax_date column (or column set) #> the input data set does not have a covidvax_dose_2 column (or column set) #> the input data set does not have a covidvax_dose_3 column (or column set) #> the input data set does not have a covidvax_dose_4 column (or column set) #> the input data set does not have a covidvax_dose_5 column (or column set) #> the input data set does not have a covidvax_dose_6 column (or column set) #> mapping .brand_of_covid19_vaccinati to vaccination.first_dose_brand #> mapping .covid19vax_brand_2 to vaccination.second_dose_brand #> mapping .covid19vax_brand_3 to vaccination.third_dose_brand #> mapping .covid19vax_brand_4 to vaccination.fourth_dose_brand #> mapping .covid19vax_brand_5 to vaccination.fifth_dose_brand #> mapping .covid19vax_brand_6 to vaccination.sixth_dose_brand #> mapping .c19vaxd1_adm to admission.time_since_first_vaccine_dose #> mapping .c19vaxd2_adm to admission.time_since_second_vaccine_dose #> mapping .c19vaxd3_adm to admission.time_since_third_vaccine_dose #> mapping .c19vaxd4_adm to admission.time_since_fourth_vaccine_dose #> mapping .c19vax5_adm to admission.time_since_fifth_vaccine_dose #> mapping .c19vax6_adm to admission.time_since_sixth_vaccine_dose #> the input data set does not have a flu_date column (or column set) #> mapping .fluvax_adm_d1 to admission.time_since_last_flu_vaccine_dose #> the input data set does not have a ppv23_date column (or column set) #> mapping .ppv23vax_adm_d to admission.time_since_last_pneumococcal_vaccine_dose #> the input data set does not have a c19_variant column (or column set) #> mapping .year to admission.year #> mapping .study_week to admission.study_week #> mapping .admission_date to admission.date #> mapping .hospital to admin.hospital #> the input data set does not have a adm_diagnosis column (or column set) #> mapping .ics to admission.on_inhaled_corticosteroids #> mapping .immsup to admission.on_immunosuppression #> mapping .psi_class to admission.pneumonia_severity_index_class #> mapping .crb_test_mai to admission.curb_65_severity_score #> mapping .news_2_total to admission.news2_score #> mapping .pulse_ox to admission.oximetry #> mapping .rr to admission.respiratory_rate #> mapping .fio2 to admission.max_oxygen #> mapping .systolic_bp to admission.systolic_bp #> mapping .diastolic_bp to admission.diastolic_bp #> mapping .hr to admission.heart_rate #> mapping .temperature to admission.temperature #> mapping .symptom_days_preadmit to admission.duration_symptoms #> mapping .previous_infection to admission.previous_covid_infection #> the input data set does not have a previousinfection_date column (or column set) #> mapping .c19d_preadm to admission.time_since_covid_diagnosis #> mapping .rockwood to admission.rockwood_score #> mapping .cci_total_score to admission.charlson_comorbidity_index #> the input data set does not have a height column (or column set) #> the input data set does not have a weight column (or column set) #> the input data set does not have a bmi column (or column set) #> the input data set does not have a first_radio column (or column set) #> the input data set does not have a c19_peep column (or column set) #> the input data set does not have a c19_hospadm column (or column set) #> the input data set does not have a c17_high column (or column set) #> the input data set does not have a c19icuon column (or column set) #> the input data set does not have a c19_icudays column (or column set) #> the input data set does not have a c19_vent column (or column set) #> the input data set does not have a c19_ox column (or column set) #> the input data set does not have a c19_ionotropes column (or column set) #> the input data set does not have a c19_complication column (or column set) #> the input data set does not have a c19_death7d column (or column set) #> the input data set does not have a c19_meds column (or column set) #> mapping .hospital_length_of_stay to outcome.length_of_stay #> mapping .survival_days to outcome.survival_duration #> the input data set does not have a ip_death column (or column set) #> the input data set does not have a days_in_icu column (or column set) #> the input data set does not have a did_the_patient_have_respi column (or column set) #> the input data set does not have a number_of_days_of_ventilat column (or column set) #> the input data set does not have a ett_days column (or column set) #> the input data set does not have a renal_replacement_therapy column (or column set) #> the input data set does not have a complications column (or column set) #> the input data set does not have a ventilatory_support column (or column set) #> the input data set does not have a did_the_patient_receive_ec column (or column set) #> the input data set does not have a inotropic_support_required column (or column set) #> mapping .lrtd_30d_outcome to outcome.functional_status #> mapping .survive_1yr to outcome.one_year_survival #> mapping .survival_1yr_days to outcome.one_year_survival_duration #> mapping .yr_survival_complete to outcome.one_year_survival_complete #> mapping .fever2 to symptom.abnormal_temperature #> mapping .pleurtic_cp to symptom.pleuritic_chest_pain #> mapping .cough2 to symptom.cough #> mapping .sput_prod to symptom.productive_sputum #> mapping .dyspnoea to symptom.dyspnoea #> mapping .tachypnoea2 to symptom.tachypnoea #> mapping .confusion to symptom.confusion #> the input data set does not have a anosmia column (or column set) #> the input data set does not have a ageusia column (or column set) #> the input data set does not have a dysgeusia column (or column set) #> mapping .fever to symptom.fever #> mapping .hypothermia to symptom.hypothermia #> mapping .chills to symptom.chills #> mapping .headache to symptom.headache #> the input data set does not have a malaise column (or column set) #> mapping .wheeze to symptom.wheeze #> the input data set does not have a myalgia column (or column set) #> the input data set does not have a worse_confusion column (or column set) #> the input data set does not have a general_det column (or column set) #> mapping .ox_on_admission to symptom.oxygen_required_on_admission #> mapping .resp_disease___1 to comorbid.no_resp_dx #> mapping .resp_disease___2 to comorbid.copd #> mapping .resp_disease___3 to comorbid.asthma #> mapping .resp_disease___4 to comorbid.resp_other #> mapping .other_respiratory_disease___1 to comorbid.bronchiectasis #> mapping .other_respiratory_disease___2 to comorbid.interstitial_lung_dx #> mapping .other_respiratory_disease___3 to comorbid.cystic_fibrosis #> mapping .other_respiratory_disease___4 to comorbid.pulmonary_hypertension #> mapping .other_respiratory_disease___5 to comorbid.chronic_pleural_dx #> mapping .other_respiratory_disease___6 to comorbid.other_chronic_resp_dx #> mapping .chd___1 to comorbid.no_heart_dx #> mapping .chd___2 to comorbid.ccf #> mapping .chd___3 to comorbid.ihd #> mapping .chd___4 to comorbid.hypertension #> mapping .chd___5 to comorbid.other_heart_dx #> mapping .mi to comorbid.previous_mi #> mapping .other_chd___1 to comorbid.congenital_heart_dx #> mapping .other_chd___2 to comorbid.af #> mapping .other_chd___3 to comorbid.other_arrythmia #> mapping .other_chd___4 to comorbid.pacemaker #> mapping .other_chd___5 to comorbid.valvular_heart_dx #> mapping .other_chd___6 to comorbid.other_other_heart_dx #> mapping .diabetes to comorbid.diabetes #> mapping .dm_meds to comorbid.diabetes_medications #> mapping .neurological_disease___1 to comorbid.neuro_other #> mapping .neurological_disease___2 to comorbid.cva #> mapping .neurological_disease___3 to comorbid.tia #> mapping .neurological_disease___4 to comorbid.hemiplegia #> mapping .neurological_disease___5 to comorbid.paraplegia #> mapping .neurological_disease___6 to comorbid.no_neuro_dx #> mapping .dementia___1 to comorbid.no_dementia #> mapping .dementia___2 to comorbid.dementia #> mapping .dementia___3 to comorbid.cognitive_impairment #> mapping .cancer to comorbid.solid_cancer #> mapping .haem_malig___1 to comorbid.no_haemotological_cancer #> mapping .haem_malig___2 to comorbid.leukaemia #> mapping .haem_malig___3 to comorbid.lymphoma #> mapping .ckd to comorbid.ckd #> mapping .liver_disease to comorbid.liver_disease #> mapping .gastric_ulcers to comorbid.gastric_ulcers #> mapping .pvd to comorbid.periph_vasc_dx #> mapping .ctd to comorbid.connective_tissue_dx #> mapping .immunodeficiency to comorbid.immunodeficiency #> mapping .other_pn_disease to comorbid.other_pneumococcal_risks #> mapping .transplant to comorbid.transplant_recipient #> mapping .pregnancy to comorbid.pregnancy #> mapping .hiv___1 to comorbid.no_HIV #> mapping .hiv___2 to comorbid.HIV #> mapping .hiv___3 to comorbid.AIDS #> mapping .final_soc_lrtd_diagnosis___1 to diagnosis.SOC_CAP_radiologically_confirmed #> mapping .final_soc_lrtd_diagnosis___2 to diagnosis.SOC_CAP_clinically_confirmed #> mapping .final_soc_lrtd_diagnosis___3 to diagnosis.SOC_CAP_no_radiology #> mapping .final_soc_lrtd_diagnosis___4 to diagnosis.SOC_LRTI #> mapping .final_soc_lrtd_diagnosis___5 to diagnosis.SOC_Empyema_or_abscess #> mapping .final_soc_lrtd_diagnosis___6 to diagnosis.SOC_exacerbation_COPD #> mapping .final_soc_lrtd_diagnosis___7 to diagnosis.SOC_exacerbation_non_COPD #> mapping .final_soc_lrtd_diagnosis___8 to diagnosis.SOC_congestive_heart_failure #> mapping .final_soc_lrtd_diagnosis___9 to diagnosis.SOC_non_infectious_process #> mapping .final_soc_lrtd_diagnosis___10 to diagnosis.SOC_non_LRTI #> mapping .covid_19_diagnosis to diagnosis.covid_19_diagnosis #> mapping .ppv23 to vaccination.pneumovax #> mapping .flu_vaccine to vaccination.influenza_vaccination #> mapping .abx_14d_prior to admission.pre_admission_antibiotics_given #> the input data set does not have a antiplatelets column (or column set) #> the input data set does not have a anticoagulants column (or column set) #> the input data set does not have a statins column (or column set) #> the input data set does not have a hypertensives column (or column set) #> mapping .ed_hours to outcome.emergency_dept_length_of_stay #> mapping .ed_reattendance to admin.ed_episodes_in_last_30_days #> mapping .hosp_adm_30d to outcome.admitted_within_30_days #> mapping .hosp_adm_7d to outcome.admitted_within_7_days #> mapping .home_d_1 to outcome.days_since_last_ed_episode #> mapping .radiology_result_1___2 to radio.consistent_with_pneumonia_1 #> mapping .radiology_result_2___2 to radio.consistent_with_pneumonia_2 #> Mapped 180 columns #> Did not map 557 columns  aug = avoncap::augment_data(norm,.nocache=TRUE) #> Augmenting data using: augment.avoncap_export.ed #> caching item: ~/.cache/avoncap/augment-4c0c0c577381837fb7b8ee36b440288a-d07cf21403eea5d4a96a91465ebb0fe6.rda #> Created admission.cxr_pneumonia, admission.admission_route, outcome.admitted_to_hospital, outcome.death_within_30_days using: radio.consistent_with_pneumonia_1, radio.consistent_with_pneumonia_2, outcome.functional_status, outcome.survival_duration #> Created demog.age_category, demog.age_eligible, admission.cci_category, admission.cci_category_alternate, admission.rockwood_category, admission.curb_65_category using: demog.age, admission.charlson_comorbidity_index, admission.rockwood_score, admission.curb_65_severity_score #> Created admin.patient_identifier using: admin.first_record_number, admin.record_number #> Created admission.episode, admission.interval using: admission.date #> Skipping function due to error: In argument: `admin.linked_gp_practice = ~...`. #> Created admin.catchment_status using: admin.gp_practice #> Created comorbid.diabetes_type, comorbid.solid_cancer_present, comorbid.haemotological_cancer_present, comorbid.any_cancer_present, comorbid.any_chronic_lung_disease, comorbid.any_chronic_heart_disease, comorbid.cva_or_tia, comorbid.any_immune_compromise using: comorbid.diabetes, comorbid.solid_cancer, comorbid.leukaemia, comorbid.lymphoma, comorbid.no_haemotological_cancer, comorbid.asthma, comorbid.bronchiectasis, comorbid.chronic_pleural_dx, comorbid.copd, comorbid.interstitial_lung_dx, comorbid.cystic_fibrosis, comorbid.other_chronic_resp_dx, comorbid.pulmonary_hypertension, comorbid.ccf, comorbid.ihd, comorbid.previous_mi, comorbid.congenital_heart_dx, comorbid.hypertension, comorbid.af, comorbid.other_arrythmia, comorbid.other_heart_dx, comorbid.other_other_heart_dx, comorbid.cva, comorbid.tia, comorbid.immunodeficiency, admission.on_immunosuppression #> Skipping function due to error: In argument: `admission.initial_presentation_3_class = `%>%`(...)`. #> Skipping function due to error: In argument: `admission.hospital_acquired = `%>%`(...)`. #> Created admission.covid_pcr_result, admission.is_covid using: diagnosis.covid_19_diagnosis #> Created diagnosis.pneumonia, diagnosis.LRTI, diagnosis.exacerbation_of_chronic_respiratory_disease, diagnosis.heart_failure using: diagnosis.SOC_CAP_clinically_confirmed, diagnosis.SOC_CAP_radiologically_confirmed, diagnosis.SOC_CAP_no_radiology, diagnosis.SOC_Empyema_or_abscess, diagnosis.SOC_LRTI, diagnosis.SOC_exacerbation_COPD, diagnosis.SOC_exacerbation_non_COPD, diagnosis.SOC_congestive_heart_failure #> Created admission.infective_cause using: diagnosis.SOC_non_infectious_process, diagnosis.SOC_non_LRTI #> Created admission.category, admission.presentation_3_class using: #> Created diagnosis.infection_context using: admission.date #> Skipping function due to error: In argument: `genomic.variant_inferred = `%>%`(...)`. #> Created symptom_onset.date_of_symptoms, symptom_onset.time_of_symptoms_since_first_vaccine_dose, symptom_onset.time_of_symptoms_since_second_vaccine_dose, symptom_onset.time_of_symptoms_since_third_vaccine_dose, symptom_onset.time_of_symptoms_since_fourth_vaccine_dose, vaccination.dose_interval, vaccination.booster_interval, vaccination.second_booster_interval using: admission.date, admission.duration_symptoms, admission.time_since_first_vaccine_dose, admission.time_since_second_vaccine_dose, admission.time_since_third_vaccine_dose, admission.time_since_fourth_vaccine_dose #> Created vaccination.protection using: vaccination.covid_vaccination, admission.time_since_fourth_vaccine_dose, admission.duration_symptoms, admission.time_since_third_vaccine_dose, admission.time_since_second_vaccine_dose, admission.time_since_first_vaccine_dose, admission.previous_covid_infection #> Created vaccination.vaccination using: vaccination.covid_vaccination, admission.time_since_sixth_vaccine_dose, admission.duration_symptoms, admission.time_since_fifth_vaccine_dose, admission.time_since_fourth_vaccine_dose, admission.time_since_third_vaccine_dose, admission.time_since_second_vaccine_dose, admission.time_since_first_vaccine_dose #> Created vaccination.brand_combination using: vaccination.first_dose_brand, vaccination.second_dose_brand, vaccination.third_dose_brand #> Created pneumo.presentation_CAP, pneumo.presentation_RAD, pneumo.presentation_class using: diagnosis.SOC_CAP_radiologically_confirmed #> Created admission.pneumococcal_high_risk using: demog.age, comorbid.other_pneumococcal_risks, comorbid.copd, comorbid.interstitial_lung_dx, comorbid.cystic_fibrosis, comorbid.hypertension, comorbid.ccf, comorbid.ihd, comorbid.ckd, comorbid.liver_disease, comorbid.diabetes, comorbid.immunodeficiency, comorbid.asthma, admission.on_immunosuppression #> Created admission.pneumococcal_risk_classification using: comorbid.cva, comorbid.immunodeficiency, comorbid.leukaemia, comorbid.lymphoma, comorbid.no_haemotological_cancer, admission.on_immunosuppression, comorbid.transplant_recipient, comorbid.ckd, comorbid.HIV, comorbid.solid_cancer, demog.care_home_resident, demog.smoker, demog.age, demog.alcohol_abuse, comorbid.diabetes, comorbid.diabetes_medications, comorbid.paraplegia, comorbid.copd, comorbid.interstitial_lung_dx, comorbid.cystic_fibrosis, comorbid.asthma, comorbid.liver_disease, comorbid.ccf, comorbid.ihd, comorbid.other_pneumococcal_risks #> Skipping function due to error: In argument: `day_7.WHO_clinical_progression = `%>%`(...)`. #> Skipping function due to error: In argument: `outcome.icu_admission = `%>%`(...)`. #> Created survival.length_of_stay, survival.uncensored_time_to_death, survival.last_observed_event using: admin.enrollment_date, outcome.length_of_stay, outcome.survival_duration, outcome.one_year_survival_duration, admission.date #> Created survival.length_of_stay_category, survival.30_day_death_time, survival.30_day_death_event, survival.1_yr_death_time, survival.1_yr_death_event, survival.30_day_discharge_time, survival.30_day_discharge_event using: #> Created  using: #> Created admission.pre_admission_antivirals_given using: admission.pre_admission_antiviral aug %>% xglimpse(admission.category, admission.presentation_3_class) #>                               admission.category #> admission.presentation_3_class Confirmed SARS-CoV-2 No evidence SARS-CoV-2 #>               Pneumonia                          21                    391 #>               NP-LRTI                           189                   1362 #>               No evidence LRTI                    0                      0 #>                               admission.category #> admission.presentation_3_class Non-infective #>               Pneumonia                    0 #>               NP-LRTI                      0 #>               No evidence LRTI           480 aug %>% xglimpse(pneumo.presentation_class, outcome.admitted_within_30_days) #>                                pneumo.presentation_class #> outcome.admitted_within_30_days No evidence LRTI NP-LRTI CAP+/RAD- CAP+/RAD+ #>                            no                445    1484        78       286 #>                            yes                33      67         7        41 #>                            <NA>                2       0         0         0"},{"path":"/articles/web/gp-data.html","id":"input-data-location","dir":"Articles > Web","previous_headings":"","what":"Input data location","title":"The primary care data set","text":"first level directories. Filenames need indication database year (either 20-21,21-22,… y1,y2,…)","code":"# The data input directory on my development machine: options(\"avoncap.input\" = \"~/Data/avoncap/\") avoncap::most_recent_files(\"avoncap-export\",\"gp\") #> # A tibble: 1 × 7 #>   filename directory      path           date       hospital study_year filetype #>   <chr>    <chr>          <fs::path>     <date>     <chr>         <int> <chr>    #> 1 gp       avoncap-export …-06-28/gp.csv 2023-06-28 NA               NA csv rawData = avoncap::load_data(\"avoncap-export\",\"gp\") #> caching item: ~/.cache/avoncap/data-6c0a3f301ee14020e3907a7472c55225-af71346b3abc76f77c18c3b9100f55f3.rda #> Loaded 5121 rows from 1 files, (5121=5121)"},{"path":"/articles/web/longitudinal-pneumo.html","id":"data-loading","dir":"Articles > Web","previous_headings":"","what":"Data loading","title":"Pneumococcus longitudinal serotype data","text":"raw data expected nhs-extract subfolder","code":"rawPn = avoncap::load_data(\"nhs-extract\",\"pneumococcal\") #> caching item: ~/.cache/avoncap/data-6c0a3f301ee14020e3907a7472c55225-e7f5def26af13823d6fa3194a5398ec4.rda #> Loaded 3719 rows from 1 files, (3719=3719)"},{"path":"/articles/web/longitudinal-pneumo.html","id":"data-normalisation","dir":"Articles > Web","previous_headings":"","what":"Data normalisation","title":"Pneumococcus longitudinal serotype data","text":"","code":"normPn = rawPn %>% normalise_data() #> Normalising data using: normalise.nhs_extract.pneumococcal #> Some columns expected in the mappings were not present: hb #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-db00149fdcf56f727addcd1ec8a73d5e.rda #> mapping .participant_number to admin.record_number #> mapping .hospital to admin.hospital #> mapping .nhs_number to admin.patient_identifier #> mapping .age_at_admission to demog.age #> mapping .sex to demog.gender #> mapping .test_date to pneumo.test_date #> mapping .test to pneumo.test_type #> mapping .serotype to pneumo.phe_serotype #> mapping .smoker to demog.smoker #> mapping .resp_disease___1 to comorbid.no_resp_dx #> mapping .resp_disease___2 to comorbid.copd #> mapping .resp_disease___3 to comorbid.asthma #> mapping .resp_disease___4 to comorbid.bronchiectasis #> mapping .resp_disease___5 to comorbid.pulmonary_fibrosis #> mapping .resp_disease___6 to comorbid.resp_other #> mapping .chd___1 to comorbid.no_heart_dx #> mapping .chd___2 to comorbid.ccf #> mapping .chd___3 to comorbid.ihd #> mapping .chd___4 to comorbid.hypertension #> mapping .chd___5 to comorbid.af #> mapping .chd___6 to comorbid.other_heart_dx #> mapping .mi to comorbid.previous_mi #> mapping .ckd to comorbid.ckd #> mapping .liver_disease to comorbid.liver_disease #> mapping .diabetes to comorbid.diabetes #> mapping .dm_meds to comorbid.diabetes_medications #> mapping .dementia___1 to comorbid.no_dementia #> mapping .dementia___2 to comorbid.dementia #> mapping .dementia___3 to comorbid.cognitive_impairment #> mapping .neurological_disease___1 to comorbid.neuro_other #> mapping .neurological_disease___2 to comorbid.cva #> mapping .neurological_disease___3 to comorbid.tia #> mapping .neurological_disease___4 to comorbid.hemiplegia #> mapping .neurological_disease___5 to comorbid.paraplegia #> mapping .neurological_disease___6 to comorbid.no_neuro_dx #> mapping .gastric_ulcers to comorbid.gastric_ulcers #> mapping .dysphagia to comorbid.dysphagia #> mapping .pvd to comorbid.periph_vasc_dx #> mapping .ctd to comorbid.connective_tissue_dx #> mapping .immunodeficiency to comorbid.immunodeficiency #> mapping .other_pn_disease to comorbid.other_pneumococcal_risks #> mapping .hiv___1 to comorbid.no_HIV #> mapping .hiv___2 to comorbid.HIV #> mapping .hiv___3 to comorbid.AIDS #> mapping .cancer to comorbid.solid_cancer #> mapping .haem_malig___1 to comorbid.no_haemotological_cancer #> mapping .haem_malig___2 to comorbid.leukaemia #> mapping .haem_malig___3 to comorbid.lymphoma #> mapping .recent_chemo to comorbid.recent_chemotherapy #> mapping .recent_radiotherapy to comorbid.recent_radiotherapy #> mapping .transplant to comorbid.transplant_recipient #> mapping .pregnancy to comorbid.pregnancy #> mapping .drugs___1 to demog.no_drug_abuse #> mapping .drugs___2 to demog.alcohol_abuse #> mapping .drugs___3 to demog.ivdu_abuse #> mapping .drugs___4 to demog.marijuana_abuse #> mapping .drugs___5 to demog.other_inhaled_drug_abuse #> mapping .immsup to admission.on_immunosuppression #> mapping .weight_problem to comorbid.bmi_status #> mapping .concomittant_flu to comorbid.influenza_infection #> mapping .hcv to comorbid.hepatitis_c #> mapping .ppv23 to vaccination.ppv23_vaccination #> mapping .flu_vaccine to vaccination.flu #> mapping .cci_total_score to admission.charlson_comorbidity_index #> mapping .los_days to outcome.length_of_stay #> mapping .amts to admission.triage_score #> mapping .resp_rate to admission.respiratory_rate #> mapping .sats_ra to admission.saturations_on_room_air #> mapping .systolic_bp to admission.systolic_bp #> mapping .diastolic_bp to admission.diastolic_bp #> mapping .crb65_score to admission.crb_65_severity_score #> mapping .curb65_score to admission.curb_65_severity_score #> mapping .antibiotic_route to outcome.antibiotic_route #> mapping .antibiotic_days to outcome.antibiotic_duration #> mapping .infection_site to admission.infection_site #> mapping .deranged_lfts to outcome.abnormal_lft #> mapping .aki to outcome.acute_kidney_injury #> mapping .pleural_effusion to outcome.pleural_effusion #> mapping .empyema to outcome.empyema #> mapping .discharge_destination to outcome.discharge_to #> mapping .icu to outcome.admitted_icu #> mapping .niv to outcome.non_invasive_ventilation #> mapping .intubation to outcome.intubation #> mapping .recurrent_pneumonia to outcome.recurrent_pneumonia #> mapping .ecmo to outcome.received_ecmo #> mapping .inotropes to outcome.received_ionotropes #> mapping .trachy to outcome.tracheostomy #> mapping .inpatient_death to outcome.inpatient_death #> mapping .death_30days to outcome.death_within_30_days #> mapping .death_1year to outcome.death_within_1_year #> mapping .survival_days to outcome.survival_duration #> mapping .albumin to haem.albumin #> mapping .wcc to haem.white_cell_count #> the input data set does not have a hb column (or column set) #> mapping .pmn to haem.neutrophils #> mapping .lymphocytes to haem.lymphocytes #> mapping .crp to haem.crp #> mapping .na_result to haem.sodium #> mapping .ur_result to haem.urea #> mapping .egfr to haem.egfr #> mapping .creatinine to haem.creatinine #> mapping .cxr_sides to radio.cxr_infection #> mapping .cxr_lobes to radio.cxr_lobar_changes #> mapping .death_5year to outcome.death_within_5_years #> mapping .survival_days_2 to outcome.5_yr_survival_duration #> mapping .imd_decile to demog.imd_decile #> Mapped 112 columns #> Did not map 69 columns"},{"path":"/articles/web/longitudinal-pneumo.html","id":"augment-the-data","dir":"Articles > Web","previous_headings":"","what":"Augment the data","title":"Pneumococcus longitudinal serotype data","text":"Augmented IPD dataset format: admin.record_number: numeric admin.hospital: factor admin.patient_identifier: character demog.age: numeric demog.gender: factor pneumo.test_date: Date pneumo.test_type: factor pneumo.phe_serotype: factor demog.smoker: factor comorbid.no_resp_dx: factor comorbid.copd: factor comorbid.asthma: factor comorbid.bronchiectasis: factor comorbid.pulmonary_fibrosis: factor comorbid.resp_other: factor comorbid.no_heart_dx: factor comorbid.ccf: factor comorbid.ihd: factor comorbid.hypertension: factor comorbid.af: factor comorbid.other_heart_dx: factor comorbid.previous_mi: factor comorbid.ckd: factor comorbid.liver_disease: factor comorbid.diabetes: factor comorbid.diabetes_medications: factor comorbid.no_dementia: factor comorbid.dementia: factor comorbid.cognitive_impairment: factor comorbid.neuro_other: factor comorbid.cva: factor comorbid.tia: factor comorbid.hemiplegia: factor comorbid.paraplegia: factor comorbid.no_neuro_dx: factor comorbid.gastric_ulcers: factor comorbid.dysphagia: factor comorbid.periph_vasc_dx: factor comorbid.connective_tissue_dx: factor comorbid.immunodeficiency: factor comorbid.other_pneumococcal_risks: factor comorbid.no_HIV: factor comorbid.HIV: factor comorbid.AIDS: factor comorbid.solid_cancer: factor comorbid.no_haemotological_cancer: factor comorbid.leukaemia: factor comorbid.lymphoma: factor comorbid.recent_chemotherapy: factor comorbid.recent_radiotherapy: factor comorbid.transplant_recipient: factor comorbid.pregnancy: factor demog.no_drug_abuse: factor demog.alcohol_abuse: factor demog.ivdu_abuse: factor demog.marijuana_abuse: factor demog.other_inhaled_drug_abuse: factor admission.on_immunosuppression: factor comorbid.bmi_status: factor comorbid.influenza_infection: factor comorbid.hepatitis_c: factor vaccination.ppv23_vaccination: factor vaccination.flu: factor admission.charlson_comorbidity_index: numeric outcome.length_of_stay: numeric admission.triage_score: factor admission.respiratory_rate: numeric admission.saturations_on_room_air: numeric admission.systolic_bp: numeric admission.diastolic_bp: numeric admission.crb_65_severity_score: ordered admission.curb_65_severity_score: ordered outcome.antibiotic_route: factor outcome.antibiotic_duration: numeric admission.infection_site: factor outcome.abnormal_lft: factor outcome.acute_kidney_injury: factor outcome.pleural_effusion: factor outcome.empyema: factor outcome.discharge_to: factor outcome.admitted_icu: factor outcome.non_invasive_ventilation: factor outcome.intubation: factor outcome.recurrent_pneumonia: factor outcome.received_ecmo: factor outcome.received_ionotropes: factor outcome.tracheostomy: factor outcome.inpatient_death: factor outcome.death_within_30_days: factor outcome.death_within_1_year: factor outcome.survival_duration: numeric haem.albumin: numeric haem.white_cell_count: numeric haem.neutrophils: numeric haem.lymphocytes: numeric haem.crp: numeric haem.sodium: numeric haem.urea: numeric haem.egfr: numeric haem.creatinine: numeric radio.cxr_infection: factor radio.cxr_lobar_changes: factor outcome.death_within_5_years: factor outcome.5_yr_survival_duration: numeric demog.imd_decile: character key.admit: character","code":"augPn = normPn %>% augment_data() #> Augmenting data using: augment.nhs_extract.pneumococcal #> caching item: ~/.cache/avoncap/augment-4c0c0c577381837fb7b8ee36b440288a-f1f6876fc5d3e94bd77a0b266c3ae30f.rda #> Created comorbid.chronic_pleural_dx, comorbid.interstitial_lung_dx, comorbid.cystic_fibrosis, comorbid.other_chronic_resp_dx, comorbid.pulmonary_hypertension, comorbid.congenital_heart_dx, comorbid.other_arrythmia, comorbid.other_other_heart_dx, demog.care_home_resident using: #> Created pneumo.vaccine_group, pneumo.serotype_status, pneumo.pcv_group using: pneumo.phe_serotype #> Created pneumo.pre_covid, pneumo.pandemic_period, pneumo.pcv_vaccine_period using: #> Created pneumo.invasive_status, pneumo.test_category using: admission.infection_site, pneumo.test_type #> Created demog.age_category, demog.age_eligible, admission.cci_category, admission.curb_65_category using: demog.age, admission.charlson_comorbidity_index, admission.curb_65_severity_score #> Created pneumo.clinical_syndrome using: admission.infection_site, outcome.pleural_effusion, outcome.empyema #> Created survival.length_of_stay, survival.uncensored_time_to_death, survival.last_observed_event using: pneumo.test_date, outcome.length_of_stay, outcome.survival_duration, outcome.5_yr_survival_duration #> Created survival.length_of_stay_category, survival.30_day_death_time, survival.30_day_death_event, survival.1_yr_death_time, survival.1_yr_death_event, survival.30_day_discharge_time, survival.30_day_discharge_event using: #> Created survival.length_of_stay_quintile using: #> Created comorbid.diabetes_type, comorbid.solid_cancer_present, comorbid.haemotological_cancer_present, comorbid.any_cancer_present, comorbid.any_chronic_lung_disease, comorbid.any_chronic_heart_disease, comorbid.cva_or_tia, comorbid.any_immune_compromise using: comorbid.diabetes, comorbid.solid_cancer, comorbid.leukaemia, comorbid.lymphoma, comorbid.no_haemotological_cancer, comorbid.asthma, comorbid.bronchiectasis, comorbid.copd, comorbid.ccf, comorbid.ihd, comorbid.previous_mi, comorbid.hypertension, comorbid.af, comorbid.other_heart_dx, comorbid.cva, comorbid.tia, comorbid.immunodeficiency, admission.on_immunosuppression #> Created admission.pneumococcal_high_risk using: demog.age, comorbid.other_pneumococcal_risks, comorbid.copd, comorbid.hypertension, comorbid.ccf, comorbid.ihd, comorbid.ckd, comorbid.liver_disease, comorbid.diabetes, comorbid.immunodeficiency, comorbid.asthma, admission.on_immunosuppression #> Created admission.pneumococcal_risk_classification using: comorbid.cva, comorbid.immunodeficiency, comorbid.leukaemia, comorbid.lymphoma, comorbid.no_haemotological_cancer, admission.on_immunosuppression, comorbid.transplant_recipient, comorbid.ckd, comorbid.HIV, comorbid.solid_cancer, demog.smoker, demog.age, demog.alcohol_abuse, comorbid.diabetes, comorbid.diabetes_medications, comorbid.paraplegia, comorbid.copd, comorbid.asthma, comorbid.liver_disease, comorbid.ccf, comorbid.ihd, comorbid.other_pneumococcal_risks #> Created  using: augPn %>% with(table(admission.infection_site, pneumo.test_type,useNA = \"always\")) #>                         pneumo.test_type #> admission.infection_site Blood culture only Binax only Blood culture and Binax #>         Lung                           1153       2017                     266 #>         Meningitis                       90         46                      23 #>         Septic arthritis                 27          5                       4 #>         ENT                              14          2                       0 #>         Myositis                          1          0                       0 #>         Otitis externa                    1          0                       0 #>         Abdominal                         4          1                       1 #>         Unclear/unknown                   3          0                       0 #>         Other                            32         13                       1 #>         <NA>                              0          0                       0 #>                         pneumo.test_type #> admission.infection_site CSF PCR Blood PCR <NA> #>         Lung                   0         0    0 #>         Meningitis             8         5    0 #>         Septic arthritis       0         0    0 #>         ENT                    0         0    0 #>         Myositis               0         0    0 #>         Otitis externa         0         0    0 #>         Abdominal              0         0    0 #>         Unclear/unknown        0         0    0 #>         Other                  0         2    0 #>         <NA>                   0         0    0"},{"path":"/articles/web/quality-assurance.html","id":"loading-and-normalising-the-central-database","dir":"Articles > Web","previous_headings":"","what":"loading and normalising the central database","title":"Quality assurance","text":"","code":"rawData = avoncap::load_data(\"avoncap-export\",\"central\", merge=FALSE) #> caching item: ~/.cache/avoncap/data-6c0a3f301ee14020e3907a7472c55225-2ee0a32e2eedd4d56822971fb79dcf7c.rda #> INCONSISTENT COLUMN(S) IN FILES: adm_ur_date_2;under5;eos;pmn;sars_cov2_antigen;weight;height;rsva_np;h5n1_np_conf;h7n9_np_conf;pn_st_2;pn_st_4;bnt162_date;bnt162b_batch;bnt162b_place;date_first_vax;date_second_vax;date_third_vax;date_fourth_vax;bnt162b_specify;bnt162b_further;rsva_sputum #> NOT MERGING FILES rawData2 = avoncap::load_data(\"avoncap-export\",\"central\", merge=TRUE) #> using cached item: ~/.cache/avoncap/data-6c0a3f301ee14020e3907a7472c55225-d3d605f1b753e8667f640743669191d4.rda  # devtools::load_all() rawData3 = rawData2 %>% avoncap::validate_data()  #> validate data using: validate.avoncap_export.central #> non-finite value in consented in 7 rows #> non-finite value in ppc in 7 rows #> non-finite value in include_patient in 9 rows #> non-finite value in hosp in 14 rows #> non-finite value in withdrawal in 51 rows #> missing value in systolic_bp in 1 rows #> missing value in diastolic_bp in 1 rows #> missing value in imd in 456 rows #> missing value in hypertensives in 8 rows #> missing value in statins in 8 rows #> missing value in anticoagulants in 8 rows #> missing value in antiplatelets in 8 rows #> missing columns: ethnicity in 1 rows #> non-finite value in news_2_total in 29 rows #> non-finite value in care_home in 1 rows #> non-finite value in ckd in 2 rows #> non-finite value in liver_disease in 3 rows #> non-finite value in diabetes in 2 rows #> non-finite value in gastric_ulcers in 3 rows #> non-finite value in pvd in 2 rows #> non-finite value in ctd in 2 rows #> non-finite value in immunodeficiency in 2 rows #> non-finite value in other_pn_disease in 4 rows #> non-finite value in cancer in 1 rows #> non-finite value in transplant in 3 rows #> non-finite value in hospital_length_of_stay in 2 rows #> non-finite value in covid_19_diagnosis in 1 rows #> non-finite value in lrtd_30d_outcome in 2 rows #> non-finite value in week_number in 911 rows #> non-finite value in highest_level_care_require in 1 rows #> non-finite value in ventilatory_support in 2 rows #> non-finite value in psi_class in 1 rows #> non-finite value in fever2 in 2 rows #> non-finite value in gp_practice_drop_down in 128 rows #> missing value in final_soc_lrtd_diagnosis in 1 rows #> both pneumonia and NP-LRTI in final SOC dx in 6 rows #> 30 day and 1 yr survival duration different in 1 rows #> length of stay > 30 day survival duration in 7 rows #> length of stay > 1 yr survival duration in 31 rows #> marked as died lrtd_30d_outcome but survival_days > 30 days in 3 rows #> non-finite value in dm_meds in 68 rows #> non-finite value in current in 4 rows #> non-finite value in pregnancy in 5 rows #> using cached item: ~/.cache/avoncap/data-6c0a3f301ee14020e3907a7472c55225-7498859e4eaf9f364dc024b6ee4039c2.rda normData2 = rawData3 %>% avoncap::normalise_data() #> Normalising data using: normalise.avoncap_export.central #> using cached item: ~/.cache/avoncap/data-6c0a3f301ee14020e3907a7472c55225-767899bd2d292ad780aeb94b72046017.rda #> Admission date is derived from study week and hence approximate. #> Some columns expected in the mappings were not present: nhs_number, np_swab_3, adm_np_type_3, covidvax_date, covidvax_dose_2, covidvax_dose_3, covidvax_dose_4, covidvax_dose_5, covidvax_dose_6, flu_date, ppv23_date, previousinfection_date #> using cached item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-71cecd72377a82e1989d8e178a3e0310.rda failures = rawData3 %>% avoncap::write_issues(\"~/avoncap-issues\") tmp = failures %>%      filter(.error_type %in% c(\"none checked in checkbox\",\"missing value\")) %>%      inner_join(rawData2, by=\"record_number\", suffix=c(\"\",\".raw\")) %>%     group_by(.variable) %>%     filter(       !is.na(enrollment_date) &       !is.na(hosp)     ) %>%     filter(       n()>20     )  if (nrow(tmp) > 0) {   ggplot(tmp, aes(x=enrollment_date, fill=as.factor(hosp)))+     geom_histogram(binwidth = 7)+     scale_x_date(date_breaks = \"1 month\", date_labels = \"%m-%Y\")+     theme(axis.text.x.bottom = element_text(angle = 90, vjust=0.5, hjust=1))+     facet_wrap(~.variable,scales = \"free_y\") } else {   message(\"No systematically missing values in checked items\") } # normData2 = rawData2 %>%  #   avoncap::normalise_data(.nocache = TRUE)  augData2 = normData2 %>% avoncap::augment_data(.nocache = TRUE) #> Augmenting data using: augment.avoncap_export.central #> caching item: ~/.cache/avoncap/augment-4c0c0c577381837fb7b8ee36b440288a-161f5e8de847121999794568af200bbb.rda #> Created outcome.admitted_to_hospital using: #> Created demog.age_category, demog.age_eligible, admission.cci_category, admission.cci_category_alternate, admission.rockwood_category, admission.curb_65_category using: demog.age, admission.charlson_comorbidity_index, admission.rockwood_score, admission.curb_65_severity_score #> Created admin.patient_identifier using: admin.first_record_number, admin.record_number #> Created admission.episode, admission.interval using: admission.date #> Skipping function due to error: In argument: `admin.linked_gp_practice = ~...`. #> Created admin.catchment_status using: admin.gp_practice #> Created comorbid.diabetes_type, comorbid.solid_cancer_present, comorbid.haemotological_cancer_present, comorbid.any_cancer_present, comorbid.any_chronic_lung_disease, comorbid.any_chronic_heart_disease, comorbid.cva_or_tia, comorbid.any_immune_compromise using: comorbid.diabetes, comorbid.solid_cancer, comorbid.leukaemia, comorbid.lymphoma, comorbid.no_haemotological_cancer, comorbid.asthma, comorbid.bronchiectasis, comorbid.chronic_pleural_dx, comorbid.copd, comorbid.interstitial_lung_dx, comorbid.cystic_fibrosis, comorbid.other_chronic_resp_dx, comorbid.pulmonary_hypertension, comorbid.ccf, comorbid.ihd, comorbid.previous_mi, comorbid.congenital_heart_dx, comorbid.hypertension, comorbid.af, comorbid.other_arrythmia, comorbid.other_heart_dx, comorbid.other_other_heart_dx, comorbid.cva, comorbid.tia, comorbid.immunodeficiency, admission.on_immunosuppression #> Created admission.initial_presentation_3_class using: admission.presumed_CAP_clinically_confirmed, admission.presumed_CAP_radiologically_confirmed, admission.presumed_CAP_no_radiology, admission.presumed_Empyema_or_abscess, admission.presumed_LRTI, admission.presumed_exacerbation_COPD, admission.presumed_exacerbation_non_COPD, admission.presumed_congestive_heart_failure #> Created admission.hospital_acquired, admission.days_before_enrollment using: admission.hospital_acquired_covid, admission.non_lrtd_hospital_acquired_covid, admission.date, admin.enrollment_date #> Created admission.covid_pcr_result, admission.is_covid using: diagnosis.covid_19_diagnosis, diagnosis.admission_swab, diagnosis.test_type #> Created diagnosis.pneumonia, diagnosis.LRTI, diagnosis.exacerbation_of_chronic_respiratory_disease, diagnosis.heart_failure using: diagnosis.SOC_CAP_clinically_confirmed, diagnosis.SOC_CAP_radiologically_confirmed, diagnosis.SOC_CAP_no_radiology, diagnosis.SOC_Empyema_or_abscess, admission.cxr_pneumonia, diagnosis.SOC_LRTI, diagnosis.SOC_exacerbation_COPD, diagnosis.SOC_exacerbation_non_COPD, diagnosis.SOC_congestive_heart_failure #> Created admission.infective_cause using: diagnosis.SOC_non_infectious_process, diagnosis.SOC_non_LRTI #> Created admission.category, admission.presentation_3_class using: #> Created diagnosis.infection_context using: admission.hospital_acquired_covid, admission.non_lrtd_hospital_acquired_covid, diagnosis.first_COVID_positive_swab_date, admission.date #> Created genomic.variant_inferred using: genomic.variant, admission.date #> Created symptom_onset.date_of_symptoms, symptom_onset.time_of_symptoms_since_first_vaccine_dose, symptom_onset.time_of_symptoms_since_second_vaccine_dose, symptom_onset.time_of_symptoms_since_third_vaccine_dose, symptom_onset.time_of_symptoms_since_fourth_vaccine_dose, vaccination.dose_interval, vaccination.booster_interval, vaccination.second_booster_interval using: admission.date, admission.duration_symptoms, admission.time_since_first_vaccine_dose, admission.time_since_second_vaccine_dose, admission.time_since_third_vaccine_dose, admission.time_since_fourth_vaccine_dose #> Created vaccination.protection using: vaccination.covid_vaccination, admission.time_since_fourth_vaccine_dose, admission.duration_symptoms, admission.time_since_third_vaccine_dose, admission.time_since_second_vaccine_dose, admission.time_since_first_vaccine_dose, admission.previous_covid_infection #> Created vaccination.vaccination using: vaccination.covid_vaccination, admission.time_since_sixth_vaccine_dose, admission.duration_symptoms, admission.time_since_fifth_vaccine_dose, admission.time_since_fourth_vaccine_dose, admission.time_since_third_vaccine_dose, admission.time_since_second_vaccine_dose, admission.time_since_first_vaccine_dose #> Created vaccination.brand_combination using: vaccination.first_dose_brand, vaccination.second_dose_brand, vaccination.third_dose_brand #> Created pneumo.presentation_CAP, pneumo.presentation_RAD, pneumo.presentation_class using: diagnosis.SOC_CAP_radiologically_confirmed #> Created admission.pneumococcal_high_risk using: demog.age, comorbid.other_pneumococcal_risks, comorbid.copd, comorbid.interstitial_lung_dx, comorbid.cystic_fibrosis, comorbid.hypertension, comorbid.ccf, comorbid.ihd, comorbid.ckd, comorbid.liver_disease, comorbid.diabetes, comorbid.immunodeficiency, comorbid.asthma, admission.on_immunosuppression #> Created admission.pneumococcal_risk_classification using: comorbid.cva, comorbid.immunodeficiency, comorbid.leukaemia, comorbid.lymphoma, comorbid.no_haemotological_cancer, admission.on_immunosuppression, comorbid.transplant_recipient, comorbid.ckd, comorbid.HIV, comorbid.solid_cancer, demog.care_home_resident, demog.smoker, demog.age, demog.alcohol_abuse, comorbid.diabetes, comorbid.diabetes_medications, comorbid.paraplegia, comorbid.copd, comorbid.interstitial_lung_dx, comorbid.cystic_fibrosis, comorbid.asthma, comorbid.liver_disease, comorbid.ccf, comorbid.ihd, comorbid.other_pneumococcal_risks #> Created day_7.WHO_clinical_progression, outcome.WHO_clinical_progression using: day_7.death, day_7.max_ventilation_level, day_7.ionotropes_needed, day_7.max_o2_level, outcome.survival_duration, outcome.functional_status, outcome.highest_level_ventilatory_support, outcome.received_ionotropes, outcome.respiratory_support_needed #> Created outcome.icu_admission, outcome.death_within_30_days, outcome.death_within_1_year, outcome.death_during_follow_up using: outcome.icu_duration, day_7.death, outcome.survival_duration, outcome.one_year_survival_duration, outcome.one_year_survival_complete, outcome.inpatient_death, outcome.functional_status #> Created survival.length_of_stay, survival.uncensored_time_to_death, survival.last_observed_event using: admin.enrollment_date, outcome.length_of_stay, outcome.survival_duration, outcome.one_year_survival_duration, admission.date #> Created survival.length_of_stay_category, survival.30_day_death_time, survival.30_day_death_event, survival.1_yr_death_time, survival.1_yr_death_event, survival.30_day_discharge_time, survival.30_day_discharge_event using: #> Created survival.length_of_stay_quintile using: #> Created day_7.max_o2_gt_28, day_7.max_o2_gt_35, day_7.max_o2_gt_50, day_7.WHO_score_gt_6, day_7.WHO_score_gt_5, day_7.los_gt_3, day_7.los_gt_5, day_7.los_gt_7 using: day_7.max_o2_level, day_7.length_of_stay, outcome.survival_duration #> Created  using: #> Created admission.pre_admission_antivirals_given using: admission.pre_admission_antiviral avoncap::find_new_field_names(normData2, \"adm_diagnosis\") #>                                 adm_diagnosis___1  #> \"admission.presumed_CAP_radiologically_confirmed\"  #>                                 adm_diagnosis___2  #>     \"admission.presumed_CAP_clinically_confirmed\"  #>                                 adm_diagnosis___3  #>             \"admission.presumed_CAP_no_radiology\"  #>                                 adm_diagnosis___4  #>                         \"admission.presumed_LRTI\"  #>                                 adm_diagnosis___5  #>           \"admission.presumed_Empyema_or_abscess\"  #>                                 adm_diagnosis___6  #>            \"admission.presumed_exacerbation_COPD\"  #>                                 adm_diagnosis___7  #>        \"admission.presumed_exacerbation_non_COPD\"  #>                                 adm_diagnosis___8  #>     \"admission.presumed_congestive_heart_failure\"  #>                                 adm_diagnosis___9  #>       \"admission.presumed_non_infectious_process\"  #>                                adm_diagnosis___10  #>                     \"admission.presumed_non_LRTI\""},{"path":"/articles/web/uad-data.html","id":"data-loading","dir":"Articles > Web","previous_headings":"","what":"Data loading","title":"Pneumococcus urinary antigen data","text":"raw data expected urine-antigens subfolder data distributed single file cases controls together without distinguishing features. BinaxNOW serotype specific UAD tests results. tests run every person.","code":"fs::dir_tree(path = avoncap::input(\"urine-antigens\")) #> /home/vp22681/Data/avoncap/urine-antigens #> ├── 2022-09-15 #> │   └── uad-cases.csv #> ├── 2023-05-15 #> │   ├── gp-cases.csv #> │   └── uad-cases.csv #> ├── B1851202_SAP V1.0-27Sep2021_Final.pdf #> ├── README.md #> └── Table Template Serotype Distribution Scientific Affairs Proposal_FINAL.docx most_recent_files(\"urine-antigens\") #> # A tibble: 2 × 7 #>   filename  directory      path          date       hospital study_year filetype #>   <chr>     <chr>          <fs::path>    <date>     <chr>         <int> <chr>    #> 1 gp-cases  urine-antigens …gp-cases.csv 2023-05-15 NA               NA csv      #> 2 uad-cases urine-antigens …ad-cases.csv 2023-05-15 NA               NA csv rawUA = load_data(\"urine-antigens\") #> caching item: ~/.cache/avoncap/data-6c0a3f301ee14020e3907a7472c55225-a34df7f73813316db44634d7c8101b95.rda #> Loaded 101647 rows from 2 files, (7925+93722=101647)"},{"path":"/articles/web/uad-data.html","id":"data-normalisation","dir":"Articles > Web","previous_headings":"","what":"Data normalisation","title":"Pneumococcus urinary antigen data","text":"data can subdivided serotype versus binax groups normalisation handles processing serotype format ^[0-9]+[-Z]$, aligning format patient identifier match [0-9]{4}-[0-9]+. processing test dates (supplied %e-%b-%y format). normalised UAD data individual serotype specific tests results nested column. single BinaxNOW result nested. Results keyed surveillance number (admission episode identifier) test data. UAD format: admin.consented_record_number: character pneumo.test_date: Date key.consent: character key.sample: character pneumo.urine_antigen: list BinaxNOW format: pneumo.binax_result: factor pneumo.test_date: Date admin.consented_record_number: character pneumo.urine_antigen_sample_id: character key.consent: character key.sample: character","code":"normUA = rawUA %>% normalise_data(instrument = \"serotype\", .nocache=TRUE) #> Normalising data using: normalise.urine_antigens.serotype #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-a277b6531c985ef8746512b75e6193c3.rda #> mapping .RESULT to pneumo.urine_antigen_result #> mapping .EVENT_DATE to pneumo.test_date #> mapping .ANALYSIS to pneumo.urine_antigen_test #> mapping .SUBJECT to admin.consented_record_number #> mapping .BARCODE to pneumo.urine_antigen_sample_id #> Mapped 5 columns #> Did not map 23 columns normBinax = rawUA %>% normalise_data(instrument = \"binax\", .nocache=TRUE) #> Normalising data using: normalise.urine_antigens.binax #> caching item: ~/.cache/avoncap/norm-0ef4812a2d1bc751062531c384a2b89e-d9ae5ae98c48e69336c14928769512be.rda #> mapping .RESULT to pneumo.binax_result #> mapping .EVENT_DATE to pneumo.test_date #> mapping .SUBJECT to admin.consented_record_number #> mapping .BARCODE to pneumo.urine_antigen_sample_id #> Mapped 4 columns #> Did not map 24 columns"},{"path":"/articles/web/uad-data.html","id":"data-augmentation","dir":"Articles > Web","previous_headings":"","what":"Data augmentation","title":"Pneumococcus urinary antigen data","text":"UAD results commonly want know following: serotype testing complete serotypes? whole UAD panel positive serotype, many? UAD1 panel positive? UAD2? UAD positive PCV vaccine covered serotype? BINAX results real addition qeustions relevant","code":"augUA = normUA %>% augment_data() #> Augmenting data using: augment.urine_antigens.serotype #> caching item: ~/.cache/avoncap/augment-4c0c0c577381837fb7b8ee36b440288a-d8a5c36257dd42c380b5ff6fcb59bc6f.rda #> Created pneumo.pcv_group using: key.sample, pneumo.urine_antigen #> Created pneumo.non_uad_panel_result, pneumo.uad1_panel_result, pneumo.uad2_panel_result, pneumo.serotype_summary_result, pneumo.serotype_positive_count, pneumo.serotype_results_complete using: key.sample, pneumo.urine_antigen   # augUA %>% filter(pneumo.serotype_results_complete) %>%  #   group_by(pneumo.serotype_summary_result) %>%  #   count() #  # augUA %>% unnest(pneumo.pcv_group) %>% with(table(group,result)) #  # ggplot( #   augUA %>% unnest(pneumo.pcv_group) %>%  #     inner_join(avoncap::serotype_data$names, by=c(\"group\"=\"label\")) %>% #     filter(indent==2, result == \"Positive\"), aes(x=group))+ #   geom_histogram(stat=\"count\")"},{"path":"/articles/web/uad-data.html","id":"common-operations","dir":"Articles > Web","previous_headings":"","what":"Common operations","title":"Pneumococcus urinary antigen data","text":"Find ","code":"# normUA %>% unnest(pneumo.urine_antigen) %>% group_by(result) %>% count() # ggplot(normUA %>% unnest(pneumo.urine_antigen) %>% filter(result == \"Positive\"), aes(x=test))+geom_histogram(stat=\"count\") # normBinax %>% group_by(pneumo.binax_result) %>% count() tmp = augUA %>% derive_pcv_groupings(pcv_map = avoncap::uad_pcv_map, col_name = pcv_custom) %>% glimpse() #> Rows: 4,077 #> Columns: 13 #> $ admin.consented_record_number    <chr> \"1001-00045\", \"1001-00057\", \"1001-000… #> $ pneumo.test_date                 <date> 2020-11-06, 2021-02-04, 2021-02-04, … #> $ key.consent                      <chr> \"1001-00045\", \"1001-00057\", \"1001-000… #> $ key.sample                       <chr> \"1001-00045-2020-11-06\", \"1001-00057-… #> $ pneumo.urine_antigen             <list> [<tbl_df[24 x 3]>], [<tbl_df[24 x 3]… #> $ pneumo.pcv_group                 <list> [<tbl_df[38 x 2]>], [<tbl_df[38 x 2]… #> $ pneumo.non_uad_panel_result      <fct> Unknown, Unknown, Unknown, Unknown, U… #> $ pneumo.uad1_panel_result         <fct> Negative, Negative, Negative, Negativ… #> $ pneumo.uad2_panel_result         <fct> Negative, Negative, Negative, Negativ… #> $ pneumo.serotype_summary_result   <fct> Negative, Negative, Negative, Negativ… #> $ pneumo.serotype_positive_count   <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0… #> $ pneumo.serotype_results_complete <lgl> TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, T… #> $ pcv_custom                       <list> [<tbl_df[38 x 2]>], [<tbl_df[38 x 2]… tmp %>% unnest(pcv_custom) %>% with(table(group,result)) #>                                     result #> group                                Negative Positive Other Unknown #>   PCV7 (plus 9A,18A/B/F,23B)             4002       43    26       6 #>   PCV13 (plus 9A,18A/B/F,23B,6C)         3907      131    33       6 #>   PCV15 (plus 9A,18A/B/F,23B,6C)         3864      153    44      16 #>   PCV20 (plus 9A,18A/B/F,23B,6C,15C)     3740      268    53      16 #>   PPV23 (plus 9A,18A/B/F,23B,15C)        3727      280    54      16 #>   PCV10 (Serum Study Institute)          3953       85    33       6 #>   PCV10 (GSK)                            3953       85    33       6 #>   PCV15 (Zhifei)                         3896      132    33      16 #>   PCV24 (Vaxcyte)                        3711      296    54      16 #>   PCV24 (Affinivax)                      3711      296    54      16 #>   Additional PCV13 on 7 (plus 6C)        3949       89    33       6 #>   Additional PCV15 on 13                 4008       24    33      12 #>   Additional PCV20 on 15 (plus 15C)      3895      124    46      12 #>   Additional PPV23 on PCV20              4028       29     8      12 #>   4                                      4040       11    20       6 #>   6B                                     4051        0    20       6 #>   9V+A                                   4050        1    20       6 #>   14                                     4037       11    23       6 #>   18C+A/B/F                              4048        1    23       5 #>   19F                                    4048        3    20       6 #>   23F+B                                  4031       17    23       6 #>   1                                      4037        9    25       6 #>   3                                      4025       26    20       6 #>   5                                      4046        3    22       6 #>   6A+C                                   4032       17    22       6 #>   7F                                     4011       33    28       5 #>   19A                                    4044        6    21       6 #>   22F                                    4029       13    23      12 #>   33F                                    4030       11    24      12 #>   8                                      3931       97    37      12 #>   10A                                    4021       16    28      12 #>   11A                                    4053        9     3      12 #>   12F                                    4061        0     4      12 #>   15B+C                                  4058        3     4      12 #>   2                                      4060        1     4      12 #>   9N                                     4050       11     4      12 #>   17F                                    4048       12     5      12 #>   20                                     4056        5     4      12 #>   Other                                     0        0     0       0"},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Rob Challen. Author, maintainer.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Challen R (2024). avoncap: AvonCap Study Analysis. R package version 0.0.0.9028.","code":"@Manual{,   title = {avoncap: AvonCap Study Analysis},   author = {Rob Challen},   year = {2024},   note = {R package version 0.0.0.9028}, }"},{"path":"/index.html","id":"avoncap-functions-for-manipulating-and-analysing-the-avoncap-study-data","dir":"","previous_headings":"","what":"AvonCap Study Analysis","title":"AvonCap Study Analysis","text":"development status package, designed support AvonCap publications never submitted CRAN. continuous revision use stable releases recommended","code":""},{"path":"/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"AvonCap Study Analysis","text":"package hosted Bristol Vaccine Centre r-universe. Installation follows: Installation can performed devtools: Bump version","code":"options(repos = c(   \"bristol-vaccine-centre\" = 'https://bristol-vaccine-centre.r-universe.dev/',   CRAN = 'https://cloud.r-project.org'))  # Download and install avoncap in R install.packages(\"avoncap\") install.packages(\"devtools\") devtools::install_github(\"bristol-vaccine-centre/avoncap\")  # recommended to use a stable release version such as: devtools::install_github(\"bristol-vaccine-centre/avoncap@0.0.0.9000\")"},{"path":"/reference/all_files.html","id":null,"dir":"Reference","previous_headings":"","what":"Scans the input directory and returns csv or xlsx files in that directory — all_files","title":"Scans the input directory and returns csv or xlsx files in that directory — all_files","text":"Extracting metadata filename present - particularly hospital, year number","code":""},{"path":"/reference/all_files.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scans the input directory and returns csv or xlsx files in that directory — all_files","text":"","code":"all_files()"},{"path":"/reference/all_files.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scans the input directory and returns csv or xlsx files in that directory — all_files","text":"dataframe containing filename, path, date, hospital, study_year fields","code":""},{"path":"/reference/augment_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Sanitise AvonCap data columns — augment_data","title":"Sanitise AvonCap data columns — augment_data","text":"AvonCap data lots columns named difficult remember fashion, composed data items enumerated values semantics. makes displaying difficult filtering done raw data inscrutable. Depending source data different columns may present due differences NHS UoB data sets. redcap database options may checklists radio buttons, end mysterious names data.","code":""},{"path":"/reference/augment_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sanitise AvonCap data columns — augment_data","text":"","code":"augment_data(x, ...)"},{"path":"/reference/augment_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sanitise AvonCap data columns — augment_data","text":"x raw data load_data() ... Arguments passed augment_generic df data frame","code":""},{"path":"/reference/augment_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sanitise AvonCap data columns — augment_data","text":"tracked dataframe ","code":""},{"path":"/reference/augment_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Sanitise AvonCap data columns — augment_data","text":"function maps data tidy dataframe consistently named columns, named factors appropriate. present data ethnicity files sanitisation code held zzz-avoncap-mappings.R file.","code":""},{"path":"/reference/augment_generic.html","id":null,"dir":"Reference","previous_headings":"","what":"Applies a set of functions to the whole dataframe — augment_generic","title":"Applies a set of functions to the whole dataframe — augment_generic","text":"sequences, catches errors allows parameters passed name","code":""},{"path":"/reference/augment_generic.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Applies a set of functions to the whole dataframe — augment_generic","text":"","code":"augment_generic(df, ...)"},{"path":"/reference/augment_generic.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Applies a set of functions to the whole dataframe — augment_generic","text":"df data frame ... unnamed parameters list functions, named parameters passed functions (match formal arguments).","code":""},{"path":"/reference/augment_generic.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Applies a set of functions to the whole dataframe — augment_generic","text":"altered df","code":""},{"path":"/reference/augment_generic.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Applies a set of functions to the whole dataframe — augment_generic","text":"","code":"fn1 = function(df,v) {df %>% dplyr::filter(cut==\"Fair\") %>% dplyr::mutate(x_col = color)} fn2 = function(df,v) {df %>% dplyr::filter(color==v$color$J)} df = ggplot2::diamonds %>% augment_generic(fn1, fn2) #> caching item: ~/.cache/avoncap/augment-4c0c0c577381837fb7b8ee36b440288a-1116877521be006c4a6ad4557b930f13.rda #> Created x_col using: cut, color #> Created  using: color"},{"path":"/reference/binomial_proportion_points.html","id":null,"dir":"Reference","previous_headings":"","what":"Dodged bar and whiskers proportions — binomial_proportion_points","title":"Dodged bar and whiskers proportions — binomial_proportion_points","text":"function plots stacked bar proportions input set data","code":""},{"path":"/reference/binomial_proportion_points.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Dodged bar and whiskers proportions — binomial_proportion_points","text":"","code":"binomial_proportion_points(data, mapping, ..., width = 0.8, size = 0.5)"},{"path":"/reference/binomial_proportion_points.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Dodged bar and whiskers proportions — binomial_proportion_points","text":"data data mapping aes mapping least x fill. facetting group must contain facet variable ... passed geom_bar width width position dodge size bar size","code":""},{"path":"/reference/binomial_proportion_points.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Dodged bar and whiskers proportions — binomial_proportion_points","text":"ggplot","code":""},{"path":"/reference/cut_integer.html","id":null,"dir":"Reference","previous_headings":"","what":"Cut and label an integer valued quantity — cut_integer","title":"Cut and label an integer valued quantity — cut_integer","text":"Deals annoying issues classifying integer data sets, ages, groups. want specify just change points integers clearly label resulting ordered factor.","code":""},{"path":"/reference/cut_integer.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cut and label an integer valued quantity — cut_integer","text":"","code":"cut_integer(   x,   cut_points,   glue = \"{label}\",   lower_limit = -Inf,   upper_limit = Inf,   ... )"},{"path":"/reference/cut_integer.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cut and label an integer valued quantity — cut_integer","text":"x vector integer valued numbers, e.g. ages, counts cut_points vector integer valued cut points define lower boundaries conditions glue glue spec may used generate label. can use low, high, next_low, label values. lower_limit minimum value include (inclusive bottom category) (default -Inf) upper_limit maximum value include (also inclusive top category) (default Inf) ... used","code":""},{"path":"/reference/cut_integer.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Cut and label an integer valued quantity — cut_integer","text":"ordered factor integer","code":""},{"path":"/reference/cut_integer.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Cut and label an integer valued quantity — cut_integer","text":"","code":"cut_integer(stats::rbinom(20,20,0.5), c(5,10,15)) #>  [1] 5‒9   10‒14 10‒14 5‒9   5‒9   10‒14 10‒14 5‒9   10‒14 10‒14 10‒14 5‒9   #> [13] 5‒9   5‒9   5‒9   5‒9   5‒9   5‒9   5‒9   10‒14 #> Levels: <5 < 5‒9 < 10‒14 < ≥15 cut_integer(floor(stats::runif(100,-10,10)), cut_points = c(2,3,4,6), lower_limit=0, upper_limit=10) #>   [1] <NA> 3    4‒5  <NA> 6‒10 4‒5  <NA> 0‒1  3    3    <NA> <NA> <NA> 2    <NA> #>  [16] <NA> 4‒5  6‒10 <NA> <NA> 3    <NA> 2    3    <NA> 4‒5  4‒5  6‒10 6‒10 <NA> #>  [31] <NA> <NA> <NA> 0‒1  <NA> 4‒5  <NA> 4‒5  <NA> <NA> 6‒10 <NA> 0‒1  <NA> 0‒1  #>  [46] <NA> 6‒10 0‒1  0‒1  <NA> <NA> <NA> <NA> <NA> <NA> <NA> <NA> 0‒1  6‒10 <NA> #>  [61] 0‒1  2    <NA> <NA> <NA> 6‒10 <NA> <NA> 3    <NA> 6‒10 <NA> 0‒1  6‒10 4‒5  #>  [76] <NA> 0‒1  6‒10 <NA> <NA> 6‒10 6‒10 <NA> <NA> <NA> 3    0‒1  3    0‒1  6‒10 #>  [91] 4‒5  6‒10 <NA> 6‒10 6‒10 0‒1  <NA> 4‒5  0‒1  2    #> Levels: 0‒1 < 2 < 3 < 4‒5 < 6‒10"},{"path":"/reference/default_column_names.html","id":null,"dir":"Reference","previous_headings":"","what":"default column naming mappings — default_column_names","title":"default column naming mappings — default_column_names","text":"default column naming mappings","code":""},{"path":"/reference/default_column_names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"default column naming mappings — default_column_names","text":"","code":"default_column_names(...)"},{"path":"/reference/default_column_names.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"default column naming mappings — default_column_names","text":"... additional named items add","code":""},{"path":"/reference/default_column_names.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"default column naming mappings — default_column_names","text":"set mappings","code":""},{"path":"/reference/denom_by_age_by_day.html","id":null,"dir":"Reference","previous_headings":"","what":"The avoncap denominator dataset — denom_by_age_by_day","title":"The avoncap denominator dataset — denom_by_age_by_day","text":"denominator time varying quantity","code":""},{"path":"/reference/denom_by_age_by_day.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"The avoncap denominator dataset — denom_by_age_by_day","text":"","code":"data(denom_by_age_by_day)"},{"path":"/reference/denom_by_age_by_day.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"The avoncap denominator dataset — denom_by_age_by_day","text":"dataframe containing following columns: method (character) - estimation method. default \"Campling 2019\" age (character) - age category date (date) - date estimate valid population (integer) - esimtate population size age group day default value. 32592 rows 4 columns","code":""},{"path":"/reference/derive_WHO_outcome_score.html","id":null,"dir":"Reference","previous_headings":"","what":"determine WHO outcome score — derive_WHO_outcome_score","title":"determine WHO outcome score — derive_WHO_outcome_score","text":"Scores 0-3 community cases.","code":""},{"path":"/reference/derive_WHO_outcome_score.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"determine WHO outcome score — derive_WHO_outcome_score","text":"","code":"derive_WHO_outcome_score(df, v, ...)"},{"path":"/reference/derive_WHO_outcome_score.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"determine WHO outcome score — derive_WHO_outcome_score","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_WHO_outcome_score.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"determine WHO outcome score — derive_WHO_outcome_score","text":"dataframe","code":""},{"path":"/reference/derive_WHO_outcome_score.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"determine WHO outcome score — derive_WHO_outcome_score","text":"generally tell difference 7 8. 4: Hospitalised; oxygen therapy 5: Hospitalised; oxygen mask nasal prongs 6: Hospitalised; oxygen NIV high flow 7: Intubation mechanical ventilation, pO2/FiO2 >= 150 SpO2/FiO2 >= 200 8: Mechanical ventilation pO2/FIO2 <150 (SpO2/FiO2 <200) vasopressors 9: Mechanical ventilation pO2/FiO2 <150 vasopressors, dialysis, ECMO 10: Dead","code":""},{"path":"/reference/derive_aLRTD_categories.html","id":null,"dir":"Reference","previous_headings":"","what":"The aLRTD incidence paper classifications — derive_aLRTD_categories","title":"The aLRTD incidence paper classifications — derive_aLRTD_categories","text":"3 category classifications","code":""},{"path":"/reference/derive_aLRTD_categories.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"The aLRTD incidence paper classifications — derive_aLRTD_categories","text":"","code":"derive_aLRTD_categories(df, v, ...)"},{"path":"/reference/derive_aLRTD_categories.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"The aLRTD incidence paper classifications — derive_aLRTD_categories","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_aLRTD_categories.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"The aLRTD incidence paper classifications — derive_aLRTD_categories","text":"dataframe","code":""},{"path":"/reference/derive_aLRTD_categories.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"The aLRTD incidence paper classifications — derive_aLRTD_categories","text":"aetiological: Confirmed SARS-CoV-2 - implies Infective evidence SARS-CoV-2 - implies Infective confirmed SARS-CoV-2 Non-infective - presumed non infective clinical presentation: Pneumonia - implies Infective NP-LRTI - implies Infective evidence LRTI (include CRDE HF) cases get clinical presentation . Typically people infective cause, LRTI pneumonia excluded. URTI incidental COVID cases.","code":""},{"path":"/reference/derive_admission_episode.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a counter in the event of repeated admissions — derive_admission_episode","title":"Create a counter in the event of repeated admissions — derive_admission_episode","text":"also calculate time interval admissions. also repeat admission instrument use.","code":""},{"path":"/reference/derive_admission_episode.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a counter in the event of repeated admissions — derive_admission_episode","text":"","code":"derive_admission_episode(df, v)"},{"path":"/reference/derive_admission_episode.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a counter in the event of repeated admissions — derive_admission_episode","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df)","code":""},{"path":"/reference/derive_admission_episode.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a counter in the event of repeated admissions — derive_admission_episode","text":"dataframe","code":""},{"path":"/reference/derive_antiviral_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a flag for patients who have been given antivirals — derive_antiviral_status","title":"Create a flag for patients who have been given antivirals — derive_antiviral_status","text":"Create flag patients given antivirals","code":""},{"path":"/reference/derive_antiviral_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a flag for patients who have been given antivirals — derive_antiviral_status","text":"","code":"derive_antiviral_status(df, v)"},{"path":"/reference/derive_antiviral_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a flag for patients who have been given antivirals — derive_antiviral_status","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df)","code":""},{"path":"/reference/derive_antiviral_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a flag for patients who have been given antivirals — derive_antiviral_status","text":"dataframe","code":""},{"path":"/reference/derive_catchment_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify patients who are in the BNSSG ICB based on their GP practice name — derive_catchment_status","title":"Identify patients who are in the BNSSG ICB based on their GP practice name — derive_catchment_status","text":"Names normalised removing commonly mixed components ","code":""},{"path":"/reference/derive_catchment_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify patients who are in the BNSSG ICB based on their GP practice name — derive_catchment_status","text":"","code":"derive_catchment_status(df, v)"},{"path":"/reference/derive_catchment_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify patients who are in the BNSSG ICB based on their GP practice name — derive_catchment_status","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df)","code":""},{"path":"/reference/derive_catchment_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify patients who are in the BNSSG ICB based on their GP practice name — derive_catchment_status","text":"dataframe","code":""},{"path":"/reference/derive_completed_vaccination_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Derive detailed vaccination status on admission — derive_completed_vaccination_status","title":"Derive detailed vaccination status on admission — derive_completed_vaccination_status","text":"Vaccination deemed effect given > 14 days admission 1st dose >7 days admission subsequent doses. account previous infection data set.","code":""},{"path":"/reference/derive_completed_vaccination_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Derive detailed vaccination status on admission — derive_completed_vaccination_status","text":"","code":"derive_completed_vaccination_status(df, v, ...)"},{"path":"/reference/derive_completed_vaccination_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Derive detailed vaccination status on admission — derive_completed_vaccination_status","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_completed_vaccination_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Derive detailed vaccination status on admission — derive_completed_vaccination_status","text":"dataframe","code":""},{"path":"/reference/derive_consent_flag.html","id":null,"dir":"Reference","previous_headings":"","what":"Has a patient withheld consent or withdrawn — derive_consent_flag","title":"Has a patient withheld consent or withdrawn — derive_consent_flag","text":"patient withdrawn consent may still data fields populated","code":""},{"path":"/reference/derive_consent_flag.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Has a patient withheld consent or withdrawn — derive_consent_flag","text":"","code":"derive_consent_flag(df, v)"},{"path":"/reference/derive_consent_flag.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Has a patient withheld consent or withdrawn — derive_consent_flag","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df)","code":""},{"path":"/reference/derive_consent_flag.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Has a patient withheld consent or withdrawn — derive_consent_flag","text":"dataframe","code":""},{"path":"/reference/derive_continuous_categories.html","id":null,"dir":"Reference","previous_headings":"","what":"Categorical scores for continuous variables — derive_continuous_categories","title":"Categorical scores for continuous variables — derive_continuous_categories","text":"Typically used regression models non-linear effects splines","code":""},{"path":"/reference/derive_continuous_categories.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Categorical scores for continuous variables — derive_continuous_categories","text":"","code":"derive_continuous_categories(df, v, ...)"},{"path":"/reference/derive_continuous_categories.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Categorical scores for continuous variables — derive_continuous_categories","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_continuous_categories.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Categorical scores for continuous variables — derive_continuous_categories","text":"dataframe","code":""},{"path":"/reference/derive_continuous_categories.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Categorical scores for continuous variables — derive_continuous_categories","text":"Age category - UK demographic data ends 85, 65 key cut 5 year bands, 10 year bands age categories end 85 (N.b.) principled reason . Boundaries fall approx 0.1, 0.2, 0.4, 0.6, 0.8 quantiles. merge first two groups outcomes usually different. Covid vaccination cohorts 5 year age groups, vaccination prioirity groups approximately. Age eligibility vaccines: 65+ Age pneumovax eligibility CCI - 4 bands defined original Charleson paper: ** https://pubmed.ncbi.nlm.nih.gov/3558716/ ** https://link.springer.com/article/10.1007/s10654-021-00802-z rationale given using charleson score continuous value. Alternate CCI - 0,1,2,3+ also used grouping original charleson paper Rockwood score - Completely independent versus dependent frailty levels. CURB65 categorisation - per derivation study (https://www.ncbi.nlm.nih.gov/pmc/articles/PMC1746657/): 0-1 consider home treatment; 2 consider admit inpatient; 3-5 admit, consider ICU.","code":""},{"path":"/reference/derive_continuous_categories_pneumo.html","id":null,"dir":"Reference","previous_headings":"","what":"Age and CURB score categories — derive_continuous_categories_pneumo","title":"Age and CURB score categories — derive_continuous_categories_pneumo","text":"consistent AvonCAP age / CURB cateories.","code":""},{"path":"/reference/derive_continuous_categories_pneumo.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Age and CURB score categories — derive_continuous_categories_pneumo","text":"","code":"derive_continuous_categories_pneumo(df, v, ...)"},{"path":"/reference/derive_continuous_categories_pneumo.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Age and CURB score categories — derive_continuous_categories_pneumo","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_continuous_categories_pneumo.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Age and CURB score categories — derive_continuous_categories_pneumo","text":"dataframe","code":""},{"path":"/reference/derive_covid_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Determine if an admission is proven SARS-CoV-2 PCR positive — derive_covid_status","title":"Determine if an admission is proven SARS-CoV-2 PCR positive — derive_covid_status","text":"SARS-CoV-2 PCR positive lab confirmed diagnosis.","code":""},{"path":"/reference/derive_covid_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Determine if an admission is proven SARS-CoV-2 PCR positive — derive_covid_status","text":"","code":"derive_covid_status(df, v, ...)"},{"path":"/reference/derive_covid_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Determine if an admission is proven SARS-CoV-2 PCR positive — derive_covid_status","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_covid_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Determine if an admission is proven SARS-CoV-2 PCR positive — derive_covid_status","text":"dataframe","code":""},{"path":"/reference/derive_covid_status.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Determine if an admission is proven SARS-CoV-2 PCR positive — derive_covid_status","text":"admission.covid_pcr_result: based fields: c19_adm_swab covid_19_diagnosis Patient reported, clinical diagnoses assumed PCR negative (although possible cases may done). Lateral flows done hospital counted PCR negative. negative admission swabs counted negative NA signifies test done. admission.is_covid: Binary confirmed -evidence. PCR results count confirmed, Lateral flow results count confirmed, anything else evidence (includes negatives test done)","code":""},{"path":"/reference/derive_diagnosis_categories.html","id":null,"dir":"Reference","previous_headings":"","what":"Create 4 non exclusive diagnostic categories — derive_diagnosis_categories","title":"Create 4 non exclusive diagnostic categories — derive_diagnosis_categories","text":"Pneumonia one : Standard care diagnosis CAP (radiologically clinically) Empyema abscess Admission chest X-ray shows pneumonia","code":""},{"path":"/reference/derive_diagnosis_categories.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create 4 non exclusive diagnostic categories — derive_diagnosis_categories","text":"","code":"derive_diagnosis_categories(df, v)"},{"path":"/reference/derive_diagnosis_categories.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create 4 non exclusive diagnostic categories — derive_diagnosis_categories","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df)","code":""},{"path":"/reference/derive_diagnosis_categories.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create 4 non exclusive diagnostic categories — derive_diagnosis_categories","text":"dataframe","code":""},{"path":"/reference/derive_diagnosis_categories.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create 4 non exclusive diagnostic categories — derive_diagnosis_categories","text":"NP-LRTI : pneumonia Standard care LTRI diagnosis Exacerbation CRDE: Standard care exacerbation COPD Standard care exacerbation Non-COPD (N.B. may pneumonia NP-LRTI) Heart failure: Standard care congestive heart failure.","code":""},{"path":"/reference/derive_effective_vaccination_status.html","id":null,"dir":"Reference","previous_headings":"","what":"A simple vaccination status on admission as an ordered number of doses — derive_effective_vaccination_status","title":"A simple vaccination status on admission as an ordered number of doses — derive_effective_vaccination_status","text":"account previous infection data set.","code":""},{"path":"/reference/derive_effective_vaccination_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A simple vaccination status on admission as an ordered number of doses — derive_effective_vaccination_status","text":"","code":"derive_effective_vaccination_status(df, v, ...)"},{"path":"/reference/derive_effective_vaccination_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"A simple vaccination status on admission as an ordered number of doses — derive_effective_vaccination_status","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_effective_vaccination_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"A simple vaccination status on admission as an ordered number of doses — derive_effective_vaccination_status","text":"dataframe","code":""},{"path":"/reference/derive_genomic_variant.html","id":null,"dir":"Reference","previous_headings":"","what":"Give a inferred Alpha, Delta or Omicron status based on time alone. — derive_genomic_variant","title":"Give a inferred Alpha, Delta or Omicron status based on time alone. — derive_genomic_variant","text":"relies date period confidence variants circulating given type. quite conservative estimates based frequency sequenced cases bristol area (according Sanger centre cases identified hospital testing)","code":""},{"path":"/reference/derive_genomic_variant.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Give a inferred Alpha, Delta or Omicron status based on time alone. — derive_genomic_variant","text":"","code":"derive_genomic_variant(df, v, ...)"},{"path":"/reference/derive_genomic_variant.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Give a inferred Alpha, Delta or Omicron status based on time alone. — derive_genomic_variant","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_genomic_variant.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Give a inferred Alpha, Delta or Omicron status based on time alone. — derive_genomic_variant","text":"dataframe","code":""},{"path":"/reference/derive_genomic_variant.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Give a inferred Alpha, Delta or Omicron status based on time alone. — derive_genomic_variant","text":"Sanger centre data Pre-alpha 05 Dec 2020 Alpha 13 Feb 2021 15 May 2021 Delta 01 Jun 2021 07 Nov 2021 Omicron 07 Feb 2022 present","code":""},{"path":"/reference/derive_gp_linkage.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify patients from the GP surgeries in linked primary care study — derive_gp_linkage","title":"Identify patients from the GP surgeries in linked primary care study — derive_gp_linkage","text":"Identify patients GP surgeries linked primary care study","code":""},{"path":"/reference/derive_gp_linkage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify patients from the GP surgeries in linked primary care study — derive_gp_linkage","text":"","code":"derive_gp_linkage(df, v)"},{"path":"/reference/derive_gp_linkage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify patients from the GP surgeries in linked primary care study — derive_gp_linkage","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df)","code":""},{"path":"/reference/derive_gp_linkage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify patients from the GP surgeries in linked primary care study — derive_gp_linkage","text":"dataframe","code":""},{"path":"/reference/derive_haematology_categories.html","id":null,"dir":"Reference","previous_headings":"","what":"Binary outcomes for haematology data — derive_haematology_categories","title":"Binary outcomes for haematology data — derive_haematology_categories","text":"Elevated troponin : > 18:  18ng/L simply 99th percentile value Beckman assay use quoted IFCC. elected use sex-specific 99th percentile values although also quoted incorporate analysis. sure aware 4th Universal definition MI requires rise fall 99th percentile etc.","code":""},{"path":"/reference/derive_haematology_categories.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Binary outcomes for haematology data — derive_haematology_categories","text":"","code":"derive_haematology_categories(df, v, ...)"},{"path":"/reference/derive_haematology_categories.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Binary outcomes for haematology data — derive_haematology_categories","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_haematology_categories.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Binary outcomes for haematology data — derive_haematology_categories","text":"dataframe","code":""},{"path":"/reference/derive_hospital_burden_outcomes.html","id":null,"dir":"Reference","previous_headings":"","what":"Binary outcomes for hospital burden — derive_hospital_burden_outcomes","title":"Binary outcomes for hospital burden — derive_hospital_burden_outcomes","text":"outcomes tested Delta vs Omicron severity paper sensitivity analysis. defined COVID cases.","code":""},{"path":"/reference/derive_hospital_burden_outcomes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Binary outcomes for hospital burden — derive_hospital_burden_outcomes","text":"","code":"derive_hospital_burden_outcomes(df, v, ...)"},{"path":"/reference/derive_hospital_burden_outcomes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Binary outcomes for hospital burden — derive_hospital_burden_outcomes","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_hospital_burden_outcomes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Binary outcomes for hospital burden — derive_hospital_burden_outcomes","text":"dataframe","code":""},{"path":"/reference/derive_hospital_burden_outcomes.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Binary outcomes for hospital burden — derive_hospital_burden_outcomes","text":"O2 requirement within 7 days (various cut-offs) respiratory support 7 days (various cut-offs) LOS > X days first 7 days (various cut-offs)","code":""},{"path":"/reference/derive_infective_classification.html","id":null,"dir":"Reference","previous_headings":"","what":"Determine if an admission is due to an infective cause — derive_infective_classification","title":"Determine if an admission is due to an infective cause — derive_infective_classification","text":"Infective admissions defined : pneumonias NP-LRTI laboratory confirmed COVID diagnosis admission swab COVID positive","code":""},{"path":"/reference/derive_infective_classification.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Determine if an admission is due to an infective cause — derive_infective_classification","text":"","code":"derive_infective_classification(df, v)"},{"path":"/reference/derive_infective_classification.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Determine if an admission is due to an infective cause — derive_infective_classification","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df)","code":""},{"path":"/reference/derive_infective_classification.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Determine if an admission is due to an infective cause — derive_infective_classification","text":"dataframe","code":""},{"path":"/reference/derive_infective_classification.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Determine if an admission is due to an infective cause — derive_infective_classification","text":"Infective admissions excluded : Standard care states non-infectious process SOC non-LRTI (none categories ) unknowns defined non-Infective","code":""},{"path":"/reference/derive_invasive_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Pneumococcal invasive status and binary test category — derive_invasive_status","title":"Pneumococcal invasive status and binary test category — derive_invasive_status","text":"Pneumococcal invasive status binary test category","code":""},{"path":"/reference/derive_invasive_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pneumococcal invasive status and binary test category — derive_invasive_status","text":"","code":"derive_invasive_status(df, ...)"},{"path":"/reference/derive_invasive_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pneumococcal invasive status and binary test category — derive_invasive_status","text":"df dataframe. ... ignored","code":""},{"path":"/reference/derive_invasive_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pneumococcal invasive status and binary test category — derive_invasive_status","text":"dataframe","code":""},{"path":"/reference/derive_nosocomial_covid_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Did the patient catch COVID in hospital — derive_nosocomial_covid_status","title":"Did the patient catch COVID in hospital — derive_nosocomial_covid_status","text":"relevant SARS-CoV-2 PCR positive patient. Timing positive test compared admission: relies knowing dates hence works identifiable data sets,","code":""},{"path":"/reference/derive_nosocomial_covid_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Did the patient catch COVID in hospital — derive_nosocomial_covid_status","text":"","code":"derive_nosocomial_covid_status(df, v, ...)"},{"path":"/reference/derive_nosocomial_covid_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Did the patient catch COVID in hospital — derive_nosocomial_covid_status","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_nosocomial_covid_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Did the patient catch COVID in hospital — derive_nosocomial_covid_status","text":"dataframe","code":""},{"path":"/reference/derive_nosocomial_covid_status.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Did the patient catch COVID in hospital — derive_nosocomial_covid_status","text":"Logic : Community PCR result predates admission Probably commuinity PCR result within 7 days admission Probably nosocomial 7-28 days admission Otherwise undefined.","code":""},{"path":"/reference/derive_nosocomial_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify patients who were admitted already prior to study entry — derive_nosocomial_status","title":"Identify patients who were admitted already prior to study entry — derive_nosocomial_status","text":"Hospital acquired COVID recorded explicitly 2 places patients. large difference admission date enrollment date (<21 days) suggestive cases. data probably collected COVID cases shoudl treated caution.","code":""},{"path":"/reference/derive_nosocomial_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify patients who were admitted already prior to study entry — derive_nosocomial_status","text":"","code":"derive_nosocomial_status(df, v)"},{"path":"/reference/derive_nosocomial_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify patients who were admitted already prior to study entry — derive_nosocomial_status","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df)","code":""},{"path":"/reference/derive_nosocomial_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify patients who were admitted already prior to study entry — derive_nosocomial_status","text":"dataframe","code":""},{"path":"/reference/derive_pandemic_timings.html","id":null,"dir":"Reference","previous_headings":"","what":"Date columns — derive_pandemic_timings","title":"Date columns — derive_pandemic_timings","text":"Date columns","code":""},{"path":"/reference/derive_pandemic_timings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Date columns — derive_pandemic_timings","text":"","code":"derive_pandemic_timings(date_col, prefix)"},{"path":"/reference/derive_pandemic_timings.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Date columns — derive_pandemic_timings","text":"date_col date column prefix prefix columns added","code":""},{"path":"/reference/derive_pandemic_timings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Date columns — derive_pandemic_timings","text":"derive_... style function augment data set containing date_col set columns describing timing.","code":""},{"path":"/reference/derive_patient_identifier.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a unique patient level id (if it does not already exist) — derive_patient_identifier","title":"Create a unique patient level id (if it does not already exist) — derive_patient_identifier","text":"patient identifier derived record number first record number (ensuring matches) entry record number. deals multiple admissions data set. patient identifiable NHS data NHS number.","code":""},{"path":"/reference/derive_patient_identifier.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a unique patient level id (if it does not already exist) — derive_patient_identifier","text":"","code":"derive_patient_identifier(df, v)"},{"path":"/reference/derive_patient_identifier.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a unique patient level id (if it does not already exist) — derive_patient_identifier","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df)","code":""},{"path":"/reference/derive_patient_identifier.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a unique patient level id (if it does not already exist) — derive_patient_identifier","text":"dataframe","code":""},{"path":"/reference/derive_pcv_groupings.html","id":null,"dir":"Reference","previous_headings":"","what":"Group pneumo serotypes according to e.g. vaccine coverage — derive_pcv_groupings","title":"Group pneumo serotypes according to e.g. vaccine coverage — derive_pcv_groupings","text":"range useful serotype groups defined list uad_groups. default_pcv_map gives set mappings group headings gives overall serotype distribution vaccine.","code":""},{"path":"/reference/derive_pcv_groupings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Group pneumo serotypes according to e.g. vaccine coverage — derive_pcv_groupings","text":"","code":"derive_pcv_groupings(   df,   ...,   pcv_map = uad_pcv_map,   not_matched = \"Other\",   col_name = \"pneumo.pcv_group\" )"},{"path":"/reference/derive_pcv_groupings.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Group pneumo serotypes according to e.g. vaccine coverage — derive_pcv_groupings","text":"df normalised urine antigen data ... ignored pcv_map 2 column data frame mapping group uad_analysis not_matched call column non-matched serotypes? Default , Non vaccine type might preferred. col_name target column name pcv grouping (defaults pneumo.pcv_group)","code":""},{"path":"/reference/derive_pcv_groupings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Group pneumo serotypes according to e.g. vaccine coverage — derive_pcv_groupings","text":"augmented data frame additional column defined col_name","code":""},{"path":"/reference/derive_pcv_groupings.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Group pneumo serotypes according to e.g. vaccine coverage — derive_pcv_groupings","text":"logic employed combining elements : (result == \"Unknown\") ~ \"Unknown\" (result == \"Positive\") ~ \"Positive\" (result == \"Negative\") ~ \"Negative\" TRUE ~ \"\"","code":""},{"path":"/reference/derive_phe_pcv_group.html","id":null,"dir":"Reference","previous_headings":"","what":"Get vaccine coverage group for known serotype — derive_phe_pcv_group","title":"Get vaccine coverage group for known serotype — derive_phe_pcv_group","text":"longitudinal oneumocococcal data, range useful serotype groups defined list avoncap::serotype_data. avoncap::serotype_pcv_map gives set mappings (multiple) group headings gives overall serotype distribution vaccine.","code":""},{"path":"/reference/derive_phe_pcv_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get vaccine coverage group for known serotype — derive_phe_pcv_group","text":"","code":"derive_phe_pcv_group(df, v, ...)"},{"path":"/reference/derive_phe_pcv_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get vaccine coverage group for known serotype — derive_phe_pcv_group","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_phe_pcv_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get vaccine coverage group for known serotype — derive_phe_pcv_group","text":"dataframe","code":""},{"path":"/reference/derive_pneumo_clinical_syndrome.html","id":null,"dir":"Reference","previous_headings":"","what":"Add in clinical syndrome indicator — derive_pneumo_clinical_syndrome","title":"Add in clinical syndrome indicator — derive_pneumo_clinical_syndrome","text":"list presentations based site LRTI Meningitis Effusion/Empyema Septic arthritis URTI ","code":""},{"path":"/reference/derive_pneumo_clinical_syndrome.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add in clinical syndrome indicator — derive_pneumo_clinical_syndrome","text":"","code":"derive_pneumo_clinical_syndrome(df, v, ...)"},{"path":"/reference/derive_pneumo_clinical_syndrome.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add in clinical syndrome indicator — derive_pneumo_clinical_syndrome","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_pneumo_clinical_syndrome.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add in clinical syndrome indicator — derive_pneumo_clinical_syndrome","text":"dataframe","code":""},{"path":"/reference/derive_pneumo_polyfill.html","id":null,"dir":"Reference","previous_headings":"","what":"Make pneumo data compatible with AvonCAP — derive_pneumo_polyfill","title":"Make pneumo data compatible with AvonCAP — derive_pneumo_polyfill","text":"Needed : derive_simpler_comorbidities derive_pneumococcal_high_risk derive_pneumococcal_risk_category","code":""},{"path":"/reference/derive_pneumo_polyfill.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make pneumo data compatible with AvonCAP — derive_pneumo_polyfill","text":"","code":"derive_pneumo_polyfill(df, ...)"},{"path":"/reference/derive_pneumo_polyfill.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make pneumo data compatible with AvonCAP — derive_pneumo_polyfill","text":"df dataframe. ... ignored","code":""},{"path":"/reference/derive_pneumo_polyfill.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make pneumo data compatible with AvonCAP — derive_pneumo_polyfill","text":"dataframe","code":""},{"path":"/reference/derive_pneumo_uad_panel.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate UAD panel for test — derive_pneumo_uad_panel","title":"Calculate UAD panel for test — derive_pneumo_uad_panel","text":"panels UAD1 PCV13 serotypes, UAD2 PPV23 serotypes.","code":""},{"path":"/reference/derive_pneumo_uad_panel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate UAD panel for test — derive_pneumo_uad_panel","text":"","code":"derive_pneumo_uad_panel(df, ...)"},{"path":"/reference/derive_pneumo_uad_panel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate UAD panel for test — derive_pneumo_uad_panel","text":"df pneumo serotype dataframe ... ignored","code":""},{"path":"/reference/derive_pneumo_uad_panel.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate UAD panel for test — derive_pneumo_uad_panel","text":"dataframe additional columns pneumo.uad1_panel_result, pneumo.uad2_panel_result, pneumo.non_uad_panel_result, pneumo.serotype_summary_result","code":""},{"path":"/reference/derive_pneumo_uad_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate summary status from UAD (or other serotype) panel results — derive_pneumo_uad_status","title":"Calculate summary status from UAD (or other serotype) panel results — derive_pneumo_uad_status","text":"logic defined derive_pcv_groupings().","code":""},{"path":"/reference/derive_pneumo_uad_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate summary status from UAD (or other serotype) panel results — derive_pneumo_uad_status","text":"","code":"derive_pneumo_uad_status(df, ...)"},{"path":"/reference/derive_pneumo_uad_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate summary status from UAD (or other serotype) panel results — derive_pneumo_uad_status","text":"df pneumo serotype dataframe ... ignored","code":""},{"path":"/reference/derive_pneumo_uad_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate summary status from UAD (or other serotype) panel results — derive_pneumo_uad_status","text":"dataframe additional columns pneumo.uad1_panel_result, pneumo.uad2_panel_result, pneumo.non_uad_panel_result, pneumo.serotype_summary_result","code":""},{"path":"/reference/derive_pneumococcal_categories.html","id":null,"dir":"Reference","previous_headings":"","what":"The pneumococcal incidence diagnostic classifications — derive_pneumococcal_categories","title":"The pneumococcal incidence diagnostic classifications — derive_pneumococcal_categories","text":"4 category disjoint classification.","code":""},{"path":"/reference/derive_pneumococcal_categories.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"The pneumococcal incidence diagnostic classifications — derive_pneumococcal_categories","text":"","code":"derive_pneumococcal_categories(df, v, ...)"},{"path":"/reference/derive_pneumococcal_categories.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"The pneumococcal incidence diagnostic classifications — derive_pneumococcal_categories","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_pneumococcal_categories.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"The pneumococcal incidence diagnostic classifications — derive_pneumococcal_categories","text":"dataframe","code":""},{"path":"/reference/derive_pneumococcal_categories.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"The pneumococcal incidence diagnostic classifications — derive_pneumococcal_categories","text":"pneumo.presentation_class: CAP+/RAD+ - radiologically proved pneumonia CAP+/RAD- - pneumonia without x-ray confirmation NP-LRTI - non-pneumonic lower respiratory tract infection evidence LRTI - believed non-infective admission, last group usually discarded analysis, however really describes people without clinical diagnosis LRTI admission. still undiagnosed infection , patients COVID (possibly without lower respiratory symptoms?).","code":""},{"path":"/reference/derive_pneumococcal_high_risk.html","id":null,"dir":"Reference","previous_headings":"","what":"Determine if patient is in a high pneumococcal risk group — derive_pneumococcal_high_risk","title":"Determine if patient is in a high pneumococcal risk group — derive_pneumococcal_high_risk","text":"High pneumococcal risk defined following: 65 years old pneumococcal risks comorbid copd interstitial lung disease cystic fibrosis hypertension CCF ischaemic heart disease chronic kidney disease chronic liver disease diabetes asthmatic immunodeficiency immunosupression","code":""},{"path":"/reference/derive_pneumococcal_high_risk.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Determine if patient is in a high pneumococcal risk group — derive_pneumococcal_high_risk","text":"","code":"derive_pneumococcal_high_risk(df, v, ...)"},{"path":"/reference/derive_pneumococcal_high_risk.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Determine if patient is in a high pneumococcal risk group — derive_pneumococcal_high_risk","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_pneumococcal_high_risk.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Determine if patient is in a high pneumococcal risk group — derive_pneumococcal_high_risk","text":"dataframe","code":""},{"path":"/reference/derive_pneumococcal_risk_category.html","id":null,"dir":"Reference","previous_headings":"","what":"Determine pneumococcal risk group — derive_pneumococcal_risk_category","title":"Determine pneumococcal risk group — derive_pneumococcal_risk_category","text":"Original algorithm B1851202 SAP defines 3 class risk group:","code":""},{"path":"/reference/derive_pneumococcal_risk_category.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Determine pneumococcal risk group — derive_pneumococcal_risk_category","text":"","code":"derive_pneumococcal_risk_category(df, v, ...)"},{"path":"/reference/derive_pneumococcal_risk_category.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Determine pneumococcal risk group — derive_pneumococcal_risk_category","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_pneumococcal_risk_category.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Determine pneumococcal risk group — derive_pneumococcal_risk_category","text":"dataframe","code":""},{"path":"/reference/derive_pneumococcal_risk_category.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Determine pneumococcal risk group — derive_pneumococcal_risk_category","text":"High-risk (immunocompromised) Asplenia - supported Cancer/Malignancy, Hematologic - OK Cancer/Malignancy, Solid Tumor - OK Chronic Kidney Disease - OK Human Immunodeficiency Virus (HIV) – AIDS - OK Human Immunodeficiency Virus (HIV) – AIDS - OK Immunodeficiency - OK Immunosuppressant Drug Therapy - OK Organ Transplantation - OK Multiple Myeloma - supported Risk (immunocompetent) Asthma - OK Alcoholism - OK Celiac Disease - supported Chronic Liver Disease without Hepatic Failure - OK Chronic Liver Disease Hepatic Failure - OK Chronic Obstructive Pulmonary Disease - OK Cochlear Implant - supported Congestive Heart Failure - OK Coronary Artery Disease (CAD) - OK Chronic Neurologic Diseases - OK Coagulation factor replacement therapy - supported CSF Leak - supported Diabetes Treated Medication - OK syndrome - OK Institutionalized nursing home LTC facility (Nursing home long-term care facility disability dependency subject characteristics/risk determinants eCRF page) - OK Occupational risk exposure metal fumes - OK Chronic Heart Disease - OK Chronic Lung Disease - OK pneumococcal disease risk factors - OK Previous Invasive Pneumococcal Disease - supported Tobacco smoking (Tobacco/E-Cigarettes) - OK Anything else low risk","code":""},{"path":"/reference/derive_polyfill_central.html","id":null,"dir":"Reference","previous_headings":"","what":"Polyfill data — derive_polyfill_central","title":"Polyfill data — derive_polyfill_central","text":"basic context allow comparison ED data.","code":""},{"path":"/reference/derive_polyfill_central.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Polyfill data — derive_polyfill_central","text":"","code":"derive_polyfill_central(df, v, ...)"},{"path":"/reference/derive_polyfill_central.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Polyfill data — derive_polyfill_central","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_polyfill_central.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Polyfill data — derive_polyfill_central","text":"dataframe","code":""},{"path":"/reference/derive_polyfill_central.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Polyfill data — derive_polyfill_central","text":"patients admitted","code":""},{"path":"/reference/derive_polyfill_ed.html","id":null,"dir":"Reference","previous_headings":"","what":"Polyfill ED data — derive_polyfill_ed","title":"Polyfill ED data — derive_polyfill_ed","text":"ED data different fields main avoncap data.","code":""},{"path":"/reference/derive_polyfill_ed.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Polyfill ED data — derive_polyfill_ed","text":"","code":"derive_polyfill_ed(df, v, ...)"},{"path":"/reference/derive_polyfill_ed.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Polyfill ED data — derive_polyfill_ed","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_polyfill_ed.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Polyfill ED data — derive_polyfill_ed","text":"dataframe","code":""},{"path":"/reference/derive_polyfill_ed.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Polyfill ED data — derive_polyfill_ed","text":"missing admission cxr summary field needed calculate pneumonia fixed admission route \"&E\" (.e. ED non UK people) None patients admitted Hospital admission length stay zero","code":""},{"path":"/reference/derive_presumed_diagnosis_categories.html","id":null,"dir":"Reference","previous_headings":"","what":"Create presumed diagnostic categories — derive_presumed_diagnosis_categories","title":"Create presumed diagnostic categories — derive_presumed_diagnosis_categories","text":"Pneumonia one : Initial diagnosis CAP (supported initial radiology clinically) Empyema abscess","code":""},{"path":"/reference/derive_presumed_diagnosis_categories.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create presumed diagnostic categories — derive_presumed_diagnosis_categories","text":"","code":"derive_presumed_diagnosis_categories(df, v)"},{"path":"/reference/derive_presumed_diagnosis_categories.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create presumed diagnostic categories — derive_presumed_diagnosis_categories","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df)","code":""},{"path":"/reference/derive_presumed_diagnosis_categories.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create presumed diagnostic categories — derive_presumed_diagnosis_categories","text":"dataframe","code":""},{"path":"/reference/derive_presumed_diagnosis_categories.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create presumed diagnostic categories — derive_presumed_diagnosis_categories","text":"Presumed clinical presentation: Pneumonia - implies Infective NP-LRTI - implies Infective evidence LRTI (include CRDE HF)","code":""},{"path":"/reference/derive_qcovid.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate a QCOVID2 score from AvonCap data source — derive_qcovid","title":"Calculate a QCOVID2 score from AvonCap data source — derive_qcovid","text":"uses inbuilt imd_to_townsend map. implements cut version QCovid2 score depending data available.","code":""},{"path":"/reference/derive_qcovid.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate a QCOVID2 score from AvonCap data source — derive_qcovid","text":"","code":"derive_qcovid(df, v = avoncap_df %>% get_value_sets())"},{"path":"/reference/derive_qcovid.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate a QCOVID2 score from AvonCap data source — derive_qcovid","text":"df normalised avoncap data source v value set","code":""},{"path":"/reference/derive_qcovid.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate a QCOVID2 score from AvonCap data source — derive_qcovid","text":"dataframe additional columns, qcovid2.log_hazard, covid2.hazard_ratio: log hazard rate QCOVID2 score missing data substituted reference value QCOVID2 population. qcovid2.log_comorbid_hazard, qcovid2.comorbid_hazard_ratio: log hazard rate comorbid conditions including age BMI.","code":""},{"path":"/reference/derive_quintile_category.html","id":null,"dir":"Reference","previous_headings":"","what":"Split a continuous variable into quintiles — derive_quintile_category","title":"Split a continuous variable into quintiles — derive_quintile_category","text":"Split continuous variable quintiles","code":""},{"path":"/reference/derive_quintile_category.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Split a continuous variable into quintiles — derive_quintile_category","text":"","code":"derive_quintile_category(col, labels = c(\"1-short\", \"2\", \"3\", \"4\", \"5-long\"))"},{"path":"/reference/derive_quintile_category.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Split a continuous variable into quintiles — derive_quintile_category","text":"col continuous data column categorised quintile. labels category labels","code":""},{"path":"/reference/derive_quintile_category.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Split a continuous variable into quintiles — derive_quintile_category","text":"derive_... style function augments data set col xxx col xxx_quintile containing quintiles","code":""},{"path":"/reference/derive_severe_disease_outcomes.html","id":null,"dir":"Reference","previous_headings":"","what":"Binary outcomes for severe disease — derive_severe_disease_outcomes","title":"Binary outcomes for severe disease — derive_severe_disease_outcomes","text":"Confirmed death within 30 days (subject potential censoring) Confirmed death within 1 year (subject potential censoring). date censoring depends mortality data updated. Currently 04 Oct 2024 Confirmed death (length follow ) ICU admission","code":""},{"path":"/reference/derive_severe_disease_outcomes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Binary outcomes for severe disease — derive_severe_disease_outcomes","text":"","code":"derive_severe_disease_outcomes(df, v, ...)"},{"path":"/reference/derive_severe_disease_outcomes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Binary outcomes for severe disease — derive_severe_disease_outcomes","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_severe_disease_outcomes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Binary outcomes for severe disease — derive_severe_disease_outcomes","text":"dataframe","code":""},{"path":"/reference/derive_severe_disease_outcomes.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Binary outcomes for severe disease — derive_severe_disease_outcomes","text":"described aLRTD paper. outcomes ","code":""},{"path":"/reference/derive_simpler_comorbidities.html","id":null,"dir":"Reference","previous_headings":"","what":"Rationalise some of the more detailed comorbidities — derive_simpler_comorbidities","title":"Rationalise some of the more detailed comorbidities — derive_simpler_comorbidities","text":"generate summary values","code":""},{"path":"/reference/derive_simpler_comorbidities.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Rationalise some of the more detailed comorbidities — derive_simpler_comorbidities","text":"","code":"derive_simpler_comorbidities(df, v, ...)"},{"path":"/reference/derive_simpler_comorbidities.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Rationalise some of the more detailed comorbidities — derive_simpler_comorbidities","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_simpler_comorbidities.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Rationalise some of the more detailed comorbidities — derive_simpler_comorbidities","text":"dataframe","code":""},{"path":"/reference/derive_simpler_comorbidities.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Rationalise some of the more detailed comorbidities — derive_simpler_comorbidities","text":"simple DM without insulin dependence Solid / Haematological / cancer present binary indicators chronic resp dx: .e. asthma, bronchiectasis, chronic pleural disease, COPD, interstitial lung dx, cyctic fibrosis, chronic resp dx chronic heart disease: pulmonary htn, CCF, IHD, previous MI, congential heart dx, hypertension, AF, arrythmia, heart dx, heart dx Stroke TIA binary immune compromise binary (immunodeficient immune suppressants)","code":""},{"path":"/reference/derive_survival_censoring.html","id":null,"dir":"Reference","previous_headings":"","what":"Survival outcomes — derive_survival_censoring","title":"Survival outcomes — derive_survival_censoring","text":"Expects days since admission: survival.length_of_stay - length stay discharge death (NA still hosptial), survival.uncensored_time_to_death - time death (NA alive last obs), survival.last_observed_event - last time patient observed alive.","code":""},{"path":"/reference/derive_survival_censoring.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Survival outcomes — derive_survival_censoring","text":"","code":"derive_survival_censoring(df, v, ...)"},{"path":"/reference/derive_survival_censoring.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Survival outcomes — derive_survival_censoring","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_survival_censoring.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Survival outcomes — derive_survival_censoring","text":"dataframe","code":""},{"path":"/reference/derive_survival_censoring.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Survival outcomes — derive_survival_censoring","text":"Calculates 30 day survival duration censoring status survfit 1 year survival duration censoring status survfit Hospital length stay censoring status survfit Categorical length stay 30 day survival 0-3, 4-6, 7-13, 14-29, gte 30 Survival data form: survival.30_day_death_xxx, survival.1_yr_death_xxx, survival.30_day_discharge xxx_time: follow time event days (max 30 365). xxx_event: event type indicator 0 = alive event (censored), 1 = dead. length stay: 0 = still inpatient / died (censored), 1 = discharged hospital survival model form: survival::Surv(time = xxx_time, event=xxx_event) ~ ...","code":""},{"path":"/reference/derive_survival_times_avoncap.html","id":null,"dir":"Reference","previous_headings":"","what":"Survival analysis times — derive_survival_times_avoncap","title":"Survival analysis times — derive_survival_times_avoncap","text":"Fixes data issue length stay survival duration filled across 2 columns. missing last observation dates can calculate survival censoring consistently data sets.","code":""},{"path":"/reference/derive_survival_times_avoncap.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Survival analysis times — derive_survival_times_avoncap","text":"","code":"derive_survival_times_avoncap(df, v, ...)"},{"path":"/reference/derive_survival_times_avoncap.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Survival analysis times — derive_survival_times_avoncap","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_survival_times_avoncap.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Survival analysis times — derive_survival_times_avoncap","text":"dataframe","code":""},{"path":"/reference/derive_survival_times_avoncap.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Survival analysis times — derive_survival_times_avoncap","text":"Calculates: consistent length stay - shortest length stay 30 day 1 yr survival duration consistent uncensored time death - shortest 30 day 1 yr survival duration consistent time last observation","code":""},{"path":"/reference/derive_survival_times_pneumo.html","id":null,"dir":"Reference","previous_headings":"","what":"Survival analysis times — derive_survival_times_pneumo","title":"Survival analysis times — derive_survival_times_pneumo","text":"Fixes data issue length stay survival duration filled across 2 columns. missing last observation dates can calculate survival censoring consistently data sets.","code":""},{"path":"/reference/derive_survival_times_pneumo.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Survival analysis times — derive_survival_times_pneumo","text":"","code":"derive_survival_times_pneumo(df, v, ...)"},{"path":"/reference/derive_survival_times_pneumo.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Survival analysis times — derive_survival_times_pneumo","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_survival_times_pneumo.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Survival analysis times — derive_survival_times_pneumo","text":"dataframe","code":""},{"path":"/reference/derive_survival_times_pneumo.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Survival analysis times — derive_survival_times_pneumo","text":"Calculates: consistent length stay - shortest length stay 30 day 1 yr survival duration consistent uncensored time death - shortest 30 day 1 yr survival duration consistent time last observation","code":""},{"path":"/reference/derive_template.html","id":null,"dir":"Reference","previous_headings":"","what":"Derived data function template — derive_template","title":"Derived data function template — derive_template","text":"Derived data function template","code":""},{"path":"/reference/derive_template.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Derived data function template — derive_template","text":"","code":"derive_template(df, v, ...)"},{"path":"/reference/derive_template.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Derived data function template — derive_template","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_template.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Derived data function template — derive_template","text":"dataframe","code":""},{"path":"/reference/derive_vaccination_timings.html","id":null,"dir":"Reference","previous_headings":"","what":"Derive times from vaccination to symptom onset — derive_vaccination_timings","title":"Derive times from vaccination to symptom onset — derive_vaccination_timings","text":"symptom duration given assumed zero.","code":""},{"path":"/reference/derive_vaccination_timings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Derive times from vaccination to symptom onset — derive_vaccination_timings","text":"","code":"derive_vaccination_timings(df, v, ...)"},{"path":"/reference/derive_vaccination_timings.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Derive times from vaccination to symptom onset — derive_vaccination_timings","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_vaccination_timings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Derive times from vaccination to symptom onset — derive_vaccination_timings","text":"dataframe","code":""},{"path":"/reference/derive_vaccine_combinations.html","id":null,"dir":"Reference","previous_headings":"","what":"Deprecated - Vaccine combinations are less relevant now — derive_vaccine_combinations","title":"Deprecated - Vaccine combinations are less relevant now — derive_vaccine_combinations","text":"many potential combinations 4th, 5th sixth dose make useful.","code":""},{"path":"/reference/derive_vaccine_combinations.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Deprecated - Vaccine combinations are less relevant now — derive_vaccine_combinations","text":"","code":"derive_vaccine_combinations(df, v, ...)"},{"path":"/reference/derive_vaccine_combinations.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Deprecated - Vaccine combinations are less relevant now — derive_vaccine_combinations","text":"df dataframe. v value set. usually precomputed augment framework value set can explicitly supplied v = get_value_sets(df) ... ignored","code":""},{"path":"/reference/derive_vaccine_combinations.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Deprecated - Vaccine combinations are less relevant now — derive_vaccine_combinations","text":"dataframe","code":""},{"path":"/reference/dot-cache_clear.html","id":null,"dir":"Reference","previous_headings":"","what":"Clear data from the passthrough cache for complex or long running operations — .cache_clear","title":"Clear data from the passthrough cache for complex or long running operations — .cache_clear","text":"Clear data passthrough cache complex long running operations","code":""},{"path":"/reference/dot-cache_clear.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clear data from the passthrough cache for complex or long running operations — .cache_clear","text":"","code":".cache_clear(   .cache = getOption(\"cache.dir\", rappdirs::user_cache_dir(utils::packageName())),   .prefix = \".*\",   interactive = TRUE )"},{"path":"/reference/dot-cache_clear.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clear data from the passthrough cache for complex or long running operations — .cache_clear","text":".cache location cache directory. May get value options(\"ggrrr.cache.dir\") default value rappdirs::user_cache_dir(\"ggrrr\") .prefix regular expression matching prefix cached item, selective clean operations. defaults everything. interactive suppress sure? warning FALSE value (defaults TRUE)","code":""},{"path":"/reference/dot-cache_clear.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clear data from the passthrough cache for complex or long running operations — .cache_clear","text":"nothing. called side effects","code":""},{"path":"/reference/dot-cache_delete_stale.html","id":null,"dir":"Reference","previous_headings":"","what":"Delete stale files in a cache — .cache_delete_stale","title":"Delete stale files in a cache — .cache_delete_stale","text":"Staleness determined number days 2am current day current time-zone. item cached one day becomes stale 2am day cached. time configurable option(cache.time_day_starts = 0) midnight. Automated analysis using caches updated data ensure analysis cross time point otherwise may end using old data.","code":""},{"path":"/reference/dot-cache_delete_stale.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Delete stale files in a cache — .cache_delete_stale","text":"","code":".cache_delete_stale(   .cache = getOption(\"cache.dir\", rappdirs::user_cache_dir(utils::packageName())),   .prefix = \".*\",   .stale = Inf )"},{"path":"/reference/dot-cache_delete_stale.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Delete stale files in a cache — .cache_delete_stale","text":".cache location cache directory. May get value options(\"cache.dir\") default value rappdirs::user_cache_dir(\"ggrrr\") .prefix name operation can namespace cached files selective clean operations .stale length time days keep cached data considering stale.","code":""},{"path":"/reference/dot-cache_delete_stale.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Delete stale files in a cache — .cache_delete_stale","text":"nothing. called side effects.","code":""},{"path":"/reference/dot-cache_download.html","id":null,"dir":"Reference","previous_headings":"","what":"Download a file into a local cache. — .cache_download","title":"Download a file into a local cache. — .cache_download","text":"function copies remote file local cache makes sure reused.","code":""},{"path":"/reference/dot-cache_download.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download a file into a local cache. — .cache_download","text":"","code":".cache_download(   url,   ...,   .nocache = getOption(\"cache.disable\", default = FALSE),   .cache = getOption(\"cache.download\", rappdirs::user_cache_dir(utils::packageName())),   .stale = Inf,   .extn = NULL )"},{"path":"/reference/dot-cache_download.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download a file into a local cache. — .cache_download","text":"url url download ... ignored .nocache set TRUE caching disabled .cache location downloaded files .stale long leave file replacing . .extn file name extension","code":""},{"path":"/reference/dot-cache_download.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download a file into a local cache. — .cache_download","text":"path downloaded file","code":""},{"path":"/reference/dot-cached.html","id":null,"dir":"Reference","previous_headings":"","what":"A simple pass-through cache for complex or long running operations — .cached","title":"A simple pass-through cache for complex or long running operations — .cached","text":"executes expr saves output RDS file indexed code expr hash input variables (contain variable inputs)","code":""},{"path":"/reference/dot-cached.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A simple pass-through cache for complex or long running operations — .cached","text":"","code":".cached(   .expr,   ...,   .nocache = getOption(\"cache.disable\", default = FALSE),   .cache = getOption(\"cache.dir\", rappdirs::user_cache_dir(utils::packageName())),   .prefix = \"cached\",   .stale = Inf )"},{"path":"/reference/dot-cached.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"A simple pass-through cache for complex or long running operations — .cached","text":".expr code output requires caching. return value create side effects change global variables. ... inputs code expr depends changes require code re-running, Sys.Date() .nocache option defeat caching can set globally options(\"cache.disable\"=TRUE) .cache location cache directory. May get value options(\"cache.dir\") default value rappdirs::user_cache_dir(\"ggrrr\") .prefix name operation can namespace cached files selective clean operations .stale length time days keep cached data considering stale. can also set options(\"cache.stale\")","code":""},{"path":"/reference/dot-cached.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"A simple pass-through cache for complex or long running operations — .cached","text":"output .expr usually value","code":""},{"path":"/reference/extract_dependencies.html","id":null,"dir":"Reference","previous_headings":"","what":"Get provenance of data column — extract_dependencies","title":"Get provenance of data column — extract_dependencies","text":"data set normalised augmented original column names stored metadata. helps us determine particular item created. future useful documentation.","code":""},{"path":"/reference/extract_dependencies.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get provenance of data column — extract_dependencies","text":"","code":"extract_dependencies(data, col, original = TRUE)"},{"path":"/reference/extract_dependencies.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get provenance of data column — extract_dependencies","text":"data dataframe col column symbol original map names original column names data. false function returns list current normalised column names.","code":""},{"path":"/reference/extract_dependencies.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get provenance of data column — extract_dependencies","text":"named list dependencies original column names given column","code":""},{"path":"/reference/find_new_field_names.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the transformed columns from original field names — find_new_field_names","title":"Get the transformed columns from original field names — find_new_field_names","text":"Get transformed columns original field names","code":""},{"path":"/reference/find_new_field_names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the transformed columns from original field names — find_new_field_names","text":"","code":"find_new_field_names(normalised, fields)"},{"path":"/reference/find_new_field_names.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the transformed columns from original field names — find_new_field_names","text":"normalised transformed data set. fields vector field names","code":""},{"path":"/reference/find_new_field_names.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the transformed columns from original field names — find_new_field_names","text":"named list mapping original new columns","code":""},{"path":"/reference/frameworks.html","id":null,"dir":"Reference","previous_headings":"","what":"Frameworks — frameworks","title":"Frameworks — frameworks","text":"list validation, normalisation augmentation frameworks. one validation per data set. may mulitple normalisations augmentations depending aspect data extracting (e.g. re-nesting flattened data.)","code":""},{"path":"/reference/get_value_sets.html","id":null,"dir":"Reference","previous_headings":"","what":"Get a value set list of a dataframe — get_value_sets","title":"Get a value set list of a dataframe — get_value_sets","text":"function examines dataframe returns list columns sub-lists options factors. provides programmatic access (automcomplete) values available dataframe, throws early error try access data variable exist.","code":""},{"path":"/reference/get_value_sets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get a value set list of a dataframe — get_value_sets","text":"","code":"get_value_sets(df)"},{"path":"/reference/get_value_sets.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get a value set list of a dataframe — get_value_sets","text":"df dataframe examine","code":""},{"path":"/reference/get_value_sets.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get a value set list of a dataframe — get_value_sets","text":"list lists column name factor levels list, checked list.","code":""},{"path":"/reference/icb_surgeries.html","id":null,"dir":"Reference","previous_headings":"","what":"GP surgeries in the Bristol ICB area — icb_surgeries","title":"GP surgeries in the Bristol ICB area — icb_surgeries","text":"denominator relates patients coming GP surgeries","code":""},{"path":"/reference/icb_surgeries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"GP surgeries in the Bristol ICB area — icb_surgeries","text":"","code":"data(icb_surgeries)"},{"path":"/reference/icb_surgeries.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"GP surgeries in the Bristol ICB area — icb_surgeries","text":"dataframe containing following columns: code - official ODS code GP surgery name - official surgery name. 82 rows 2 columns","code":""},{"path":"/reference/imd_to_townsend.html","id":null,"dir":"Reference","previous_headings":"","what":"High level IMD to Townsend score map — imd_to_townsend","title":"High level IMD to Townsend score map — imd_to_townsend","text":"high level mapping IMD Townsend score inaccurate townsend score","code":""},{"path":"/reference/imd_to_townsend.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"High level IMD to Townsend score map — imd_to_townsend","text":"https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/845345/File_7_-_All_IoD2019_Scores__Ranks__Deciles_and_Population_Denominators_3.csv https://s3-eu-west-1.amazonaws.com/statistics.digitalresources.jisc.ac.uk/dkan/files/Townsend_Deprivation_Scores/Scores/Scores-%202011%20UK%20LSOA.csv","code":""},{"path":"/reference/imd_to_townsend.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"High level IMD to Townsend score map — imd_to_townsend","text":"data frame 10 rows 2 columns: imd_decile IMD mean_townsend average townsend score IMD","code":""},{"path":"/reference/input.html","id":null,"dir":"Reference","previous_headings":"","what":"Locate the input directory — input","title":"Locate the input directory — input","text":"Locate input directory","code":""},{"path":"/reference/input.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Locate the input directory — input","text":"","code":"input(...)"},{"path":"/reference/input.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Locate the input directory — input","text":"... sub paths within input directory","code":""},{"path":"/reference/input.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Locate the input directory — input","text":"path input directory sub paths provided","code":""},{"path":"/reference/input.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Locate the input directory — input","text":"","code":"# devtools::load_all() try({   avoncap::set_input(\"~/Data/avoncap\")   avoncap::input(\"nhs-extract\")    avoncap::all_files()     # exact match on filename column of all_data()   avoncap::most_recent_files(\"AvonCAPLRTDCentralDa\")     # or matches by lower case startWith on directory   avoncap::most_recent_files(\"nhs-extract\",\"deltave\")     avoncap::most_recent_files(\"metadata\")    avoncap::valid_inputs() }) #> Found data directory: /home/vp22681/Data/avoncap #> # A tibble: 31 × 3 #> # Groups:   type [7] #>    type                 subtype      file                         #>    <chr>                <chr>        <chr>                        #>  1 avoncap-data-quality NA           confirmed-missing-2023-08-07 #>  2 avoncap-export       central      central_y1                   #>  3 avoncap-export       central      central_y2                   #>  4 avoncap-export       uad-controls uad-controls                 #>  5 avoncap-export       central      central_y3                   #>  6 avoncap-export       gp           gp                           #>  7 avoncap-export       ed           ed_y3                        #>  8 avoncap-export       central      central_y4                   #>  9 ethnicity            NA           y1                           #> 10 ethnicity            NA           y2                           #> # ℹ 21 more rows"},{"path":"/reference/key_dates.html","id":null,"dir":"Reference","previous_headings":"","what":"Key dates: — key_dates","title":"Key dates: — key_dates","text":"list key dates: mortality_updated - last time NHS mortality data extracted added AvonCAP min_alpha - earliest observation alpha variant max_wuhan - last observation wuhan variant min_delta - earliest observation delta variant max_alpha - last observation alpha variant min_omicron - earliest observation omicron variant max_delta - last observation delta variant default catchment population AvonCAP limited Bristol, North Somerset South Gloucestershire Integrated Care Board (BNSSG ICB). list list GP surgeries considered part denominator.","code":""},{"path":"/reference/key_dates.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Key dates: — key_dates","text":"code - NHS ODS organisational code practice. name - official name practice","code":""},{"path":"/reference/km_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Faceted Kaplan-Meier plot — km_plot","title":"Faceted Kaplan-Meier plot — km_plot","text":"Faceted Kaplan-Meier plot","code":""},{"path":"/reference/km_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Faceted Kaplan-Meier plot — km_plot","text":"","code":"km_plot(   df,   coxmodel,   facet = NULL,   ...,   maxtime = NULL,   ylab = if (!invert) \"surviving (%)\" else \"affected (%)\",   xlab = \"time (days)\",   facetlab = NULL,   ylim = (if (invert) c(0, NA) else c(NA, 100)),   n_breaks = 5,   heights = c(10, 1),   invert = FALSE,   show_label = FALSE,   show_legend = TRUE )"},{"path":"/reference/km_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Faceted Kaplan-Meier plot — km_plot","text":"df data coxmodel cox model output survival::coxph data facet division highlight KM strata. Defaults first term lhs cox model formula ... Arguments passed survival::survfit formula either formula previously fitted model maxtime longest x value plot (optional) ylab y axis label xlab x axis label facetlab label add facet title ylim range show KM plot n_breaks number x axis breaks display also determines timing number \"risk\" counts display. heights relative height KM plot \"risk\" table invert reverse survival statistics count number affected show_label show label risk table ( somewhat redundant items coloured) show_legend show legend strata. (sometimes redundant risk table labelled)","code":""},{"path":"/reference/km_plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Faceted Kaplan-Meier plot — km_plot","text":"ggplot patchwork.","code":""},{"path":"/reference/km_plot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Faceted Kaplan-Meier plot — km_plot","text":"","code":"cox = survival::coxph(survival::Surv(time, status) ~ trt + celltype + karno +   diagtime + age + prior , data = survival::veteran)  km_plot(survival::veteran, cox)  km_plot(survival::veteran, cox, facet = 1)   km_plot(survival::veteran, cox, \"celltype\", show_label=TRUE) &    ggplot2::theme(legend.position=\"bottom\")   km_plot(survival::veteran, cox, \"trt\", show_label=TRUE) &    ggplot2::theme(legend.position=\"bottom\")"},{"path":"/reference/load_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Load data and check structure — load_data","title":"Load data and check structure — load_data","text":"Loads AvonCap data set csv files, may optionally qualified site ('BRI' 'NBT') database year ('y1', 'y2', 'y3') part file name. selects recent files earlier reproduce_at date detects whether set files.","code":""},{"path":"/reference/load_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load data and check structure — load_data","text":"","code":"load_data(   type,   subtype = NULL,   reproduce_at = as.Date(getOption(\"reproduce.at\", default = Sys.Date())),   merge = TRUE,   ... )"},{"path":"/reference/load_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load data and check structure — load_data","text":"type file category see valid_inputs() current list input directory subtype subtype valid_inputs() reproduce_at date cut newer data files merge setting TRUE forces multiple files merged single data frame losing mismatching columns. ... passed cached may specifically want use `.nocache=TRUE``","code":""},{"path":"/reference/load_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load data and check structure — load_data","text":"either list dataframes single merged dataframe","code":""},{"path":"/reference/load_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Load data and check structure — load_data","text":"files loaded csv checked files () columns, (B) type (empty) (C) major parse issues. merges files single dataframe, possible, otherwise return individually loaded files list dataframes.","code":""},{"path":"/reference/load_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load data and check structure — load_data","text":"","code":"try(load_data(\"nhs-extract\",\"deltave\")) #> using cached item: ~/.cache/avoncap/data-6c0a3f301ee14020e3907a7472c55225-efc310106a2b36fab3e67f93fe2c9461.rda #> # A tibble: 18,009 × 243 #>    record_number nhs_number admission_date gender age_at_admission   imd #>  * <chr>              <dbl> <chr>           <dbl>            <dbl> <dbl> #>  1 B02976        1829824764 17/05/2021          2             83.4     3 #>  2 B02977         572676760 17/05/2021          2             32.5     2 #>  3 B02978         427783973 17/05/2021          2             77.4     3 #>  4 B02980        1808110131 17/05/2021          1             90.6     3 #>  5 B02984         485842687 17/05/2021          2             60.2     1 #>  6 B02993         290021094 17/05/2021          2             65.6     8 #>  7 B02994         571224641 17/05/2021          1             64.1     2 #>  8 B03018         427913753 18/05/2021          1             74.7     4 #>  9 B03020        1988976150 18/05/2021          2             65.4     4 #> 10 B03024         430812585 18/05/2021          2             75.7     9 #> # ℹ 17,999 more rows #> # ℹ 237 more variables: rockwood <dbl>, symptom_days_preadmit <dbl>, #> #   fever2 <dbl>, pleurtic_cp <dbl>, cough2 <dbl>, sput_prod <dbl>, #> #   dyspnoea <dbl>, tachypnoea2 <dbl>, anosmia <dbl>, ageusia <dbl>, #> #   dysgeusia <dbl>, fever <dbl>, hypothermia <dbl>, chills <dbl>, #> #   headache <dbl>, malaise <dbl>, wheeze <dbl>, myalgia <dbl>, #> #   worse_confusion <dbl>, general_det <dbl>, hr <dbl>, systolic_bp <dbl>, …"},{"path":"/reference/map_avoncap_central.html","id":null,"dir":"Reference","previous_headings":"","what":"Core avoncap normalisation — map_avoncap_central","title":"Core avoncap normalisation — map_avoncap_central","text":"record_number -> admin.record_number (name) what_was_the_first_surveil -> admin.first_record_number (name) ac_study_number -> admin.consented_record_number (study_id) nhs_number -> admin.patient_identifier (ppi) duplicate -> admin.duplicate (yesno) enrollment_date -> admin.enrollment_date (date) admission_type -> admission.admission_route (list) study_year -> admin.study_year (name) file -> admin.data_file (name) week_number -> admin.week_number (name) c19_diagnosis -> diagnosis.standard_of_care_COVID_diagnosis (list) clinical_radio_diagnosis -> diagnosis.clinical_or_radiological_LRTI_or_pneumonia (yesno) c19_adm_swab -> diagnosis.admission_swab (list) c19_test_type -> diagnosis.test_type (list) qualifying_symptoms_signs -> diagnosis.qualifying_symptoms_signs (name) cc_critieria -> diagnosis.meets_case_control_criteria (yesno) cc_pos_date -> diagnosis.first_COVID_positive_swab_date (date) gender -> demog.gender (list) age_at_admission -> demog.age (double) age_march -> demog.age_in_march_2021 (double) imd -> demog.imd_decile (name) gp_practice -> admin.gp_practice_old (name) gp_practice_drop_down -> admin.gp_practice (list) smoking -> demog.smoker (list) ethnicity2 -> demog.ethnicity (list) care_home -> demog.care_home_resident (yesno) hapcovid_screening -> admission.non_lrtd_hospital_acquired_covid (yesno) hospital_covid -> admission.hospital_acquired_covid (yesno) drugs -> demog.no_drug_abuse, demog.alcohol_abuse, demog.ivdu_abuse, demog.marijuana_abuse, demog.other_inhaled_drug_abuse (checkboxes) vaping -> demog.vaping (list) alc_units -> demog.units_of_alcohol (name) np_swab -> admin.np_swab_taken_1 (list) adm_np_type -> admin.np_swab_site_1 (list) np_date -> admin.np_swab_date_1 (date) days_adm_npswab -> admin.np_swab_day_since_admission (double) np_swab_2 -> admin.np_swab_taken_2 (list) adm_np_type_2 -> admin.np_swab_site_2 (list) np_date_2 -> admin.np_swab_date_2 (date) np_swab_3 -> admin.np_swab_taken_3 (list) adm_np_type_3 -> admin.np_swab_site_3 (list) np_date_3 -> admin.np_swab_date_3 (date) saliva -> admin.saliva_sample_taken (list) saliva_date -> admin.saliva_sample_date (date) days_adm_saliva -> admin.saliva_sample_day_since_admission (double) sputum -> admin.sputum_sample_taken (list) sputum_date -> admin.sputum_sample_date (date) days_adm_sputum -> admin.sputum_sample_day_since_admission (double) pt_ad_ur -> admin.urine_sample_needed (yesno) adm_ur_taken -> admin.urine_sample_taken (list) nourine_reason -> admin.urine_sample_failure_reason (list) adm_np_type_2 -> admin.urine_sample_site (list) adm_ur_date -> admin.urine_sample_date (date) days_adm_urine -> admin.urine_sample_day_since_admission (double) adm_serum_tak -> admin.serum_sample_taken (list) adm_seru_date -> admin.serum_sample_date (date) days_adm_serum -> admin.serum_sample_day_since_admission (double) contraindication -> vaccination.covid_vaccine_contraindicated (yesno) covid19_vax -> vaccination.covid_vaccination (list) covidvax_date -> vaccination.first_dose_date (date) covidvax_dose_2 -> vaccination.second_dose_date (date) covidvax_dose_3 -> vaccination.third_dose_date (date) covidvax_dose_4 -> vaccination.fourth_dose_date (date) covidvax_dose_5 -> vaccination.fifth_dose_date (date) covidvax_dose_6 -> vaccination.sixth_dose_date (date) brand_of_covid19_vaccinati -> vaccination.first_dose_brand (list) covid19vax_brand_2 -> vaccination.second_dose_brand (list) covid19vax_brand_3 -> vaccination.third_dose_brand (list) covid19vax_brand_4 -> vaccination.fourth_dose_brand (list) covid19vax_brand_5 -> vaccination.fifth_dose_brand (list) covid19vax_brand_6 -> vaccination.sixth_dose_brand (list) c19vaxd1_adm -> admission.time_since_first_vaccine_dose (name) c19vaxd2_adm -> admission.time_since_second_vaccine_dose (name) c19vaxd3_adm -> admission.time_since_third_vaccine_dose (name) c19vaxd4_adm -> admission.time_since_fourth_vaccine_dose (name) c19vax5_adm -> admission.time_since_fifth_vaccine_dose (name) c19vax6_adm -> admission.time_since_sixth_vaccine_dose (name) flu_date -> vaccination.last_flu_dose_date (date) fluvax_adm_d1 -> admission.time_since_last_flu_vaccine_dose (name) ppv23_date -> vaccination.last_pneumococcal_dose_date (date) ppv23vax_adm_d -> admission.time_since_last_pneumococcal_vaccine_dose (name) c19_variant -> genomic.variant (variant) year -> admission.year (double) study_week -> admission.study_week (double) admission_date -> admission.date (date) hospital -> admin.hospital, toupper (text_to_factor) adm_diagnosis -> admission.presumed_CAP_radiologically_confirmed, admission.presumed_CAP_clinically_confirmed, admission.presumed_CAP_no_radiology, admission.presumed_LRTI, admission.presumed_Empyema_or_abscess, admission.presumed_exacerbation_COPD, admission.presumed_exacerbation_non_COPD, admission.presumed_congestive_heart_failure, admission.presumed_non_infectious_process, admission.presumed_non_LRTI (checkboxes) ics -> admission.on_inhaled_corticosteroids (yesno) immsup -> admission.on_immunosuppression (yesno) psi_class -> admission.pneumonia_severity_index_class (list) crb_test_mai -> admission.curb_65_severity_score (list) news_2_total -> admission.news2_score (name) pulse_ox -> admission.oximetry (name) rr -> admission.respiratory_rate (name) fio2 -> admission.max_oxygen (name) systolic_bp -> admission.systolic_bp (name) diastolic_bp -> admission.diastolic_bp (name) hr -> admission.heart_rate (name) temperature -> admission.temperature (list) symptom_days_preadmit -> admission.duration_symptoms (double) previous_infection -> admission.previous_covid_infection (yesno_unknown) previousinfection_date -> admission.previous_covid_infection_date (date) c19d_preadm -> admission.time_since_covid_diagnosis (name) rockwood -> admission.rockwood_score (name) cci_total_score -> admission.charlson_comorbidity_index (name) height -> admission.height (name) weight -> admission.weight (name) bmi -> admission.BMI (double) first_radio -> admission.cxr_normal, admission.cxr_pneumonia, admission.cxr_heart_failure, admission.cxr_pleural_effusion, admission.cxr_covid_changes, admission.cxr_other (checkboxes) c19_peep -> day_7.max_peep (name) c19_hospadm -> day_7.length_of_stay (list) c17_high -> day_7.max_care_level (list) c19icuon -> day_7.still_on_icu (yesno) c19_icudays -> day_7.icu_length_of_stay (list) c19_vent -> day_7.max_ventilation_level (list) c19_ox -> day_7.max_o2_level (list) c19_ionotropes -> day_7.ionotropes_needed (yesno) c19_complication -> day_7.PE, day_7.DVT, day_7.ARF, day_7.NSTEMI, day_7.STEMI, day_7.cardiac_failure, day_7.new_AF, day_7.new_other_arrythmia, day_7.inpatient_fall, day_7.other_complication, day_7.no_complication (checkboxes) c19_death7d -> day_7.death (yesno) c19_meds -> treatment.dexamethasone, treatment.remdesevir, treatment.tocilizumab, treatment.sarilumab, treatment.in_drug_trial, treatment.no_drug_treatment, treatment.sotrovimab (checkboxes) hospital_length_of_stay -> outcome.length_of_stay, floor (integer) survival_days -> outcome.survival_duration, round (integer) ip_death -> outcome.inpatient_death (yesno) days_in_icu -> outcome.icu_duration (double) did_the_patient_have_respi -> outcome.respiratory_support_needed (yesno) number_of_days_of_ventilat -> outcome.ventilator_duration (double) ett_days -> outcome.endotracheal_tube_duration (double) renal_replacement_therapy -> outcome.renal_support_duration (double) complications -> outcome.acute_renal_failure, outcome.liver_dysfunction, outcome.hospital_acquired_infection, outcome.acute_respiratory_distress_syndrome, outcome.NSTEMI, outcome.STEMI, outcome.new_AF, outcome.new_other_arrhthmia, outcome.stroke, outcome.DVT, outcome.PE, outcome.heart_failure, outcome.fall_in_hospital, outcome.reduced_mobility, outcome.increasing_care_requirement, outcome.no_complications (checkboxes) ventilatory_support -> outcome.highest_level_ventilatory_support (list) did_the_patient_receive_ec -> outcome.received_ecmo (yesno) inotropic_support_required -> outcome.received_ionotropes (yesno_unknown) lrtd_30d_outcome -> outcome.functional_status (list) survive_1yr -> outcome.one_year_survival (yesno) survival_1yr_days -> outcome.one_year_survival_duration (integer) yr_survival_complete -> outcome.one_year_survival_complete (list) fever2 -> symptom.abnormal_temperature (yesno) pleurtic_cp -> symptom.pleuritic_chest_pain (yesno) cough2 -> symptom.cough (yesno) sput_prod -> symptom.productive_sputum (yesno) dyspnoea -> symptom.dyspnoea (yesno) tachypnoea2 -> symptom.tachypnoea (yesno) confusion -> symptom.confusion (yesno) anosmia -> symptom.anosmia (yesno_unknown) ageusia -> symptom.ageusia (yesno_unknown) dysgeusia -> symptom.dysguesia (yesno_unknown) fever -> symptom.fever (yesno_unknown) hypothermia -> symptom.hypothermia (yesno_unknown) chills -> symptom.chills (yesno_unknown) headache -> symptom.headache (yesno_unknown) malaise -> symptom.malaise (yesno_unknown) wheeze -> symptom.wheeze (yesno_unknown) myalgia -> symptom.myalgia (yesno_unknown) worse_confusion -> symptom.worsening_confusion (yesno_unknown) general_det -> symptom.general_deterioration (yesno_unknown) ox_on_admission -> symptom.oxygen_required_on_admission (yesno_unknown) resp_disease -> comorbid.no_resp_dx, comorbid.copd, comorbid.asthma, comorbid.resp_other (checkboxes) other_respiratory_disease -> comorbid.bronchiectasis, comorbid.interstitial_lung_dx, comorbid.cystic_fibrosis, comorbid.pulmonary_hypertension, comorbid.chronic_pleural_dx, comorbid.other_chronic_resp_dx (checkboxes) chd -> comorbid.no_heart_dx, comorbid.ccf, comorbid.ihd, comorbid.hypertension, comorbid.other_heart_dx (checkboxes) mi -> comorbid.previous_mi (yesno) other_chd -> comorbid.congenital_heart_dx, comorbid.af, comorbid.other_arrythmia, comorbid.pacemaker, comorbid.valvular_heart_dx, comorbid.other_other_heart_dx (checkboxes) diabetes -> comorbid.diabetes (list) dm_meds -> comorbid.diabetes_medications (list) neurological_disease -> comorbid.neuro_other, comorbid.cva, comorbid.tia, comorbid.hemiplegia, comorbid.paraplegia, comorbid.no_neuro_dx (checkboxes) dementia -> comorbid.no_dementia, comorbid.dementia, comorbid.cognitive_impairment (checkboxes) cancer -> comorbid.solid_cancer (list) haem_malig -> comorbid.no_haemotological_cancer, comorbid.leukaemia, comorbid.lymphoma (checkboxes) ckd -> comorbid.ckd (list) liver_disease -> comorbid.liver_disease (list) gastric_ulcers -> comorbid.gastric_ulcers (yesno) pvd -> comorbid.periph_vasc_dx (yesno) ctd -> comorbid.connective_tissue_dx (yesno) immunodeficiency -> comorbid.immunodeficiency (yesno) other_pn_disease -> comorbid.other_pneumococcal_risks (yesno) transplant -> comorbid.transplant_recipient (yesno) pregnancy -> comorbid.pregnancy (list) hiv -> comorbid.no_HIV, comorbid.HIV, comorbid.AIDS (checkboxes) final_soc_lrtd_diagnosis -> diagnosis.SOC_CAP_radiologically_confirmed, diagnosis.SOC_CAP_clinically_confirmed, diagnosis.SOC_CAP_no_radiology, diagnosis.SOC_LRTI, diagnosis.SOC_Empyema_or_abscess, diagnosis.SOC_exacerbation_COPD, diagnosis.SOC_exacerbation_non_COPD, diagnosis.SOC_congestive_heart_failure, diagnosis.SOC_non_infectious_process, diagnosis.SOC_non_LRTI (checkboxes) covid_19_diagnosis -> diagnosis.covid_19_diagnosis (list) ppv23 -> vaccination.pneumovax (list) flu_vaccine -> vaccination.influenza_vaccination (list) abx_14d_prior -> admission.pre_admission_antibiotics_given (yesno_unknown) antibiotic_used -> admission.pre_admission_antibiotic (checkboxes_to_nested_list) antiplatelets -> admission.antiplatelet_therapy (list) anticoagulants -> admission.anticoagulant_therapy (list) statins -> admission.cholesterol_lowering_therapy (list) hypertensives -> admission.antihypertensive_therapy (list) antiviral_14d_prior -> admission.pre_admission_antiviral (checkboxes_to_nested_list)","code":""},{"path":"/reference/map_avoncap_central.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Core avoncap normalisation — map_avoncap_central","text":"","code":"map_avoncap_central()"},{"path":"/reference/map_avoncap_central.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Core avoncap normalisation — map_avoncap_central","text":"list","code":""},{"path":"/reference/map_avoncap_consent.html","id":null,"dir":"Reference","previous_headings":"","what":"Core avoncap consent — map_avoncap_consent","title":"Core avoncap consent — map_avoncap_consent","text":"consented -> admin.consented (list) ppc -> admin.pp_consented (list) withdrawal -> admin.withdrawal (yesno) consent_urine -> admin.consent_for_urine (yesno) consent_blood -> admin.consent_for_blood (yesno) consent_resp_samples1 -> admin.consent_for_respiratory_samples (yesno)","code":""},{"path":"/reference/map_avoncap_consent.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Core avoncap consent — map_avoncap_consent","text":"","code":"map_avoncap_consent()"},{"path":"/reference/map_avoncap_consent.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Core avoncap consent — map_avoncap_consent","text":"list","code":""},{"path":"/reference/map_avoncap_ed.html","id":null,"dir":"Reference","previous_headings":"","what":"Avoncap ED normalisation — map_avoncap_ed","title":"Avoncap ED normalisation — map_avoncap_ed","text":"ED data also mapped using map_avoncap_central() list si quite similar","code":""},{"path":"/reference/map_avoncap_ed.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Avoncap ED normalisation — map_avoncap_ed","text":"","code":"map_avoncap_ed()"},{"path":"/reference/map_avoncap_ed.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Avoncap ED normalisation — map_avoncap_ed","text":"list","code":""},{"path":"/reference/map_avoncap_ed.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Avoncap ED normalisation — map_avoncap_ed","text":"ed_hours -> outcome.emergency_dept_length_of_stay (name) ed_reattendance -> admin.ed_episodes_in_last_30_days (name) hosp_adm_30d -> outcome.admitted_within_30_days (yesno) hosp_adm_7d -> outcome.admitted_within_7_days (yesno) home_d_1 -> outcome.days_since_last_ed_episode (name) radiology_result_1___2 -> radio.consistent_with_pneumonia_1 (yesno) radiology_result_2___2 -> radio.consistent_with_pneumonia_2 (yesno)","code":""},{"path":"/reference/map_avoncap_ed_consent.html","id":null,"dir":"Reference","previous_headings":"","what":"ED consent — map_avoncap_ed_consent","title":"ED consent — map_avoncap_ed_consent","text":"consented -> admin.consented (list) ppc -> admin.pp_consented (list) withdrawal -> admin.withdrawal (yesno) consent_urine -> admin.consent_for_urine (yesno) consent_blood -> admin.consent_for_blood (yesno) consent_resp_samples1 -> admin.consent_for_respiratory_samples (yesno)","code":""},{"path":"/reference/map_avoncap_ed_consent.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"ED consent — map_avoncap_ed_consent","text":"","code":"map_avoncap_ed_consent()"},{"path":"/reference/map_avoncap_ed_consent.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"ED consent — map_avoncap_ed_consent","text":"list","code":""},{"path":"/reference/map_avoncap_haem.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalise the avoncap data haematology data — map_avoncap_haem","title":"Normalise the avoncap data haematology data — map_avoncap_haem","text":"record_number -> admin.record_number (name) ac_study_number -> admin.consented_record_number (study_id) ph_7_35 -> haem.blood_gas_ph (double) glucose -> haem.glucose (double) albumin -> haem.albumin (double) wcc -> haem.white_cell_count (double) eos -> haem.eosinophils (double) hb -> haem.haemoglobin (double) haematocrit -> haem.haemotocrit (double) pmn -> haem.neutrophils (double) lymphocytes -> haem.lymphocytes (double) crp -> haem.crp (double) na_result -> haem.sodium (double) ur_result -> haem.urea (double) egfr -> haem.egfr (double) sars_cov2_antigen -> haem.sars_cov2_antigen (trunc_double) ferritin -> haem.ferritin (double) troponin -> haem.troponin (double) nt_probnp -> haem.pro_bnp (double) d_dimer -> haem.d_dimer (double) patient_blood_group -> haem.blood_group (list)","code":""},{"path":"/reference/map_avoncap_haem.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalise the avoncap data haematology data — map_avoncap_haem","text":"","code":"map_avoncap_haem()"},{"path":"/reference/map_avoncap_haem.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalise the avoncap data haematology data — map_avoncap_haem","text":"list","code":""},{"path":"/reference/map_avoncap_micro.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalise the avoncap data microbiology data — map_avoncap_micro","title":"Normalise the avoncap data microbiology data — map_avoncap_micro","text":"microtest_done -> micro.test_performed (yesno) microtest_date -> micro.test_date (date) microday -> micro.test_days_from_admission (pos_integer) micro_test -> micro.test_type (list) micro_isolates -> micro.pathogen_detected (yesno_unknown) isolate_identified -> micro.pathogen, .micro_isolate_list (checkboxes_to_nested_list) pn_result -> micro.pneumo_serotype_status (list) pn_st -> micro.pneumo_serotype (pneumo_serotype) micro_lab -> micro.sent_to_central_lab (yesno_unknown) pen_susceptibility -> micro.penicillin_susceptibility (checkboxes_to_list) septrin_susceptibility -> micro.septrin_susceptibility (checkboxes_to_list) doxy_susceptibility -> micro.doxycycline_susceptibility (checkboxes_to_list) levoflox_suscept -> micro.levofloxacin_susceptibility (checkboxes_to_list) cef_susceptibility -> micro.ceftriaxone_susceptibility (checkboxes_to_list) pn_uat_result -> micro.pneumo_binax_now (list) lg_uat_result -> micro.pneumo_legionella_uat (list) micro_final_report -> micro.is_final_report (yesno)","code":""},{"path":"/reference/map_avoncap_micro.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalise the avoncap data microbiology data — map_avoncap_micro","text":"","code":"map_avoncap_micro(instrument)"},{"path":"/reference/map_avoncap_micro.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normalise the avoncap data microbiology data — map_avoncap_micro","text":"instrument numeric instrument number","code":""},{"path":"/reference/map_avoncap_micro.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalise the avoncap data microbiology data — map_avoncap_micro","text":"list","code":""},{"path":"/reference/map_avoncap_pneumococcal.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalise the avoncap pneumococcal data — map_avoncap_pneumococcal","title":"Normalise the avoncap pneumococcal data — map_avoncap_pneumococcal","text":"participant_number -> admin.record_number (name) hospital -> admin.hospital (list) nhs_number -> admin.patient_identifier (ppi) age_at_admission -> demog.age (double) sex -> demog.gender (list) test_date -> pneumo.test_date (date) test -> pneumo.test_type (list) serotype -> pneumo.phe_serotype (pneumo_serotype) smoker -> demog.smoker (list) resp_disease -> comorbid.no_resp_dx, comorbid.copd, comorbid.asthma, comorbid.bronchiectasis, comorbid.pulmonary_fibrosis, comorbid.resp_other (checkboxes) chd -> comorbid.no_heart_dx, comorbid.ccf, comorbid.ihd, comorbid.hypertension, comorbid.af, comorbid.other_heart_dx (checkboxes) mi -> comorbid.previous_mi (yesno) ckd -> comorbid.ckd (list) liver_disease -> comorbid.liver_disease (list) diabetes -> comorbid.diabetes (list) dm_meds -> comorbid.diabetes_medications (list) dementia -> comorbid.no_dementia, comorbid.dementia, comorbid.cognitive_impairment (checkboxes) neurological_disease -> comorbid.neuro_other, comorbid.cva, comorbid.tia, comorbid.hemiplegia, comorbid.paraplegia, comorbid.no_neuro_dx (checkboxes) gastric_ulcers -> comorbid.gastric_ulcers (yesno) dysphagia -> comorbid.dysphagia (yesno) pvd -> comorbid.periph_vasc_dx (yesno) ctd -> comorbid.connective_tissue_dx (yesno) immunodeficiency -> comorbid.immunodeficiency (yesno) other_pn_disease -> comorbid.other_pneumococcal_risks (yesno) hiv -> comorbid.no_HIV, comorbid.HIV, comorbid.AIDS (checkboxes) cancer -> comorbid.solid_cancer (list) haem_malig -> comorbid.no_haemotological_cancer, comorbid.leukaemia, comorbid.lymphoma (checkboxes) recent_chemo -> comorbid.recent_chemotherapy (yesno) recent_radiotherapy -> comorbid.recent_radiotherapy (yesno) transplant -> comorbid.transplant_recipient (yesno) pregnancy -> comorbid.pregnancy (list) drugs -> demog.no_drug_abuse, demog.alcohol_abuse, demog.ivdu_abuse, demog.marijuana_abuse, demog.other_inhaled_drug_abuse (checkboxes) immsup -> admission.on_immunosuppression (yesno) weight_problem -> comorbid.bmi_status (list) concomittant_flu -> comorbid.influenza_infection (yesno) hcv -> comorbid.hepatitis_c (yesno) ppv23 -> vaccination.ppv23_vaccination (list) flu_vaccine -> vaccination.flu (list) cci_total_score -> admission.charlson_comorbidity_index (name) los_days -> outcome.length_of_stay (double) amts -> admission.triage_score (list) resp_rate -> admission.respiratory_rate (double) sats_ra -> admission.saturations_on_room_air (double) systolic_bp -> admission.systolic_bp (double) diastolic_bp -> admission.diastolic_bp (double) crb65_score -> admission.crb_65_severity_score (list) curb65_score -> admission.curb_65_severity_score (list) antibiotic_route -> outcome.antibiotic_route (list) antibiotic_days -> outcome.antibiotic_duration (double) infection_site -> admission.infection_site (list) deranged_lfts -> outcome.abnormal_lft (yesno) aki -> outcome.acute_kidney_injury (yesno) pleural_effusion -> outcome.pleural_effusion (yesno) empyema -> outcome.empyema (yesno) discharge_destination -> outcome.discharge_to (list) icu -> outcome.admitted_icu (yesno) niv -> outcome.non_invasive_ventilation (yesno) intubation -> outcome.intubation (yesno) recurrent_pneumonia -> outcome.recurrent_pneumonia (yesno) ecmo -> outcome.received_ecmo (yesno) inotropes -> outcome.received_ionotropes (yesno) trachy -> outcome.tracheostomy (yesno) inpatient_death -> outcome.inpatient_death (yesno) death_30days -> outcome.death_within_30_days (yesno) death_1year -> outcome.death_within_1_year (yesno) survival_days -> outcome.survival_duration (name) albumin -> haem.albumin (double) wcc -> haem.white_cell_count (double) hb -> haem.haemoglobin (double) pmn -> haem.neutrophils (double) lymphocytes -> haem.lymphocytes (double) crp -> haem.crp (double) na_result -> haem.sodium (double) ur_result -> haem.urea (double) egfr -> haem.egfr (double) creatinine -> haem.creatinine (double) cxr_sides -> radio.cxr_infection (list) cxr_lobes -> radio.cxr_lobar_changes (list) death_5year -> outcome.death_within_5_years (yesno) survival_days_2 -> outcome.5_yr_survival_duration (name) imd_decile -> demog.imd_decile (name)","code":""},{"path":"/reference/map_avoncap_pneumococcal.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalise the avoncap pneumococcal data — map_avoncap_pneumococcal","text":"","code":"map_avoncap_pneumococcal()"},{"path":"/reference/map_avoncap_pneumococcal.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalise the avoncap pneumococcal data — map_avoncap_pneumococcal","text":"list","code":""},{"path":"/reference/map_avoncap_radio.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalise the avoncap data radiology data — map_avoncap_radio","title":"Normalise the avoncap data radiology data — map_avoncap_radio","text":"radio_exam -> radio.test_performed (yesno) radiology_date -> radio.test_date (date) radiodays -> radio.test_days_from_admission (pos_integer) radio_test -> radio.test_type (list) radiology_result -> radio.alrtd_finding (checkboxes_to_nested_list) radiology_other_result -> radio.non_alrtd_finding (checkboxes_to_nested_list)","code":""},{"path":"/reference/map_avoncap_radio.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalise the avoncap data radiology data — map_avoncap_radio","text":"","code":"map_avoncap_radio(instrument)"},{"path":"/reference/map_avoncap_radio.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normalise the avoncap data radiology data — map_avoncap_radio","text":"instrument numeric instrument number","code":""},{"path":"/reference/map_avoncap_radio.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalise the avoncap data radiology data — map_avoncap_radio","text":"list","code":""},{"path":"/reference/map_avoncap_virol.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalise the avoncap data virology data — map_avoncap_virol","title":"Normalise the avoncap data virology data — map_avoncap_virol","text":"viral_testing_performed -> virol.test_performed (yesno) virology_date_of_asst -> virol.test_date (date) viroldays -> virol.test_days_from_admission (pos_integer) specimen_type -> virol.test_type (list) virus_isolated -> virol.pathogen_detected (yesno) test_type -> virol.test_type (list) virus_pathogen -> virol.pathogen, .virol_isolate_list (checkboxes_to_nested_list) virol_patient_lab -> virol.test_provenance (list)","code":""},{"path":"/reference/map_avoncap_virol.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalise the avoncap data virology data — map_avoncap_virol","text":"","code":"map_avoncap_virol(instrument)"},{"path":"/reference/map_avoncap_virol.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normalise the avoncap data virology data — map_avoncap_virol","text":"instrument numeric instrument number","code":""},{"path":"/reference/map_avoncap_virol.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalise the avoncap data virology data — map_avoncap_virol","text":"list","code":""},{"path":"/reference/map_urine_antigens.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalise the urinary antigen data — map_urine_antigens","title":"Normalise the urinary antigen data — map_urine_antigens","text":"RESULT -> pneumo.urine_antigen_result, .x (text) EVENT_DATE -> pneumo.test_date (date) ANALYSIS -> pneumo.urine_antigen_test (name) SUBJECT -> admin.consented_record_number (study_id) BARCODE -> pneumo.urine_antigen_sample_id (name)","code":""},{"path":"/reference/map_urine_antigens.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalise the urinary antigen data — map_urine_antigens","text":"","code":"map_urine_antigens()"},{"path":"/reference/map_urine_antigens.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalise the urinary antigen data — map_urine_antigens","text":"list","code":""},{"path":"/reference/map_urine_binax.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalise the urinary antigen data (binax results) — map_urine_binax","title":"Normalise the urinary antigen data (binax results) — map_urine_binax","text":"RESULT -> pneumo.binax_result, .x (text) EVENT_DATE -> pneumo.test_date (date) SUBJECT -> admin.consented_record_number (study_id) BARCODE -> pneumo.urine_antigen_sample_id (name) RESULT -> pneumo.binax_result, .x (text) EVENT_DATE -> pneumo.test_date (date) SUBJECT -> admin.consented_record_number (study_id) BARCODE -> pneumo.urine_antigen_sample_id (name)","code":""},{"path":"/reference/map_urine_binax.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalise the urinary antigen data (binax results) — map_urine_binax","text":"","code":"map_urine_binax()  map_urine_binax()"},{"path":"/reference/map_urine_binax.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalise the urinary antigen data (binax results) — map_urine_binax","text":"list list","code":""},{"path":"/reference/most_recent_files.html","id":null,"dir":"Reference","previous_headings":"","what":"find most recent files of a specific type — most_recent_files","title":"find most recent files of a specific type — most_recent_files","text":"find recent files specific type","code":""},{"path":"/reference/most_recent_files.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"find most recent files of a specific type — most_recent_files","text":"","code":"most_recent_files(   type = \"\",   subtype = NULL,   reproduce_at = as.Date(getOption(\"reproduce.at\", default = Sys.Date())) )"},{"path":"/reference/most_recent_files.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"find most recent files of a specific type — most_recent_files","text":"type see valid_inputs() current list supported types input directory subtype see valid_inputs() list supported filenames reproduce_at date new files ignored. enforces specific version data.","code":""},{"path":"/reference/most_recent_files.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"find most recent files of a specific type — most_recent_files","text":"list file paths date files given type relevant site study year","code":""},{"path":"/reference/most_recent_files.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"find most recent files of a specific type — most_recent_files","text":"","code":"# devtools::load_all() try({   avoncap::set_input(\"~/Data/avoncap\")   avoncap::input(\"nhs-extract\")    avoncap::all_files()     # exact match on filename column of all_data()   avoncap::most_recent_files(\"AvonCAPLRTDCentralDa\")     # or matches by lower case startWith on directory   avoncap::most_recent_files(\"nhs-extract\",\"deltave\")     avoncap::most_recent_files(\"metadata\")    avoncap::valid_inputs() }) #> Found data directory: /home/vp22681/Data/avoncap #> # A tibble: 31 × 3 #> # Groups:   type [7] #>    type                 subtype      file                         #>    <chr>                <chr>        <chr>                        #>  1 avoncap-data-quality NA           confirmed-missing-2023-08-07 #>  2 avoncap-export       central      central_y1                   #>  3 avoncap-export       central      central_y2                   #>  4 avoncap-export       uad-controls uad-controls                 #>  5 avoncap-export       central      central_y3                   #>  6 avoncap-export       gp           gp                           #>  7 avoncap-export       ed           ed_y3                        #>  8 avoncap-export       central      central_y4                   #>  9 ethnicity            NA           y1                           #> 10 ethnicity            NA           y2                           #> # ℹ 21 more rows"},{"path":"/reference/normalise_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Sanitise AvonCap data columns — normalise_data","title":"Sanitise AvonCap data columns — normalise_data","text":"AvonCap data lots columns named difficult remember fashion, composed data items enumerated values semantics. makes displaying difficult filtering done raw data inscrutable. Depending source data different columns may present due differences NHS UoB data sets. redcap database options may checklists radio buttons, end mysterious names data.","code":""},{"path":"/reference/normalise_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sanitise AvonCap data columns — normalise_data","text":"","code":"normalise_data(rawData, instrument = NULL, ...)"},{"path":"/reference/normalise_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sanitise AvonCap data columns — normalise_data","text":"rawData raw data load_data() instrument numeric instrument number applicable ... Arguments passed normalise_generic remove_mapped gets rid original columns mapping (leaving new versions) remove_unmapped gets rid columns mapping mappings set mappings (see zzz-avoncap-mappings.R) messages set dtrackr glue specs populate first box fo flow chart. (can use {files}, {reproduce_at}, {date}, {.total}) data_source_info null filename, function write file details input files used.","code":""},{"path":"/reference/normalise_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sanitise AvonCap data columns — normalise_data","text":"tracked dataframe n","code":""},{"path":"/reference/normalise_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Sanitise AvonCap data columns — normalise_data","text":"function maps data tidy dataframe consistently named columns, named factors appropriate. mapping defined data. files sanitisation code held normalise-xxx.R file. turn may depend mapping-xxx.R files","code":""},{"path":"/reference/normalise_generic.html","id":null,"dir":"Reference","previous_headings":"","what":"Sanitise RedCap data columns — normalise_generic","title":"Sanitise RedCap data columns — normalise_generic","text":"Sanitise RedCap data columns","code":""},{"path":"/reference/normalise_generic.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sanitise RedCap data columns — normalise_generic","text":"","code":"normalise_generic(   rawData,   mappings,   remove_mapped = TRUE,   remove_unmapped = TRUE,   messages = c(\"files: {files}\", \"{.total} rows\", \"files from: {date}\"),   data_source_info = NULL,   ... )"},{"path":"/reference/normalise_generic.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sanitise RedCap data columns — normalise_generic","text":"rawData raw data load_data() mappings set mappings (see zzz-avoncap-mappings.R) remove_mapped gets rid original columns mapping (leaving new versions) remove_unmapped gets rid columns mapping messages set dtrackr glue specs populate first box fo flow chart. (can use {files}, {reproduce_at}, {date}, {.total}) data_source_info null filename, function write file details input files used. ... passed onto .cached(...). e.g. nocache = TRUE can used defeat caching.","code":""},{"path":"/reference/normalise_generic.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sanitise RedCap data columns — normalise_generic","text":"tracked dataframe mappings applied","code":""},{"path":"/reference/original_field_names.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the mapping of transformed columns back to original — original_field_names","title":"Get the mapping of transformed columns back to original — original_field_names","text":"Get mapping transformed columns back original","code":""},{"path":"/reference/original_field_names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the mapping of transformed columns back to original — original_field_names","text":"","code":"original_field_names(data, inverse = TRUE)"},{"path":"/reference/original_field_names.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the mapping of transformed columns back to original — original_field_names","text":"data transformed data set. inverse give data old -> new mapping finding normalised names original columns. false gives new->old finding original names normalised columns","code":""},{"path":"/reference/original_field_names.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the mapping of transformed columns back to original — original_field_names","text":"named list mapping original new columns","code":""},{"path":"/reference/phe_serotypes.html","id":null,"dir":"Reference","previous_headings":"","what":"Pneumococcal UAD serotypes — phe_serotypes","title":"Pneumococcal UAD serotypes — phe_serotypes","text":"somewhat complete list pneumococcal serotypes seen Bristol","code":""},{"path":"/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"/reference/readable_label.html","id":null,"dir":"Reference","previous_headings":"","what":"Get a label for a column — readable_label","title":"Get a label for a column — readable_label","text":"Get label column","code":""},{"path":"/reference/readable_label.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get a label for a column — readable_label","text":"","code":"readable_label(columnVar, colNames = default_column_names())"},{"path":"/reference/readable_label.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get a label for a column — readable_label","text":"columnVar column name string colNames bespoke column names mapping (see default_column_names(...))","code":""},{"path":"/reference/readable_label.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get a label for a column — readable_label","text":"mapped column name","code":""},{"path":"/reference/readable_label_mapping.html","id":null,"dir":"Reference","previous_headings":"","what":"Get a readable label for the AvonCap data as a named list (for ggplot) — readable_label_mapping","title":"Get a readable label for the AvonCap data as a named list (for ggplot) — readable_label_mapping","text":"Get readable label AvonCap data named list (ggplot)","code":""},{"path":"/reference/readable_label_mapping.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get a readable label for the AvonCap data as a named list (for ggplot) — readable_label_mapping","text":"","code":"readable_label_mapping(x, ...)  # S3 method for data.frame readable_label_mapping(x, colNames = default_column_names(...), ...)  # S3 method for list readable_label_mapping(x, colNames = default_column_names(...), ...)  # S3 method for character readable_label_mapping(x, colNames = default_column_names(...), ...)  # S3 method for default readable_label_mapping(x, colNames = default_column_names(...), ...)"},{"path":"/reference/readable_label_mapping.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get a readable label for the AvonCap data as a named list (for ggplot) — readable_label_mapping","text":"x either column names strings, dataframe ... ignored colNames mapping convert column name (string) readable label","code":""},{"path":"/reference/readable_label_mapping.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get a readable label for the AvonCap data as a named list (for ggplot) — readable_label_mapping","text":"named list labels columns","code":""},{"path":"/reference/readable_label_mapping.html","id":"methods-by-class-","dir":"Reference","previous_headings":"","what":"Methods (by class)","title":"Get a readable label for the AvonCap data as a named list (for ggplot) — readable_label_mapping","text":"readable_label_mapping(data.frame): data frames readable_label_mapping(list): lists readable_label_mapping(character): character vectors readable_label_mapping(default): defaults","code":""},{"path":"/reference/relevel_serotypes.html","id":null,"dir":"Reference","previous_headings":"","what":"Relevel serotype data into an factor based on PCV group status and serotype name. — relevel_serotypes","title":"Relevel serotype data into an factor based on PCV group status and serotype name. — relevel_serotypes","text":"Relevel serotype data factor based PCV group status serotype name.","code":""},{"path":"/reference/relevel_serotypes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Relevel serotype data into an factor based on PCV group status and serotype name. — relevel_serotypes","text":"","code":"relevel_serotypes(serotypes, ..., exprs)"},{"path":"/reference/relevel_serotypes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Relevel serotype data into an factor based on PCV group status and serotype name. — relevel_serotypes","text":"serotypes vector serotypes factor character. ... unwrapped version exprs parameter exprs list formulae predicate LHS PCV group name RHS. interpreted parameters dplyr::case_when call. must protected interpretation wrapping rlang::exprs(). predicates tested avoncap::serotype_data$map use  following columns 'c(\"4\", \"6B\", \"9V\", \"14\", \"18C\", \"19F\", \"23F\", \"1\", \"3\", \"5\", \"6A\", \"7F\", \"19A\", \"22F\", \"33F\", \"8\", \"10A\", \"11A\", \"12F\", \"15B\", \"2\", \"9N\", \"17F\", \"20\")','c(TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE)','c(TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE)','c(TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE)','c(TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, FALSE, FALSE, FALSE)','c(TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE)','c(FALSE, FALSE, FALS default option form TRUE ~ \"Non PCV serotype\" must exist capture unmatched items.","code":""},{"path":"/reference/relevel_serotypes.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Relevel serotype data into an factor based on PCV group status and serotype name. — relevel_serotypes","text":"","code":"x = rlang::exprs(   PCV7 ~ \"PCV7\",   PCV15 ~ \"PCV15-7\",   TRUE ~ \"Non-PCV15 serotype\" ) relevel_serotypes(avoncap::phe_serotypes, exprs=x) #> [1] <NA> #> 50 Levels: 4 6B 9V 14 18C 19F 23F 1 3 5 6A 7F 19A 22F 33F 2 6C 7C 8 9N ... 38 relevel_serotypes(avoncap::phe_serotypes) #> [1] <NA> #> 50 Levels: 4 6B 9V 14 18C 19F 23F 1 3 5 6A 7F 19A 22F 33F 8 10A 11A 12F ... 38  relevel_serotypes(avoncap::phe_serotypes,   PCV24Affinivax ~ \"Affinivax\",   TRUE ~ \"Non-affinivax\" ) #> [1] <NA> #> 50 Levels: 1 2 3 4 5 6A 6B 7F 8 9N 9V 10A 11A 12F 14 15B 17F 18C 19A 19F ... 38"},{"path":"/reference/save_data_source_info.html","id":null,"dir":"Reference","previous_headings":"","what":"Write file source information out to a text files — save_data_source_info","title":"Write file source information out to a text files — save_data_source_info","text":"Write file source information text files","code":""},{"path":"/reference/save_data_source_info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write file source information out to a text files — save_data_source_info","text":"","code":"save_data_source_info(..., .file)"},{"path":"/reference/save_data_source_info.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write file source information out to a text files — save_data_source_info","text":"... list data frames loaded load_data(...) call .file output file location","code":""},{"path":"/reference/save_data_source_info.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Write file source information out to a text files — save_data_source_info","text":"file name written (invisibly)","code":""},{"path":"/reference/scale_fill_serotype.html","id":null,"dir":"Reference","previous_headings":"","what":"A ggplot scale for pneumococcal serotypes that keeps PCV groups together — scale_fill_serotype","title":"A ggplot scale for pneumococcal serotypes that keeps PCV groups together — scale_fill_serotype","text":"scale groups colours PCV group, important source data using levels scale otherwise colour legend ordered different sequence. can achieved using relevel_serotypes,","code":""},{"path":"/reference/scale_fill_serotype.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A ggplot scale for pneumococcal serotypes that keeps PCV groups together — scale_fill_serotype","text":"","code":"scale_fill_serotype(   ...,   palette_fn = scales::brewer_pal(palette = \"Dark2\"),   undefined = \"#606060\",   exprs = rlang::exprs() )"},{"path":"/reference/scale_fill_serotype.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"A ggplot scale for pneumococcal serotypes that keeps PCV groups together — scale_fill_serotype","text":"... Arguments passed ggplot2::scale_fill_manual values set aesthetic values map data values . values matched order (usually alphabetical) limits scale, breaks provided. named vector, values matched based names instead. Data values match given na.value. aesthetics Character string vector character strings listing name(s) aesthetic(s) scale works . can useful, example, apply colour settings colour fill aesthetics time, via aesthetics = c(\"colour\", \"fill\"). breaks One : NULL breaks waiver() default breaks (scale limits) character vector breaks function takes limits input returns breaks output na.value aesthetic value use missing (NA) values palette_fn function returns set colours number levels. functions can obtained things like scales::brewer_pal(...) undefined colour last group assumed Unknown types exprs list formulae predicate LHS PCV group name RHS. interpreted parameters dplyr::case_when call. must protected interpretation wrapping rlang::exprs(). predicates tested avoncap::serotype_data$map use  following columns 'c(\"4\", \"6B\", \"9V\", \"14\", \"18C\", \"19F\", \"23F\", \"1\", \"3\", \"5\", \"6A\", \"7F\", \"19A\", \"22F\", \"33F\", \"8\", \"10A\", \"11A\", \"12F\", \"15B\", \"2\", \"9N\", \"17F\", \"20\")','c(TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE)','c(TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE)','c(TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE)','c(TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, FALSE, FALSE, FALSE)','c(TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE)','c(FALSE, FALSE, FALS default option form TRUE ~ \"Non PCV serotype\" must exist capture unmatched items.","code":""},{"path":"/reference/scale_fill_serotype.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"A ggplot scale for pneumococcal serotypes that keeps PCV groups together — scale_fill_serotype","text":"ggplot2 scale","code":""},{"path":"/reference/serotype_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Pneumococcal UAD serotype groups and crossmaps — serotype_data","title":"Pneumococcal UAD serotype groups and crossmaps — serotype_data","text":"list pneumococcal serotype / UAD cross mappings","code":""},{"path":"/reference/serotype_pcv_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Pneumococcal serotype PCV groups — serotype_pcv_map","title":"Pneumococcal serotype PCV groups — serotype_pcv_map","text":"Pneumococcal serotype PCV groups","code":""},{"path":"/reference/serotype_uad_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Serotype UAD mappings — serotype_uad_map","title":"Serotype UAD mappings — serotype_uad_map","text":"Serotype UAD mappings","code":""},{"path":"/reference/set_input.html","id":null,"dir":"Reference","previous_headings":"","what":"Sets the location of data for an analysis — set_input","title":"Sets the location of data for an analysis — set_input","text":"Also performs structure checks makes sure README files place.","code":""},{"path":"/reference/set_input.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sets the location of data for an analysis — set_input","text":"","code":"set_input(path)"},{"path":"/reference/set_input.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sets the location of data for an analysis — set_input","text":"path path input directory","code":""},{"path":"/reference/set_input.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sets the location of data for an analysis — set_input","text":"full path directory","code":""},{"path":"/reference/spline_term_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Spline term marginal effects plot — spline_term_plot","title":"Spline term marginal effects plot — spline_term_plot","text":"Spline term marginal effects plot","code":""},{"path":"/reference/spline_term_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Spline term marginal effects plot — spline_term_plot","text":"","code":"spline_term_plot(   coxmodel,   var_name,   xlab = var_name,   max_y = NULL,   n_breaks = 7 )"},{"path":"/reference/spline_term_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Spline term marginal effects plot — spline_term_plot","text":"coxmodel output coxph model var_name variable involved spline term xlab x axis label max_y maximium hazard ratio display y axis. Inferred central estimates missing, likely cut confidence intervals n_breaks number divisions y axis","code":""},{"path":"/reference/spline_term_plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Spline term marginal effects plot — spline_term_plot","text":"ggplot","code":""},{"path":"/reference/stacked_barplot.html","id":null,"dir":"Reference","previous_headings":"","what":"Stacked bar plot — stacked_barplot","title":"Stacked bar plot — stacked_barplot","text":"function plots stacked bar proportions input set data","code":""},{"path":"/reference/stacked_barplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Stacked bar plot — stacked_barplot","text":"","code":"stacked_barplot(data, mapping, ...)"},{"path":"/reference/stacked_barplot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Stacked bar plot — stacked_barplot","text":"data data mapping aes mapping least x fill. facetting group must contain facet variable ... passed geom_bar","code":""},{"path":"/reference/stacked_barplot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Stacked bar plot — stacked_barplot","text":"ggplot","code":""},{"path":"/reference/stacked_barplot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Stacked bar plot — stacked_barplot","text":"","code":"stacked_barplot(     ggplot2::diamonds,     ggplot2::aes(x=cut, fill=clarity, group=color)   )+   ggplot2::facet_wrap(dplyr::vars(color))"},{"path":"/reference/start_date_of_week.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert a study week back into a date — start_date_of_week","title":"Convert a study week back into a date — start_date_of_week","text":"poorly named give start date input integer","code":""},{"path":"/reference/start_date_of_week.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert a study week back into a date — start_date_of_week","text":"","code":"start_date_of_week(study_week)"},{"path":"/reference/start_date_of_week.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert a study week back into a date — start_date_of_week","text":"study_week accept decimals returns nearest whole date value","code":""},{"path":"/reference/start_date_of_week.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert a study week back into a date — start_date_of_week","text":"vector sudy_week numbers","code":""},{"path":"/reference/study_week.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert a date to a study week — study_week","title":"Convert a date to a study week — study_week","text":"Convert date study week","code":""},{"path":"/reference/study_week.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert a date to a study week — study_week","text":"","code":"study_week(dates)"},{"path":"/reference/study_week.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert a date to a study week — study_week","text":"dates list date objects","code":""},{"path":"/reference/study_week.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert a date to a study week — study_week","text":"integer number weeks since 2019-12-30","code":""},{"path":"/reference/uad_groups.html","id":null,"dir":"Reference","previous_headings":"","what":"UAD serotype groups — uad_groups","title":"UAD serotype groups — uad_groups","text":"UAD serotype groups","code":""},{"path":"/reference/uad_pcv_map.html","id":null,"dir":"Reference","previous_headings":"","what":"UAD PCV map — uad_pcv_map","title":"UAD PCV map — uad_pcv_map","text":"UAD PCV map","code":""},{"path":"/reference/upset_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Upset plot with counts stratified by a categorical column — upset_plot","title":"Upset plot with counts stratified by a categorical column — upset_plot","text":"Upset plot counts stratified categorical column","code":""},{"path":"/reference/upset_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Upset plot with counts stratified by a categorical column — upset_plot","text":"","code":"upset_plot(df, boolean_cols, categorical_col, lbl_size = 5)"},{"path":"/reference/upset_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Upset plot with counts stratified by a categorical column — upset_plot","text":"df data boolean_cols tidyselect specification selecting columns used binary one-hot encoded classes categorical_col column containing disjoint category factor lbl_size font sise label","code":""},{"path":"/reference/upset_plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Upset plot with counts stratified by a categorical column — upset_plot","text":"ggplot","code":""},{"path":"/reference/valid_inputs.html","id":null,"dir":"Reference","previous_headings":"","what":"A valid set of types of file that can be loaded by load_data(...) — valid_inputs","title":"A valid set of types of file that can be loaded by load_data(...) — valid_inputs","text":"valid set types file can loaded load_data(...)","code":""},{"path":"/reference/valid_inputs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A valid set of types of file that can be loaded by load_data(...) — valid_inputs","text":"","code":"valid_inputs()"},{"path":"/reference/valid_inputs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"A valid set of types of file that can be loaded by load_data(...) — valid_inputs","text":"dataframe type, subtype","code":""},{"path":"/reference/valid_inputs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"A valid set of types of file that can be loaded by load_data(...) — valid_inputs","text":"","code":"# devtools::load_all() try({   avoncap::set_input(\"~/Data/avoncap\")   avoncap::input(\"nhs-extract\")    avoncap::all_files()     # exact match on filename column of all_data()   avoncap::most_recent_files(\"AvonCAPLRTDCentralDa\")     # or matches by lower case startWith on directory   avoncap::most_recent_files(\"nhs-extract\",\"deltave\")     avoncap::most_recent_files(\"metadata\")    avoncap::valid_inputs() }) #> Found data directory: /home/vp22681/Data/avoncap #> # A tibble: 31 × 3 #> # Groups:   type [7] #>    type                 subtype      file                         #>    <chr>                <chr>        <chr>                        #>  1 avoncap-data-quality NA           confirmed-missing-2023-08-07 #>  2 avoncap-export       central      central_y1                   #>  3 avoncap-export       central      central_y2                   #>  4 avoncap-export       uad-controls uad-controls                 #>  5 avoncap-export       central      central_y3                   #>  6 avoncap-export       gp           gp                           #>  7 avoncap-export       ed           ed_y3                        #>  8 avoncap-export       central      central_y4                   #>  9 ethnicity            NA           y1                           #> 10 ethnicity            NA           y2                           #> # ℹ 21 more rows"},{"path":"/reference/validate_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate AvonCap raw data — validate_data","title":"Validate AvonCap raw data — validate_data","text":"Runs set QA checks. function dispatches call data set specific function using type subtype data set. checks source files named validate-xxx.R depending data source.","code":""},{"path":"/reference/validate_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate AvonCap raw data — validate_data","text":"","code":"validate_data(rawData, ...)"},{"path":"/reference/validate_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate AvonCap raw data — validate_data","text":"rawData raw data load_data() ... used / passed validation function specific type data.","code":""},{"path":"/reference/validate_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate AvonCap raw data — validate_data","text":"input new data_quality_failures attribute containing issues.","code":""},{"path":"/reference/write_issues.html","id":null,"dir":"Reference","previous_headings":"","what":"Write out data quality issues — write_issues","title":"Write out data quality issues — write_issues","text":"Write data quality issues","code":""},{"path":"/reference/write_issues.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write out data quality issues — write_issues","text":"","code":"write_issues(df, file)"},{"path":"/reference/write_issues.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write out data quality issues — write_issues","text":"df raw data frame file output data quality file","code":""},{"path":"/reference/write_issues.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Write out data quality issues — write_issues","text":"list failures dataframe","code":""},{"path":"/reference/xglimpse.html","id":null,"dir":"Reference","previous_headings":"","what":"Wrapper around table — xglimpse","title":"Wrapper around table — xglimpse","text":"Wrapper around table","code":""},{"path":"/reference/xglimpse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wrapper around table — xglimpse","text":"","code":"xglimpse(data, ...)"},{"path":"/reference/xglimpse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Wrapper around table — xglimpse","text":"data dataframe ... columns named expressions cross-tabulate","code":""},{"path":"/reference/xglimpse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Wrapper around table — xglimpse","text":"cross-tabulation","code":""}]
